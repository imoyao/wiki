---
title: Python æ ‡å‡†åº“ç³»åˆ—ä¹‹ json æ¨¡å—

tags: 
  - ç¼–ç 
  - é¢å‘å¯¹è±¡
top: 4
categories: 
  - ğŸ’» å·¥ä½œ
  - ğŸPython
  - å…¨æ ˆä¹‹è·¯
  - 7-æ ‡å‡†åº“
date: 2020-05-23 18:21:46
permalink: /pages/2d95b9/
---
> JSON (JavaScript Object Notation) (http://json.org)
        is a subset of JavaScript syntax (ECMA-262 3rd edition) used as a lightweight data interchange format.

JSON é€šå¸¸ç”¨äºåœ¨ Web å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ•°æ®äº¤æ¢ï¼Œå³æŠŠ`å­—ç¬¦ä¸²ç±»å‹`çš„æ•°æ®è½¬æ¢æˆ`PythonåŸºæœ¬æ•°æ®ç±»å‹`æˆ–è€…å°†`PythonåŸºæœ¬æ•°æ®ç±»å‹`è½¬æ¢æˆ`å­—ç¬¦ä¸²ç±»å‹`ã€‚

## å¸¸ç”¨æ–¹æ³•

|æ–¹æ³•|è¯´æ˜|
|:--:|:--|
|json.loads(obj)|å°†å­—ç¬¦ä¸²åºåˆ—åŒ–æˆ Python çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ³¨æ„å•å¼•å·ä¸åŒå¼•å·|
|json.dumps(obj)|å°† Python çš„åŸºæœ¬æ•°æ®ç±»å‹åºåˆ—åŒ–æˆå­—ç¬¦ä¸²|
|json.load(obj)|è¯»å–æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²ï¼Œåºåˆ—åŒ–æˆ Python çš„åŸºæœ¬æ•°æ®ç±»å‹|
|json.dump(obj)|å°† Python çš„åŸºæœ¬æ•°æ®ç±»å‹åºåˆ—åŒ–æˆå­—ç¬¦ä¸²å¹¶å†™å…¥åˆ°æ–‡ä»¶ä¸­|

## å®ä¾‹

- å°†å­—ç¬¦ä¸²åºåˆ—åŒ–æˆå­—å…¸

åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡`dict_str`
```python
>>> dict_str = '{"k1":"v1","k2":"v2"}'
# æ•°æ®ç±»å‹ä¸ºstr
>>> type(dict_str)
<class 'str'>
```

å°†å­—ç¬¦ä¸²å˜é‡`dict_str`åºåˆ—åŒ–æˆå­—å…¸æ ¼å¼
```python
>>> import json
>>> dict_json = json.loads(dict_str)
```

æŸ¥çœ‹æ•°æ®ç±»å‹å¹¶è¾“å‡ºå†…å®¹

```python
>>> type(dict_json)
# æ•°æ®ç±»å‹è¢«åºåˆ—åŒ–æˆå­—å…¸æ ¼å¼äº†
<class 'dict'>
>>> dict_json
{'k1': 'v1', 'k2': 'v2'}
```

- å°†ä¸€ä¸ªåˆ—è¡¨ç±»å‹çš„å˜é‡åºåˆ—åŒ–æˆå­—ç¬¦ä¸²ç±»å‹

åˆ›å»ºä¸€ä¸ªåˆ—è¡¨`json_li`

```python
>>> json_li = [11,22,33,44]  
# æ•°æ®ç±»å‹ä¸ºlist
>>> type(json_li)
<class 'list'>
```

- å°†å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ä¸º Python çš„åŸºæœ¬æ•°æ®ç±»å‹

```python
>>> import json
>>> json_str = json.dumps(json_li)
```

æŸ¥çœ‹æ•°æ®ç±»å‹

```python
# ä¸ºstr
>>> type(json_str)
<class 'str'>
>>> json_str
'[11, 22, 33, 44]'
```

- æŠŠå­—å…¸å½“ä½œå­—ç¬¦ä¸²å­˜å…¥ db æ–‡ä»¶å½“ä¸­

```python
# åˆ›å»ºä¸€ä¸ªå­—å…¸çš„æ•°æ®ç±»å‹
>>> dic = {"k1":123,"k2":456}
# è¾“å‡ºç±»å‹åŠå†…å®¹
>>> print(type(dic),dic)
(<type 'dict'>, {'k2': 456, 'k1': 123})
# å¯¼å…¥jsonæ¨¡å—
>>> import json
# å°†dicè½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶ä¸”å†™å…¥åˆ°å½“å‰ç›®å½•ä¸‹é¢çš„dbæ–‡ä»¶å†…ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶åˆ™åˆ›å»º
>>> json.dump(dic,open("db","w"))
# å¯¼å…¥osæ¨¡å—æŸ¥çœ‹
>>> import os
# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹é¢çš„æ–‡ä»¶
>>> os.system("ls -l")
total 8
-rw-r--r-- 1 root root 22 May 20 23:54 db
0
# æŸ¥çœ‹æ–‡ä»¶dbçš„å†…å®¹é‚£ä¸ªï¼Œæœ€åé¢é‚£ä¸ª0æ˜¯ä»£è¡¨å‘½ä»¤æ‰§è¡ŒæˆåŠŸ
>>> os.system("cat db")
{"k2": 456, "k1": 123}0
```

- è¯»å–æ–‡ä»¶å†…å®¹ï¼ŒæŠŠè¯»å–å‡ºæ¥çš„å­—ç¬¦ä¸²è½¬æ¢æˆ Python çš„åŸºæœ¬æ•°æ®ç±»å‹

```python
# è¯»å–å½“å‰ç›®å½•ä¸‹é¢çš„dbæ–‡ä»¶ï¼ŒæŠŠå†…å®¹è½¬æ¢ä¸ºPythonçš„åŸºæœ¬æ•°æ®ç±»å‹å¹¶èµ‹å€¼ç»™result
>>> result = json.load(open("db","r"))
# æŸ¥çœ‹å¯¹è±¡resultçš„æ•°æ®ç±»å‹åŠå†…å®¹
>>> print(type(result),result)
(<type 'dict'>, {u'k2': 456, u'k1': 123})
```
---
title: query
date: 2021-02-20 22:41:45
permalink: /pages/ce4d67/
categories:
  - ğŸ“–å¥½ä¹¦
  - SqlAlchemyä¸­æ–‡æ–‡æ¡£
  - orm
tags:
  - 
---
æŸ¥è¯¢API [Â¶](#query-api "Permalink to this headline")
====================================================

æŸ¥è¯¢å¯¹è±¡[Â¶](#the-query-object "Permalink to this headline")
-----------------------------------------------------------

[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query") is
produced in terms of a given [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session"),
using the [`query()`](session_api.html#sqlalchemy.orm.session.Session.query "sqlalchemy.orm.session.Session.query")
method:

    q = session.query(SomeMappedClass)

ä»¥ä¸‹æ˜¯[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡çš„å®Œæ•´ç•Œé¢ã€‚

 *class*`sqlalchemy.orm.query.`{.descclassname}`Query`{.descname}(*entities*, *session=None*)[Â¶](#sqlalchemy.orm.query.Query "Permalink to this definition")
:   ORMçº§çš„SQLæ„é€ å¯¹è±¡ã€‚

    [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")
    is the source of all SELECT statements generated by the ORM, both
    those formulated by end-user query operations as well as by high
    level internal operations such as related collection loading.
    å®ƒå…·æœ‰ä¸€ä¸ªç”Ÿæˆæ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ï¼Œè¿ç»­è°ƒç”¨è¿”å›ä¸€ä¸ªæ–°çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡ï¼Œå‰è€…çš„å‰¯æœ¬å¸¦æœ‰ä¸å…¶ç›¸å…³çš„é™„åŠ æ¡ä»¶å’Œé€‰é¡¹ã€‚

    [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡é€šå¸¸æœ€åˆä½¿ç”¨[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")çš„[`query()`](session_api.html#sqlalchemy.orm.session.Session.query "sqlalchemy.orm.session.Session.query")æ–¹æ³•ç”Ÿæˆã€‚æœ‰å…³[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ç”¨æ³•çš„å®Œæ•´æ¼”ç»ƒï¼Œè¯·å‚é˜…[Object
    Relational Tutorial](tutorial.html)ã€‚

    ` add_column  T0> ï¼ˆ T1> åˆ— T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†åˆ—è¡¨è¾¾å¼æ·»åŠ åˆ°è¦è¿”å›çš„ç»“æœåˆ—è¡¨çš„åˆ—è¡¨ä¸­ã€‚

        ç­‰å¾…å¼ƒç”¨ï¼š[`add_column()`](#sqlalchemy.orm.query.Query.add_column "sqlalchemy.orm.query.Query.add_column")å°†è¢«[`add_columns()`](#sqlalchemy.orm.query.Query.add_columns "sqlalchemy.orm.query.Query.add_columns")å–ä»£ã€‚

    ` add_columns  T0> ï¼ˆ T1>  *æŸ± T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—è¡¨è¾¾å¼æ·»åŠ åˆ°è¦è¿”å›çš„ç»“æœåˆ—è¡¨çš„åˆ—è¡¨ä¸­ã€‚

    `add_entity`{.descname} ï¼ˆ *entity*ï¼Œ*alias = None* ï¼‰ [t5 \>](#sqlalchemy.orm.query.Query.add_entity "Permalink to this definition")
    :   å°†æ˜ å°„å®ä½“æ·»åŠ åˆ°è¦è¿”å›çš„ç»“æœåˆ—çš„åˆ—è¡¨ä¸­ã€‚

    `æ‰€æœ‰ T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   å°†`Query`è¡¨ç¤ºçš„ç»“æœä½œä¸ºåˆ—è¡¨è¿”å›ã€‚

        è¿™å¯¼è‡´åº•å±‚æŸ¥è¯¢çš„æ‰§è¡Œã€‚

    ` as_scalar  T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   è¿”å›ç”±æ­¤[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¡¨ç¤ºçš„å®Œæ•´SELECTè¯­å¥ï¼Œè½¬æ¢ä¸ºæ ‡é‡å­æŸ¥è¯¢ã€‚

        ç±»ä¼¼äº[`sqlalchemy.sql.expression.SelectBase.as_scalar()`](core_selectable.html#sqlalchemy.sql.expression.SelectBase.as_scalar "sqlalchemy.sql.expression.SelectBase.as_scalar")ã€‚

        ç‰ˆæœ¬0.6.5ä¸­çš„æ–°åŠŸèƒ½

    `è‡ªåŠ¨å†²æ´— T0> ï¼ˆ T1> è®¾ç½® T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   ä½¿ç”¨ç‰¹å®šçš„â€œè‡ªåŠ¨åˆ·æ–°â€è®¾ç½®è¿”å›æŸ¥è¯¢ã€‚

        è¯·æ³¨æ„ï¼Œå³ä½¿åœ¨æŸ¥è¯¢çº§åˆ«å°†æ­¤æ ‡å¿—è®¾ç½®ä¸ºTrueï¼Œå…·æœ‰autoflush =
        Falseçš„ä¼šè¯ä¹Ÿä¸ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚å› æ­¤æ­¤æ ‡å¿—é€šå¸¸ä»…ç”¨äºç¦ç”¨ç‰¹å®šæŸ¥è¯¢çš„è‡ªåŠ¨åˆ·æ–°ã€‚

    ` column_descriptions  T0> Â¶ T1>`{.descname}
    :   è¿”å›æœ‰å…³ç”±[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¿”å›çš„åˆ—çš„å…ƒæ•°æ®ã€‚

        æ ¼å¼æ˜¯è¯å…¸çš„åˆ—è¡¨ï¼š

            user_alias = aliased(User, name='user2')
            q = sess.query(User, User.id, user_alias)

            # this expression:
            q.column_descriptions

            # would return:
            [
                {
                    'name':'User',
                    'type':User,
                    'aliased':False,
                    'expr':User,
                    'entity': User
                },
                {
                    'name':'id',
                    'type':Integer(),
                    'aliased':False,
                    'expr':User.id,
                    'entity': User
                },
                {
                    'name':'user2',
                    'type':User,
                    'aliased':True,
                    'expr':user_alias,
                    'entity': user_alias
                }
            ]

    `å½’å±å…³ç³» T0> ï¼ˆ T1>  * ARGS  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ä¸€ä¸ª[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ç»“æ„ï¼Œå®ƒå°†ç»™å®šçš„FROMå­å¥ä¸ä¸€ä¸ªåŒ…å«[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")æˆ–[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")çš„å­å¥å…³è”èµ·æ¥ã€‚

        æ­¤å¤„çš„æ–¹æ³•æ¥å—æ˜ å°„ç±»ï¼Œ[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")æ„é€ å’Œ[`mapper()`](mapping_api.html#sqlalchemy.orm.mapper "sqlalchemy.orm.mapper")æ„é€ ä½œä¸ºå‚æ•°ï¼Œé™¤äº†é€‚å½“çš„è¡¨è¾¾å¼æ„é€ ä¹‹å¤–ï¼Œå®ƒä»¬è¢«è§£æä¸ºè¡¨è¾¾å¼æ„é€ ã€‚

        ç›¸å…³å‚æ•°åœ¨å¼ºåˆ¶è½¬æ¢ä¸ºè¡¨è¾¾å¼ç»“æ„åæœ€ç»ˆä¼ é€’ç»™[`Select.correlate()`](core_selectable.html#sqlalchemy.sql.expression.Select.correlate "sqlalchemy.sql.expression.Select.correlate")ã€‚

        åœ¨ä½¿ç”¨[`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")æ—¶ï¼Œæˆ–è€…å½“ç”±[`Query.subquery()`](#sqlalchemy.orm.query.Query.subquery "sqlalchemy.orm.query.Query.subquery")è¿”å›çš„å­æŸ¥è¯¢åµŒå…¥å¦ä¸€ä¸ª[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")æ„é€ ã€‚

    `è®¡æ•° T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   è¿”å›æ­¤Queryå°†è¿”å›çš„è¡Œæ•°ã€‚

        è¿™å°†ä¸ºæ­¤æŸ¥è¯¢ç”ŸæˆSQLï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

            SELECT count(1) AS count_1 FROM (
                SELECT <rest of query follows...>
            ) AS anon_1

        Changed in version 0.7: The above scheme is newly refined as of
        0.7b3.

        è¦ç»†åŒ–å¯¹ç‰¹å®šåˆ—è¿›è¡Œè®¡æ•°çš„æ§åˆ¶ï¼Œè¦è·³è¿‡å­æŸ¥è¯¢çš„ä½¿ç”¨æˆ–æ§åˆ¶FROMå­å¥æˆ–ä½¿ç”¨å…¶ä»–èšåˆå‡½æ•°ï¼Œè¯·å°†[`func`](core_sqlelement.html#sqlalchemy.sql.expression.func "sqlalchemy.sql.expression.func")è¡¨è¾¾å¼ä¸[`query()`](session_api.html#sqlalchemy.orm.session.Session.query "sqlalchemy.orm.session.Session.query")ï¼Œå³ï¼š

            from sqlalchemy import func

            # count User records, without
            # using a subquery.
            session.query(func.count(User.id))

            # return count of user "id" grouped
            # by "name"
            session.query(func.count(User.id)).\
                    group_by(User.name)

            from sqlalchemy import distinct

            # count distinct "name" values
            session.query(func.count(distinct(User.name)))

     `cte`{.descname}(*name=None*, *recursive=False*)[Â¶](#sqlalchemy.orm.query.Query.cte "Permalink to this definition")
    :   è¿”å›ç”±[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¡¨ç¤ºçš„å®Œæ•´SELECTè¯­å¥ï¼Œè¡¨ç¤ºä¸ºä¸€ä¸ªå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ˆCTEï¼‰ã€‚

        å‚æ•°å’Œç”¨æ³•ä¸`SelectBase.cte()`æ–¹æ³•çš„å‚æ•°å’Œç”¨æ³•ç›¸åŒï¼›è¯·å‚é˜…è¯¥æ–¹æ³•äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

        è¿™é‡Œæ˜¯[Postgresql WITH
        RECURSIVEç¤ºä¾‹](http://www.postgresql.org/docs/8.4/static/queries-with.html)ã€‚è¯·æ³¨æ„ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒçš„`included_parts` cteå’Œ`incl_alias`åˆ«åæ˜¯æ ¸å¿ƒå¯é€‰é¡¹ï¼Œè¿™æ„å‘³ç€é€šè¿‡`.c.`å±æ€§ã€‚`parts_alias`å¯¹è±¡æ˜¯`Part`å®ä½“çš„[`orm.aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")å®ä¾‹ï¼Œå› æ­¤åˆ—æ˜ å°„å±æ€§å¯ç›´æ¥ä½¿ç”¨ï¼š

            from sqlalchemy.orm import aliased

            class Part(Base):
                __tablename__ = 'part'
                part = Column(String, primary_key=True)
                sub_part = Column(String, primary_key=True)
                quantity = Column(Integer)

            included_parts = session.query(
                            Part.sub_part,
                            Part.part,
                            Part.quantity).\
                                filter(Part.part=="our part").\
                                cte(name="included_parts", recursive=True)

            incl_alias = aliased(included_parts, name="pr")
            parts_alias = aliased(Part, name="p")
            included_parts = included_parts.union_all(
                session.query(
                    parts_alias.sub_part,
                    parts_alias.part,
                    parts_alias.quantity).\
                        filter(parts_alias.part==incl_alias.c.sub_part)
                )

            q = session.query(
                    included_parts.c.sub_part,
                    func.sum(included_parts.c.quantity).
                        label('total_quantity')
                ).\
                group_by(included_parts.c.sub_part)

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`HasCTE.cte()`](core_selectable.html#sqlalchemy.sql.expression.HasCTE.cte "sqlalchemy.sql.expression.HasCTE.cte")

    `åˆ é™¤ T0> ï¼ˆ T1>  synchronize_session = 'è¯„ä»·' T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ‰§è¡Œæ‰¹é‡åˆ é™¤æŸ¥è¯¢ã€‚

        ä»æ•°æ®åº“ä¸­åˆ é™¤æ­¤æŸ¥è¯¢åŒ¹é…çš„è¡Œã€‚

        ä¾‹å¦‚ã€‚ï¼š

            sess.query(User).filter(User.age == 25).\
                delete(synchronize_session=False)

            sess.query(User).filter(User.age == 25).\
                delete(synchronize_session='evaluate')

        è­¦å‘Š

        [`Query.delete()`](#sqlalchemy.orm.query.Query.delete "sqlalchemy.orm.query.Query.delete")æ–¹æ³•æ˜¯ä¸€ç§â€œæ‰¹é‡â€æ“ä½œï¼Œå®ƒç»•è¿‡ORMå·¥ä½œå•å…ƒè‡ªåŠ¨åŒ–ï¼Œä»¥æé«˜æ€§èƒ½ã€‚**è¯·é˜…è¯»ä¸‹é¢çš„æ‰€æœ‰è­¦å‘Šå’Œè­¦å‘Šã€‚**

        å‚æ•°ï¼š

        **synchronize\_session**
        [Â¶](#sqlalchemy.orm.query.Query.delete.params.synchronize_session)
        -

        é€‰æ‹©ä»ä¼šè¯ä¸­åˆ é™¤åŒ¹é…å¯¹è±¡çš„ç­–ç•¥ã€‚æœ‰æ•ˆå€¼æ˜¯ï¼š

        `False` -
        ä¸è¦åŒæ­¥ä¼šè¯ã€‚ä¸€æ—¦ä¼šè¯è¿‡æœŸï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯æœ€é«˜æ•ˆå’Œå¯é çš„ï¼Œé€šå¸¸åœ¨commit()ä¹‹åå‘ç”Ÿï¼Œæˆ–è€…æ˜ç¡®åœ°ä½¿ç”¨expire\_all()ã€‚åœ¨åˆ°æœŸä¹‹å‰ï¼Œå¯¹è±¡å¯èƒ½ä»ç„¶ä¿ç•™åœ¨ä¼šè¯ä¸­ï¼Œäº‹å®ä¸Šè¿™äº›å¯¹è±¡è¢«åˆ é™¤ï¼Œå¦‚æœé€šè¿‡get()æˆ–å·²ç»åŠ è½½çš„é›†åˆè®¿é—®å®ƒä»¬ï¼Œä¼šå¯¼è‡´æ··æ·†ç»“æœã€‚

        `'fetch'` -
        åœ¨åˆ é™¤ä¹‹å‰æ‰§è¡Œé€‰æ‹©æŸ¥è¯¢ï¼Œä»¥æŸ¥æ‰¾ä¸åˆ é™¤æŸ¥è¯¢åŒ¹é…å¹¶éœ€è¦ä»ä¼šè¯ä¸­åˆ é™¤çš„å¯¹è±¡ã€‚åŒ¹é…çš„å¯¹è±¡ä»ä¼šè¯ä¸­åˆ é™¤ã€‚

        `'evaluate'` -
        ç›´æ¥åœ¨ä¼šè¯ä¸­çš„å¯¹è±¡ä¸­è¯„ä¼°Pythonä¸­çš„æŸ¥è¯¢æ¡ä»¶ã€‚å¦‚æœè¯„ä¼°æ ‡å‡†æœªå®æ–½ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯ã€‚

        è¡¨è¾¾å¼æ±‚å€¼ç¨‹åºç›®å‰æ²¡æœ‰è€ƒè™‘æ•°æ®åº“å’ŒPythonä¹‹é—´çš„ä¸åŒå­—ç¬¦ä¸²æ•´ç†ã€‚

        è¿”å›ï¼š

        æ•°æ®åº“çš„â€œè¡Œæ•°â€åŠŸèƒ½è¿”å›çš„è¡Œæ•°ç›¸åŒ¹é…ã€‚

        è­¦å‘Š

        **Additional Caveats for bulk query deletes**

        -   The method does **not** offer in-Python cascading of
            relationships - it is assumed that ON DELETE CASCADE/SET
            NULL/etc.
            é…ç½®ä¸ºéœ€è¦å®ƒçš„ä»»ä½•å¤–é”®å¼•ç”¨ï¼Œå¦åˆ™å¦‚æœå¤–é”®å¼•ç”¨è¢«å¼ºåˆ¶æ‰§è¡Œï¼Œæ•°æ®åº“å¯èƒ½ä¼šå‘å‡ºå®Œæ•´æ€§è¿è§„ã€‚

            åœ¨DELETEä¹‹åï¼Œå—åˆ°ON DELETEå½±å“çš„[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")ä¸­çš„ç›¸å…³å¯¹è±¡å¯èƒ½ä¸åŒ…å«å½“å‰çŠ¶æ€ï¼Œæˆ–å¯èƒ½å·²è¢«åˆ é™¤ã€‚ä¸€æ—¦[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")è¿‡æœŸï¼ˆé€šå¸¸å‘ç”Ÿåœ¨[`Session.commit()`](session_api.html#sqlalchemy.orm.session.Session.commit "sqlalchemy.orm.session.Session.commit")ï¼‰æˆ–è€…å¯ä»¥é€šè¿‡ä½¿ç”¨[`Session.expire_all()`](session_api.html#sqlalchemy.orm.session.Session.expire_all "sqlalchemy.orm.session.Session.expire_all")è®¿é—®è¡Œå·²è¢«åˆ é™¤çš„è¿‡æœŸå¯¹è±¡å°†è°ƒç”¨SELECTæ¥å®šä½è¡Œï¼›å½“æ‰¾ä¸åˆ°è¯¥è¡Œæ—¶ï¼Œä¼šå¼•å‘[`ObjectDeletedError`](exceptions.html#sqlalchemy.orm.exc.ObjectDeletedError "sqlalchemy.orm.exc.ObjectDeletedError")ã€‚

        -   `'fetch'`ç­–ç•¥ä¼šå¯¼è‡´å‘å‡ºé¢å¤–çš„SELECTè¯­å¥ï¼Œå¹¶ä¸”ä¼šæ˜¾ç€é™ä½æ€§èƒ½ã€‚

        -   The `'evaluate'` strategy performs a
            scan of all matching objects within the [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session");
            if the contents of the [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")
            are expired, such as via a proceeding
            [`Session.commit()`](session_api.html#sqlalchemy.orm.session.Session.commit "sqlalchemy.orm.session.Session.commit")
            call, **this will result in SELECT queries emitted for every
            matching object**.

        -   [`MapperEvents.before_delete()`](events.html#sqlalchemy.orm.events.MapperEvents.before_delete "sqlalchemy.orm.events.MapperEvents.before_delete")å’Œ[`MapperEvents.after_delete()`](events.html#sqlalchemy.orm.events.MapperEvents.after_delete "sqlalchemy.orm.events.MapperEvents.after_delete")äº‹ä»¶**ä¸ä¼šä»æ­¤æ–¹æ³•è°ƒç”¨**ã€‚ç›¸åï¼Œæä¾›äº†[`SessionEvents.after_bulk_delete()`](events.html#sqlalchemy.orm.events.SessionEvents.after_bulk_delete "sqlalchemy.orm.events.SessionEvents.after_bulk_delete")æ–¹æ³•æ¥å¤„ç†å®ä½“è¡Œçš„å¤§é‡DELETEæ“ä½œã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.update()`](#sqlalchemy.orm.query.Query.update "sqlalchemy.orm.query.Query.update")

        [Inserts, Updates and
        Deletes](core_tutorial.html#inserts-and-updates) - æ ¸å¿ƒSQLæ•™ç¨‹

    `ä¸åŒ T0> ï¼ˆ T1>  *æ ‡å‡† T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†`DISTINCT`åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„`Query`ã€‚

        æ³¨æ„

        [`distinct()`](internals.html#sqlalchemy.orm.interfaces.PropComparator.distinct "sqlalchemy.orm.interfaces.PropComparator.distinct")è°ƒç”¨åŒ…å«çš„é€»è¾‘å°†è‡ªåŠ¨å°†æŸ¥è¯¢çš„ORDER
        BYä¸­çš„åˆ—æ·»åŠ åˆ°SELECTè¯­å¥çš„columnså­å¥ä¸­ï¼Œä»¥æ»¡è¶³ORDER
        BYåˆ—æˆä¸ºéƒ¨åˆ†çš„æ•°æ®åº“åç«¯çš„é€šç”¨éœ€æ±‚å½“ä½¿ç”¨DISTINCTæ—¶ï¼ŒSELECTåˆ—è¡¨çš„åˆ—è¡¨ã€‚ç„¶è€Œï¼Œè¿™äº›åˆ—*ä¸ä¼šè¢«*æ·»åŠ åˆ°ç”±[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å®é™…è·å–çš„åˆ—åˆ—è¡¨ä¸­ï¼Œå› æ­¤ä¸ä¼šå½±å“ç»“æœã€‚ä½†æ˜¯ï¼Œä½¿ç”¨[`Query.statement`](#sqlalchemy.orm.query.Query.statement "sqlalchemy.orm.query.Query.statement")è®¿é—®å™¨æ—¶ï¼Œåˆ—ä¼šé€šè¿‡ã€‚

        å‚æ•°ï¼š

        **\* expr**
        [Â¶](#sqlalchemy.orm.query.Query.distinct.params.*expr) -
        å¯é€‰çš„åˆ—è¡¨è¾¾å¼ã€‚å½“å­˜åœ¨æ—¶ï¼ŒPostgresqlæ–¹è¨€å°†å‘ˆç°`DISTINCT ON ï¼ˆï¼†ltï¼›è¡¨è¾¾å¼ï¼†gtï¼›ï¼‰`ç»“æ„ã€‚

    ` enable_assertions  T0> ï¼ˆ T1> å€¼ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ§åˆ¶æ˜¯å¦ç”Ÿæˆæ–­è¨€ã€‚

        å½“è®¾ç½®ä¸ºFalseæ—¶ï¼Œè¿”å›çš„Queryå°†ä¸ä¼šåœ¨æŸäº›æ“ä½œä¹‹å‰å£°æ˜å…¶çŠ¶æ€ï¼ŒåŒ…æ‹¬åœ¨è°ƒç”¨filter()æ—¶æœªåº”ç”¨LIMIT
        /
        OFFSETï¼Œè°ƒç”¨get()æ—¶ä¸å­˜åœ¨æ¡ä»¶ï¼Œå¹¶ä¸”æ²¡æœ‰â€œfrom\_statement()â€å½“filter()/
        order\_by()/
        group\_by()ç­‰å­˜åœ¨æ—¶å«åšã€‚è‡ªå®šä¹‰æŸ¥è¯¢å­ç±»ä½¿ç”¨è¿™ç§æ›´å®½æ¾çš„æ¨¡å¼æ¥æŒ‡å®šå¸¸è§„ä½¿ç”¨æ¨¡å¼ä¹‹å¤–çš„æ¡ä»¶æˆ–å…¶ä»–ä¿®é¥°ç¬¦ã€‚

        åº”è¯¥æ³¨æ„ç¡®ä¿ä½¿ç”¨æ¨¡å¼æ˜¯å¯èƒ½çš„ã€‚ä¾‹å¦‚ï¼Œç”±from\_statement()åº”ç”¨çš„è¯­å¥å°†è¦†ç›–ç”±filter()æˆ–order\_by()è®¾ç½®çš„ä»»ä½•æ¡ä»¶ã€‚

    ` enable_eagerloads  T0> ï¼ˆ T1> å€¼ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ§åˆ¶æ˜¯å¦å‘ˆç°æ€¥åˆ‡è”æ¥å’Œå­æŸ¥è¯¢ã€‚

        When set to False, the returned Query will not render eager
        joins regardless of [`joinedload()`](loading_relationships.html#sqlalchemy.orm.joinedload "sqlalchemy.orm.joinedload"),
        [`subqueryload()`](loading_relationships.html#sqlalchemy.orm.subqueryload "sqlalchemy.orm.subqueryload")
        options or mapper-level `lazy='joined'`/`lazy='subquery'` configurations.

        è¿™ä¸»è¦ç”¨äºå°†Queryè¯­å¥åµŒå¥—åˆ°å­æŸ¥è¯¢æˆ–å…¶ä»–å¯é€‰é¡¹ä¸­ï¼Œæˆ–è€…åœ¨ä½¿ç”¨[`Query.yield_per()`](#sqlalchemy.orm.query.Query.yield_per "sqlalchemy.orm.query.Query.yield_per")æ—¶ä½¿ç”¨ã€‚

    `é™¤äº†_  T0> ï¼ˆ T1>  * Q  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   é’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢ç”Ÿæˆæ­¤æŸ¥è¯¢çš„EXCEPTã€‚

        ä¸[`union()`](#sqlalchemy.orm.query.Query.union "sqlalchemy.orm.query.Query.union")çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚æŸ¥çœ‹ä½¿ç”¨ç¤ºä¾‹çš„æ–¹æ³•ã€‚

    ` except_all  T0> ï¼ˆ T1>  * Q  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   é’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢ç”Ÿæˆä¸€ä¸ªEXCEPT ALLæŸ¥è¯¢ã€‚

        ä¸[`union()`](#sqlalchemy.orm.query.Query.union "sqlalchemy.orm.query.Query.union")çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚æŸ¥çœ‹ä½¿ç”¨ç¤ºä¾‹çš„æ–¹æ³•ã€‚

    ` execution_options  T0> ï¼ˆ T1>  ** kwargs  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è®¾ç½®åœ¨æ‰§è¡ŒæœŸé—´ç”Ÿæ•ˆçš„éSQLé€‰é¡¹ã€‚

        è¿™äº›é€‰é¡¹ä¸[`Connection.execution_options()`](core_connections.html#sqlalchemy.engine.Connection.execution_options "sqlalchemy.engine.Connection.execution_options")æ¥å—çš„é€‰é¡¹ç›¸åŒã€‚

        è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨[`yield_per()`](#sqlalchemy.orm.query.Query.yield_per "sqlalchemy.orm.query.Query.yield_per")æ–¹æ³•ï¼Œåˆ™ä¼šè‡ªåŠ¨å¯ç”¨`stream_results`æ‰§è¡Œé€‰é¡¹ã€‚

    `å­˜åœ¨ T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   å°†æŸ¥è¯¢è½¬æ¢ä¸ºEXISTSï¼ˆSELECT 1 FROM ... WHERE
        ...ï¼‰å½¢å¼çš„EXISTSå­æŸ¥è¯¢çš„ä¾¿æ·æ–¹æ³•ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            q = session.query(User).filter(User.name == 'fred')
            session.query(q.exists())

        ç”ŸæˆSQLç±»ä¼¼äºï¼š

            SELECT EXISTS (
                SELECT 1 FROM users WHERE users.name = :name_1
            ) AS anon_1

        EXISTSç»“æ„é€šå¸¸ç”¨åœ¨WHEREå­å¥ä¸­ï¼š

            session.query(User.id).filter(q.exists()).scalar()

        è¯·æ³¨æ„ï¼ŒæŸäº›æ•°æ®åº“ï¼ˆå¦‚SQL
        Serverï¼‰ä¸å…è®¸EXISTSè¡¨è¾¾å¼å­˜åœ¨äºSELECTçš„columnså­å¥ä¸­ã€‚è¦æ ¹æ®existsçš„WHEREé€‰æ‹©ä¸€ä¸ªç®€å•çš„å¸ƒå°”å€¼ï¼Œå¯ä»¥ä½¿ç”¨[`literal()`](core_sqlelement.html#sqlalchemy.sql.expression.literal "sqlalchemy.sql.expression.literal")ï¼š

            from sqlalchemy import literal

            session.query(literal(True)).filter(q.exists()).scalar()

        0.8.1ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½

    `è¿‡æ»¤ T0> ï¼ˆ T1>  *æ ‡å‡† T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   ä½¿ç”¨SQLè¡¨è¾¾å¼å°†ç»™å®šçš„è¿‡æ»¤æ ‡å‡†åº”ç”¨äºæ­¤[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„å‰¯æœ¬ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            session.query(MyClass).filter(MyClass.name == 'some name')

        å¤šä¸ªæ ‡å‡†å¯ä»¥æŒ‡å®šä¸ºé€—å·åˆ†éš”ï¼›æ•ˆæœæ˜¯å®ƒä»¬å°†ä½¿ç”¨[`and_()`](core_sqlelement.html#sqlalchemy.sql.expression.and_ "sqlalchemy.sql.expression.and_")å‡½æ•°è¿æ¥åœ¨ä¸€èµ·ï¼š

            session.query(MyClass).\
                filter(MyClass.name == 'some name', MyClass.id > 5)

        æ¡ä»¶æ˜¯é€‚ç”¨äºselectçš„WHEREå­å¥çš„ä»»ä½•SQLè¡¨è¾¾å¼å¯¹è±¡ã€‚é€šè¿‡[`text()`](core_sqlelement.html#sqlalchemy.sql.expression.text "sqlalchemy.sql.expression.text")ç»“æ„å°†å­—ç¬¦ä¸²è¡¨è¾¾å¼å¼ºåˆ¶è½¬æ¢ä¸ºSQLè¡¨è¾¾å¼ç»“æ„ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.filter_by()`](#sqlalchemy.orm.query.Query.filter_by "sqlalchemy.orm.query.Query.filter_by")
        - å¯¹å…³é”®å­—è¡¨è¾¾å¼è¿›è¡Œè¿‡æ»¤ã€‚

    ` filter_by  T0> ï¼ˆ T1>  ** kwargs  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   ä½¿ç”¨å…³é”®å­—è¡¨è¾¾å¼å°†ç»™å®šçš„è¿‡æ»¤æ ‡å‡†åº”ç”¨äºæ­¤[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„å‰¯æœ¬ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            session.query(MyClass).filter_by(name = 'some name')

        å¤šä¸ªæ ‡å‡†å¯ä»¥æŒ‡å®šä¸ºé€—å·åˆ†éš”ï¼›æ•ˆæœæ˜¯å®ƒä»¬å°†ä½¿ç”¨[`and_()`](core_sqlelement.html#sqlalchemy.sql.expression.and_ "sqlalchemy.sql.expression.and_")å‡½æ•°è¿æ¥åœ¨ä¸€èµ·ï¼š

            session.query(MyClass).\
                filter_by(name = 'some name', id = 5)

        å…³é”®å­—è¡¨è¾¾å¼æ˜¯ä»æŸ¥è¯¢çš„ä¸»è¦å®ä½“æˆ–æœ€åä¸€ä¸ªè°ƒç”¨[`Query.join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„ç›®æ ‡å®ä½“æå–çš„ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.filter()`](#sqlalchemy.orm.query.Query.filter "sqlalchemy.orm.query.Query.filter")
        - è¿‡æ»¤SQLè¡¨è¾¾å¼ã€‚

    `ç¬¬ä¸€ T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   å¦‚æœç»“æœä¸åŒ…å«ä»»ä½•è¡Œï¼Œåˆ™è¿”å›æ­¤`Query`çš„ç¬¬ä¸€ä¸ªç»“æœæˆ–Noneã€‚

        first()åœ¨ç”Ÿæˆçš„SQLä¸­åº”ç”¨ä¸€ä¸ªé™åˆ¶ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨ç«¯ä»…ç”Ÿæˆä¸€ä¸ªä¸»è¦å®ä½“è¡Œï¼ˆæ³¨æ„ï¼Œå¦‚æœå­˜åœ¨è¿æ¥åŠ è½½çš„é›†åˆï¼Œåˆ™è¿™å¯èƒ½åŒ…å«å¤šä¸ªç»“æœè¡Œï¼‰ã€‚

        è°ƒç”¨[`Query.first()`](#sqlalchemy.orm.query.Query.first "sqlalchemy.orm.query.Query.first")ä¼šå¯¼è‡´æ‰§è¡ŒåŸºç¡€æŸ¥è¯¢ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.one()`](#sqlalchemy.orm.query.Query.one "sqlalchemy.orm.query.Query.one")

        [`Query.one_or_none()`](#sqlalchemy.orm.query.Query.one_or_none "sqlalchemy.orm.query.Query.one_or_none")

    ` from_self  T0> ï¼ˆ T1>  *å®ä½“ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ä»æ­¤æŸ¥è¯¢çš„SELECTè¯­å¥ä¸­é€‰æ‹©çš„Queryã€‚

        [`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")
        essentially turns the SELECT statement into a SELECT of itself.
        ç»™å®šä¸€ä¸ªæŸ¥è¯¢ï¼Œå¦‚ï¼š

            q = session.query(User).filter(User.name.like('e%'))

        ç»™å®š[`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")ç‰ˆæœ¬ï¼š

            q = session.query(User).filter(User.name.like('e%')).from_self()

        æ­¤æŸ¥è¯¢å‘ˆç°ä¸ºï¼š

            SELECT anon_1.user_id AS anon_1_user_id,
                   anon_1.user_name AS anon_1_user_name
            FROM (SELECT "user".id AS user_id, "user".name AS user_name
            FROM "user"
            WHERE "user".name LIKE :name_1) AS anon_1

        æœ‰å¾ˆå¤šæƒ…å†µä¸‹ï¼Œ[`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")å¯èƒ½ä¼šæœ‰ç”¨ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†ä¸€è¡ŒLIMITåº”ç”¨åˆ°æˆ‘ä»¬æŸ¥è¯¢çš„ç”¨æˆ·å¯¹è±¡é›†åˆï¼Œç„¶åå¯¹è¯¥è¡Œæœ‰é™é›†åˆåº”ç”¨å…¶ä»–è¿æ¥ï¼š

            q = session.query(User).filter(User.name.like('e%')).\
                limit(5).from_self().\
                join(User.addresses).filter(Address.email.like('q%'))

        ä¸Šè¿°æŸ¥è¯¢è¿æ¥åˆ°`Address`å®ä½“ï¼Œä½†ä»…é’ˆå¯¹`User`æŸ¥è¯¢çš„å‰äº”ä¸ªç»“æœï¼š

            SELECT anon_1.user_id AS anon_1_user_id,
                   anon_1.user_name AS anon_1_user_name
            FROM (SELECT "user".id AS user_id, "user".name AS user_name
            FROM "user"
            WHERE "user".name LIKE :name_1
             LIMIT :param_1) AS anon_1
            JOIN address ON anon_1.user_id = address.user_id
            WHERE address.email LIKE :email_1

        **è‡ªåŠ¨åˆ«å**

        [`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")çš„å¦ä¸€ä¸ªå…³é”®è¡Œä¸ºæ˜¯ï¼Œå½“å­æŸ¥è¯¢å†…éƒ¨çš„å®ä½“åœ¨å¤–éƒ¨å¼•ç”¨æ—¶ï¼Œå®ƒå°†**è‡ªåŠ¨åˆ«å**åº”ç”¨åˆ°å­æŸ¥è¯¢ä¸­çš„å®ä½“ã€‚åœ¨ä¸Šé¢ï¼Œå¦‚æœæˆ‘ä»¬ç»§ç»­å¼•ç”¨`User`å®ä½“è€Œæ²¡æœ‰åº”ç”¨ä»»ä½•é¢å¤–çš„åˆ«åï¼Œé‚£ä¹ˆè¿™äº›å¼•ç”¨å°†ä»¥å­æŸ¥è¯¢çš„å½¢å¼è¡¨ç¤ºï¼š

            q = session.query(User).filter(User.name.like('e%')).\
                limit(5).from_self().\
                join(User.addresses).filter(Address.email.like('q%')).\
                order_by(User.name)

        é’ˆå¯¹`User.name`çš„ORDER
        BYè¢«åˆ«åä¸ºå†…éƒ¨å­æŸ¥è¯¢ï¼š

            SELECT anon_1.user_id AS anon_1_user_id,
                   anon_1.user_name AS anon_1_user_name
            FROM (SELECT "user".id AS user_id, "user".name AS user_name
            FROM "user"
            WHERE "user".name LIKE :name_1
             LIMIT :param_1) AS anon_1
            JOIN address ON anon_1.user_id = address.user_id
            WHERE address.email LIKE :email_1 ORDER BY anon_1.user_name

        å¯¹äºç®€å•çš„è¿‡æ»¤å™¨å’Œæ’åºï¼Œè‡ªåŠ¨åˆ«ååŠŸèƒ½åªèƒ½ä»¥**é™åˆ¶**æ–¹å¼å·¥ä½œã€‚æ¯”è¾ƒå¼•äººæ³¨ç›®çš„æ„é€ ï¼Œä¾‹å¦‚å¼•ç”¨è¿æ¥ä¸­çš„å®ä½“ï¼Œåº”è¯¥æ›´å–œæ¬¢ä½¿ç”¨æ˜ç¡®çš„å­æŸ¥è¯¢å¯¹è±¡ï¼Œé€šå¸¸ä½¿ç”¨[`Query.subquery()`](#sqlalchemy.orm.query.Query.subquery "sqlalchemy.orm.query.Query.subquery")æ–¹æ³•ç”Ÿæˆæ˜¾å¼çš„å­æŸ¥è¯¢å¯¹è±¡ã€‚æ€»æ˜¯é€šè¿‡æŸ¥çœ‹SQLæ¥æµ‹è¯•æŸ¥è¯¢çš„ç»“æ„ï¼Œä»¥ç¡®ä¿ç‰¹å®šçš„ç»“æ„ç¬¦åˆé¢„æœŸï¼

        **æ›´æ”¹å®ä½“**

        [`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")
        also includes the ability to modify what columns are being
        queried.
        åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡å†…éƒ¨æŸ¥è¯¢æ¥æŸ¥è¯¢`User.id`ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¿æ¥åˆ°å¤–éƒ¨çš„`Address`å®ä½“ï¼Œä½†æˆ‘ä»¬åªéœ€è¦å¤–éƒ¨æŸ¥è¯¢è¿”å›`Address.email`åˆ—ï¼š

            q = session.query(User).filter(User.name.like('e%')).\
                limit(5).from_self(Address.email).\
                join(User.addresses).filter(Address.email.like('q%'))

        æ”¶ç›Šï¼š

            SELECT address.email AS address_email
            FROM (SELECT "user".id AS user_id, "user".name AS user_name
            FROM "user"
            WHERE "user".name LIKE :name_1
             LIMIT :param_1) AS anon_1
            JOIN address ON anon_1.user_id = address.user_id
            WHERE address.email LIKE :email_1

        **å¯»æ‰¾å†…éƒ¨/å¤–éƒ¨åˆ—**

        è¯·è®°ä½ï¼Œå½“å¼•ç”¨æºè‡ªå­æŸ¥è¯¢å†…éƒ¨çš„åˆ—æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å®ƒä»¬å­˜åœ¨äºå­æŸ¥è¯¢æœ¬èº«çš„åˆ—å­å¥ä¸­ï¼›è¿™æ˜¯SQLçš„ä¸€ä¸ªæ™®é€šæ–¹é¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨[`contains_eager()`](loading_relationships.html#sqlalchemy.orm.contains_eager "sqlalchemy.orm.contains_eager")ä»å­æŸ¥è¯¢ä¸­çš„è¿æ¥å®ä½“åŠ è½½ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ è¿™äº›åˆ—ã€‚ä¸‹é¢ä¸¾ä¾‹è¯´æ˜`Address`åˆ°`User`çš„è¿æ¥ï¼Œç„¶åæ˜¯å­æŸ¥è¯¢ï¼Œç„¶åæˆ‘ä»¬å¸Œæœ›[`contains_eager()`](loading_relationships.html#sqlalchemy.orm.contains_eager "sqlalchemy.orm.contains_eager")è®¿é—®`User`åˆ—ï¼š

            q = session.query(Address).join(Address.user).\
                filter(User.name.like('e%'))

            q = q.add_entity(User).from_self().\
                options(contains_eager(Address.user))

        We use [`Query.add_entity()`](#sqlalchemy.orm.query.Query.add_entity "sqlalchemy.orm.query.Query.add_entity")
        above **before** we call [`Query.from_self()`](#sqlalchemy.orm.query.Query.from_self "sqlalchemy.orm.query.Query.from_self")
        so that the `User` columns are present in
        the inner subquery, so that they are available to the
        [`contains_eager()`](loading_relationships.html#sqlalchemy.orm.contains_eager "sqlalchemy.orm.contains_eager")
        modifier we are using on the outside, producing:

            SELECT anon_1.address_id AS anon_1_address_id,
                   anon_1.address_email AS anon_1_address_email,
                   anon_1.address_user_id AS anon_1_address_user_id,
                   anon_1.user_id AS anon_1_user_id,
                   anon_1.user_name AS anon_1_user_name
            FROM (
                SELECT address.id AS address_id,
                address.email AS address_email,
                address.user_id AS address_user_id,
                "user".id AS user_id,
                "user".name AS user_name
            FROM address JOIN "user" ON "user".id = address.user_id
            WHERE "user".name LIKE :name_1) AS anon_1

        If we didnâ€™t call `add_entity(User)`, but
        still asked [`contains_eager()`](loading_relationships.html#sqlalchemy.orm.contains_eager "sqlalchemy.orm.contains_eager")
        to load the `User` entity, it would be
        forced to add the table on the outside without the correct join
        criteria - note the `anon1, "user"` phrase
        at the end:

            -- incorrect query
            SELECT anon_1.address_id AS anon_1_address_id,
                   anon_1.address_email AS anon_1_address_email,
                   anon_1.address_user_id AS anon_1_address_user_id,
                   "user".id AS user_id,
                   "user".name AS user_name
            FROM (
                SELECT address.id AS address_id,
                address.email AS address_email,
                address.user_id AS address_user_id
            FROM address JOIN "user" ON "user".id = address.user_id
            WHERE "user".name LIKE :name_1) AS anon_1, "user"

        å‚æ•°ï¼š

        **\*entities**[Â¶](#sqlalchemy.orm.query.Query.from_self.params.*entities)
        â€“ optional list of entities which will replace those being
        selected.

    ` from_statement  T0> ï¼ˆ T1> è¯­å¥ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ‰§è¡Œç»™å®šçš„SELECTè¯­å¥å¹¶è¿”å›ç»“æœã€‚

        æ­¤æ–¹æ³•ç»•è¿‡æ‰€æœ‰å†…éƒ¨è¯­å¥ç¼–è¯‘ï¼Œå¹¶ä¸”è¯­å¥ä¸åŠ ä¿®æ”¹åœ°æ‰§è¡Œã€‚

        è¯¥è¯­å¥é€šå¸¸æ˜¯ä¸€ä¸ª[`text()`](core_sqlelement.html#sqlalchemy.sql.expression.text "sqlalchemy.sql.expression.text")æˆ–[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")ç»“æ„ï¼Œå¹¶ä¸”åº”è¿”å›é€‚åˆè¯¥[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [Using Textual SQL](tutorial.html#orm-tutorial-literal-sql) -
        ORMæ•™ç¨‹ä¸­çš„ä½¿ç”¨ç¤ºä¾‹

    `è·å¾— T0> ï¼ˆ T1>  IDENT  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   åŸºäºç»™å®šçš„ä¸»é”®æ ‡è¯†ç¬¦è¿”å›å®ä¾‹ï¼Œå¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å›`None`ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            my_user = session.query(User).get(5)

            some_object = session.query(VersionedFoo).get((5, 10))

        [`get()`](#sqlalchemy.orm.query.Query.get "sqlalchemy.orm.query.Query.get")
        is special in that it provides direct access to the identity map
        of the owning [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session").
        å¦‚æœç»™å®šä¸»é”®æ ‡è¯†ç¬¦å­˜åœ¨äºæœ¬åœ°æ ‡è¯†æ˜ å°„ä¸­ï¼Œåˆ™ç›´æ¥ä»è¯¥é›†åˆè¿”å›å¯¹è±¡ï¼Œå¹¶ä¸”ä¸ä¼šå‘å‡ºSQLï¼Œé™¤éè¯¥å¯¹è±¡å·²æ ‡è®°ä¸ºå®Œå…¨è¿‡æœŸã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡ŒSELECTä»¥æŸ¥æ‰¾å¯¹è±¡ã€‚

        [`get()`](#sqlalchemy.orm.query.Query.get "sqlalchemy.orm.query.Query.get")
        also will perform a check if the object is present in the
        identity map and marked as expired - a SELECT is emitted to
        refresh the object as well as to ensure that the row is still
        present. å¦‚æœä¸æ˜¯ï¼Œåˆ™å¼•å‘[`ObjectDeletedError`](exceptions.html#sqlalchemy.orm.exc.ObjectDeletedError "sqlalchemy.orm.exc.ObjectDeletedError")ã€‚

        [`get()`](#sqlalchemy.orm.query.Query.get "sqlalchemy.orm.query.Query.get")
        is only used to return a single mapped instance, not multiple
        instances or individual column constructs, and strictly on a
        single primary key value. å¿…é¡»ä»¥è¿™ç§æ–¹å¼æ„å»ºå§‹å‘çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ï¼Œå³é’ˆå¯¹å•ä¸ªæ˜ å°„çš„å®ä½“ï¼Œè€Œä¸éœ€è¦é™„åŠ çš„è¿‡æ»¤æ ‡å‡†ã€‚é€šè¿‡[`options()`](#sqlalchemy.orm.query.Query.options "sqlalchemy.orm.query.Query.options")åŠ è½½é€‰é¡¹å¯èƒ½ä¼šè¢«åº”ç”¨ï¼Œä½†æ˜¯å¦‚æœå¯¹è±¡å°šæœªæœ¬åœ°å­˜åœ¨ï¼Œå°†ä¼šè¢«ä½¿ç”¨ã€‚

        ä½¿ç”¨ç®€å•çš„å¤–é”®åˆ°ä¸»é”®æ ‡å‡†ï¼Œç”±[`relationship()`](relationship_api.html#sqlalchemy.orm.relationship "sqlalchemy.orm.relationship")é…ç½®çš„å»¶è¿ŸåŠ è½½å¤šå¯¹ä¸€å±æ€§ä¹Ÿå°†ä½¿ç”¨ä¸[`get()`](#sqlalchemy.orm.query.Query.get "sqlalchemy.orm.query.Query.get")ï¼Œä»¥ä¾¿åœ¨æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰ä»æœ¬åœ°æ ‡è¯†æ˜ å°„ä¸­æ£€ç´¢ç›®æ ‡å€¼ã€‚æœ‰å…³å…³ç³»åŠ è½½çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[*Relationship
        Loading Techniques*](loading_relationships.html)ã€‚

        å‚æ•°ï¼š

        **ident**[Â¶](#sqlalchemy.orm.query.Query.get.params.ident) â€“ A
        scalar or tuple value representing the primary key.
        å¯¹äºç»„åˆä¸»é”®ï¼Œæ ‡è¯†ç¬¦çš„é¡ºåºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸æ˜ å°„çš„[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")å¯¹è±¡çš„ä¸»é”®åˆ—ç›¸å¯¹åº”ã€‚For
        a [`mapper()`](mapping_api.html#sqlalchemy.orm.mapper "sqlalchemy.orm.mapper")
        that was given the `primary key` argument
        during construction, the order of identifiers corresponds to the
        elements present in this collection.

        è¿”å›ï¼š

        å¯¹è±¡å®ä¾‹ï¼Œæˆ–`None`ã€‚

    ` GROUP_BY  T0> ï¼ˆ T1>  *æ ‡å‡† T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†ä¸€ä¸ªæˆ–å¤šä¸ªGROUP BYæ ‡å‡†åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")

    `å…·æœ‰ T0> ï¼ˆ T1> æ ‡å‡† T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†HAVINGæ¡ä»¶åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ã€‚

        [`having()`](#sqlalchemy.orm.query.Query.having "sqlalchemy.orm.query.Query.having")
        is used in conjunction with [`group_by()`](#sqlalchemy.orm.query.Query.group_by "sqlalchemy.orm.query.Query.group_by").

        HAVINGæ ‡å‡†å¯ä»¥åœ¨COUNTï¼ŒSUMï¼ŒAVGï¼ŒMAXå’ŒMINç­‰é›†åˆå‡½æ•°ä¸Šä½¿ç”¨è¿‡æ»¤å™¨ï¼Œä¾‹å¦‚ã€‚:

            q = session.query(User.id).\
                        join(User.addresses).\
                        group_by(User.id).\
                        having(func.count(Address.id) > 2)

    `å®ä¾‹`{.descname} ï¼ˆ *æ¸¸æ ‡*ï¼Œ*\_Query\_\_context =æ— * ï¼‰ [t5 \>](#sqlalchemy.orm.query.Query.instances "Permalink to this definition")
    :   ç»™å®šç”±connection.execute()è¿”å›çš„ResultProxyæ¸¸æ ‡ï¼Œè¿”å›ä¸€ä¸ªORMç»“æœä½œä¸ºè¿­ä»£å™¨ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            result = engine.execute("select * from users")
            for u in session.query(User).instances(result):
                print u

    `ç›¸äº¤ T0> ï¼ˆ T1>  * Q  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢ç”Ÿæˆæ­¤æŸ¥è¯¢çš„INTERSECTã€‚

        ä¸[`union()`](#sqlalchemy.orm.query.Query.union "sqlalchemy.orm.query.Query.union")çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚æŸ¥çœ‹ä½¿ç”¨ç¤ºä¾‹çš„æ–¹æ³•ã€‚

    ` intersect_all  T0> ï¼ˆ T1>  * Q  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   é’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢ç”Ÿæˆæ­¤æŸ¥è¯¢çš„INTERSECT ALLã€‚

        ä¸[`union()`](#sqlalchemy.orm.query.Query.union "sqlalchemy.orm.query.Query.union")çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚æŸ¥çœ‹ä½¿ç”¨ç¤ºä¾‹çš„æ–¹æ³•ã€‚

    `join  tt> ï¼ˆ * propsï¼Œ** kwargs ï¼‰ T5>`{.descname}
    :   æ ¹æ®[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡çš„æ ‡å‡†åˆ›å»ºSQL
        JOINå¹¶ç”Ÿæˆåº”ç”¨ï¼Œè¿”å›æœ€æ–°ç”Ÿæˆçš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ã€‚

        **ç®€å•çš„å…³ç³»åŠ å…¥**

        è€ƒè™‘ä¸¤ä¸ªç±»`User`å’Œ`Address`ä¹‹é—´çš„æ˜ å°„ï¼Œå…¶ä¸­`User.addresses`è¡¨ç¤º`Address`å¯¹è±¡çš„é›†åˆä¸æ¯ä¸ª`User`å…³è”ã€‚[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„æœ€å¸¸è§ç”¨æ³•æ˜¯ä½¿ç”¨`User.addresses`å±æ€§ä½œä¸ºè¿™ç§æƒ…å†µå‘ç”Ÿçš„æŒ‡ç¤ºç¬¦ï¼Œä»¥æ­¤å…³ç³»åˆ›å»ºJOINï¼š

            q = session.query(User).join(User.addresses)

        åœ¨ä¸Šé¢ï¼Œæ²¿ç€`User.addresses`è°ƒç”¨[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")å°†å¯¼è‡´SQLç­‰åŒäºï¼š

            SELECT user.* FROM user JOIN address ON user.id = address.user_id

        åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†`User.addresses`ä½œä¸º*onå­å¥*ä¼ é€’ç»™[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ
        ONâ€œéƒ¨åˆ†çš„JOINåº”è¯¥è¢«æ„å»ºã€‚å¯¹äºåƒä¸Šé¢é‚£æ ·çš„å•ä¸€å®ä½“æŸ¥è¯¢ï¼ˆå³ï¼Œæˆ‘ä»¬åªä»`User`å¼€å§‹ï¼Œè€Œæ²¡æœ‰å…¶ä»–é€‰æ‹©ï¼‰ï¼Œå…³ç³»ä¹Ÿå¯ä»¥ç”¨å­—ç¬¦ä¸²åç§°æ¥æŒ‡å®šï¼š

            q = session.query(User).join("addresses")

        [`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")ä¹Ÿå¯ä»¥å®¹çº³å¤šä¸ªâ€œonå­å¥â€å‚æ•°æ¥äº§ç”Ÿè¿æ¥é“¾ï¼Œä¾‹å¦‚åœ¨ä¸‹é¢æ„å»ºè·¨å››ä¸ªç›¸å…³å®ä½“çš„è¿æ¥ï¼š

            q = session.query(User).join("orders", "items", "keywords")

        ä¸Šè¿°å†…å®¹å¯ä»¥ç®€çŸ­åœ°æè¿°ä¸‰æ¬¡å¯¹[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„å•ç‹¬è°ƒç”¨ï¼Œæ¯ä¸ªè°ƒç”¨éƒ½ä½¿ç”¨æ˜¾å¼å±æ€§æ¥æŒ‡ç¤ºæºå®ä½“ï¼š

            q = session.query(User).\
                    join(User.orders).\
                    join(Order.items).\
                    join(Item.keywords)

        **åŠ å…¥ç›®æ ‡å®ä½“æˆ–å¯é€‰**

        ç¬¬äºŒç§å½¢å¼çš„[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")å…è®¸ä»»ä½•æ˜ å°„å®ä½“æˆ–æ ¸å¿ƒå¯é€‰ç»“æ„ä½œä¸ºç›®æ ‡ã€‚åœ¨è¿™ç§ç”¨æ³•ä¸­ï¼Œ[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")å°†å°è¯•æ²¿ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„è‡ªç„¶å¤–é”®å…³ç³»åˆ›å»ºJOINï¼š

            q = session.query(User).join(Address)

        å¦‚æœä¸¤ä¸ªå®ä½“ä¹‹é—´æ²¡æœ‰å¤–é”®ï¼Œæˆ–è€…å®ƒä»¬ä¹‹é—´æœ‰å¤šä¸ªå¤–é”®é“¾æ¥ï¼Œ[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„ä¸Šè¿°è°ƒç”¨å½¢å¼å°†å¼•å‘é”™è¯¯ã€‚åœ¨ä¸Šé¢çš„è°ƒç”¨å½¢å¼ä¸­ï¼Œ[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")è¢«è°ƒç”¨æ¥ä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºâ€œonå­å¥â€ã€‚ç›®æ ‡å¯ä»¥æ˜¯ä»»ä½•æ˜ å°„å®ä½“æˆ–å¯é€‰ï¼Œå¦‚[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")ï¼š

            q = session.query(User).join(addresses_table)

        **ä½¿ç”¨ONå­å¥**åŠ å…¥ç›®æ ‡

        ç¬¬ä¸‰ä¸ªè°ƒç”¨å½¢å¼å…è®¸æ˜ç¡®ä¼ é€’ç›®æ ‡å®ä½“ä»¥åŠONå­å¥ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦åŠ å…¥`Address`ä¸¤æ¬¡ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨åˆ«åã€‚æˆ‘ä»¬ä½¿ç”¨[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")åˆ›å»º`Address`çš„ä¸åŒåˆ«åï¼Œå¹¶ä½¿ç”¨`ç›®æ ‡ï¼Œ / t7>`è¡¨å•ï¼Œä»¥ä¾¿å¯ä»¥å°†è¯¥åˆ«åä¸å…³ç³»ä¸€èµ·æ˜¾å¼æŒ‡å®šä¸ºç›®æ ‡ï¼Œä»¥æŒ‡ç¤ºONå­å¥åº”å¦‚ä½•ç»§ç»­ï¼š

            a_alias = aliased(Address)

            q = session.query(User).\
                    join(User.addresses).\
                    join(a_alias, User.addresses).\
                    filter(Address.email_address=='ed@foo.com').\
                    filter(a_alias.email_address=='ed@bar.com')

        ä»¥ä¸Šæ‰€è¿°ï¼Œç”Ÿæˆçš„SQLå°†ç±»ä¼¼äºï¼š

            SELECT user.* FROM user
                JOIN address ON user.id = address.user_id
                JOIN address AS address_1 ON user.id=address_1.user_id
                WHERE address.email_address = :email_address_1
                AND address_1.email_address = :email_address_2

        [`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„åŒå‚æ•°è°ƒç”¨å½¢å¼ä¹Ÿå…è®¸æˆ‘ä»¬æ„å»ºä»»æ„è¿æ¥ï¼Œå¹¶ä½¿ç”¨é¢å‘SQLçš„â€œonå­å¥â€è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å®Œå…¨ä¾èµ–é…ç½®å…³ç³»ã€‚åœ¨ä½¿ç”¨åŒå‚æ•°å½¢å¼æ—¶ï¼Œä»»ä½•SQLè¡¨è¾¾å¼éƒ½å¯ä»¥ä½œä¸ºONå­å¥ä¼ é€’ï¼Œå®ƒåº”è¯¥ä»¥æŸç§æ–¹å¼å¼•ç”¨ç›®æ ‡å®ä½“ä»¥åŠé€‚ç”¨çš„æºå®ä½“ï¼š

            q = session.query(User).join(Address, User.id==Address.user_id)

        åœ¨ç‰ˆæœ¬0.7ä¸­æ›´æ”¹ï¼šåœ¨SQLAlchemy 0.6åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œ[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„ä¸¤ä¸ªå‚æ•°å½¢å¼éœ€è¦ä½¿ç”¨å…ƒç»„ï¼š`queryï¼ˆUserï¼‰ .joinï¼ˆï¼ˆåœ°å€ï¼Œ User.id == Address.user_idï¼‰ï¼‰`ã€‚è¿™ä¸ªè°ƒç”¨å½¢å¼åœ¨0.7ä¸­è¢«æ¥å—ï¼Œå¹¶ä¸”æ›´è¿›ä¸€æ­¥ï¼Œé™¤éå¤šä¸ªè¿æ¥æ¡ä»¶è¢«ä¼ é€’ç»™å•ä¸ª[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")è°ƒç”¨ï¼Œå¦åˆ™å®ƒæ˜¯ä¸å¿…è¦çš„ï¼Œå®ƒæœ¬èº«ä¹Ÿä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå®ƒç°åœ¨ç­‰åŒäºå¤šä¸ªè°ƒç”¨ï¼ˆæƒ…å†µå¹¶éæ€»æ˜¯å¦‚æ­¤ï¼‰ã€‚

        **é«˜çº§è¿æ¥å®šä½å’Œè‡ªé€‚åº”**

        åœ¨ä½¿ç”¨[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")æ—¶ï¼Œâ€œç›®æ ‡â€å¯ä»¥å…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚å¦‚å‰æ‰€è¿°ï¼Œå®ƒè¿˜æ¥å—[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")ç»“æ„å’Œå…¶ä»–å¯é€‰é¡¹ï¼Œä¾‹å¦‚[`alias()`](core_selectable.html#sqlalchemy.sql.expression.alias "sqlalchemy.sql.expression.alias")å’Œ[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")ç»“æ„ï¼Œå…¶ä¸­ä¸€ä¸ªæˆ–ä¸¤ä¸ª
        - å½¢å¼ï¼š

            addresses_q = select([Address.user_id]).\
                        where(Address.email_address.endswith("@bar.com")).\
                        alias()

            q = session.query(User).\
                        join(addresses_q, addresses_q.c.user_id==User.id)

        [`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")
        also features the ability to *adapt* a [`relationship()`](relationship_api.html#sqlalchemy.orm.relationship "sqlalchemy.orm.relationship")
        -driven ON clause to the target selectable.
        ä¸‹é¢æˆ‘ä»¬æ„é€ ä¸€ä¸ªä»`User`åˆ°`Address`çš„å­æŸ¥è¯¢çš„JOINï¼Œå…è®¸`User.addresses`åˆ°*adapt t6 \>æœ¬èº«æ”¹å˜ç›®æ ‡ï¼š*

            address_subq = session.query(Address).\
                            filter(Address.email_address == 'ed@foo.com').\
                            subquery()

            q = session.query(User).join(address_subq, User.addresses)

        ç”ŸæˆSQLç±»ä¼¼äºï¼š

            SELECT user.* FROM user
                JOIN (
                    SELECT address.id AS id,
                            address.user_id AS user_id,
                            address.email_address AS email_address
                    FROM address
                    WHERE address.email_address = :email_address_1
                ) AS anon_1 ON user.id = anon_1.user_id

        ä¸Šé¢çš„è¡¨æ ¼å…è®¸åœ¨ä»»ä½•æ—¶å€™å›åˆ°æ˜ç¡®çš„ONå­å¥ä¸Šï¼š

            q = session.query(User).\
                    join(address_subq, User.id==address_subq.c.user_id)

        **æ§åˆ¶è¦ä»**åŠ å…¥çš„å†…å®¹

        è™½ç„¶[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")ä¸“é—¨å¤„ç†JOINçš„â€œå³ä¾§â€ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨éœ€è¦çš„æƒ…å†µä¸‹ä½¿ç”¨[`select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")ä¸‹é¢æˆ‘ä»¬æ„å»ºä¸€ä¸ªé’ˆå¯¹`Address`çš„æŸ¥è¯¢ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥é€šè¿‡æŒ‡ç¤º[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ä»ç¬¬ä¸€ä¸ªé€‰æ‹©ç¬¬ä¸€ä¸ªä½œä¸ºONå­å¥æ¥ä½¿ç”¨`User.addresses` `User`å®ä½“ï¼š

            q = session.query(Address).select_from(User).\
                            join(User.addresses).\
                            filter(User.name == 'ed')

        è¿™å°†äº§ç”ŸSQLç±»ä¼¼äºï¼š

            SELECT address.* FROM user
                JOIN address ON user.id=address.user_id
                WHERE user.name = :name_1

        **åŒ¿åæ„å»ºåˆ«å**

        [`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")
        can construct anonymous aliases using the
        `aliased=True` flag.
        å½“æŸ¥è¯¢ä»¥ç®—æ³•æ–¹å¼åŠ å…¥æ—¶ï¼Œå¦‚è‡ªæŸ¥è¯¢åˆ°ä»»æ„æ·±åº¦æ—¶ï¼Œæ­¤åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼š

            q = session.query(Node).\
                    join("children", "children", aliased=True)

        å½“ä½¿ç”¨`aliased=True`æ—¶ï¼Œå®é™…çš„â€œåˆ«åâ€ç»“æ„ä¸æ˜ç¡®å¯ç”¨ã€‚è¦ä½¿ç”¨å®ƒï¼Œè¯¸å¦‚[`Query.filter()`](#sqlalchemy.orm.query.Query.filter "sqlalchemy.orm.query.Query.filter")ç­‰æ–¹æ³•å°†ä½¿ä¼ å…¥å®ä½“é€‚åº”æœ€åä¸€ä¸ªè¿æ¥ç‚¹ï¼š

            q = session.query(Node).\
                    join("children", "children", aliased=True).\
                    filter(Node.name == 'grandchild 1')

        ä½¿ç”¨è‡ªåŠ¨åˆ«åæ—¶ï¼Œ`from_joinpoint=True`å‚æ•°å¯ä»¥å…è®¸å°†å¤šèŠ‚ç‚¹è¿æ¥åˆ†è§£ä¸ºå¯¹[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")çš„å¤šæ¬¡è°ƒç”¨ï¼Œä»¥ä¾¿æ¯ä¸ªè·¯å¾„éƒ½å¯ä»¥è¿›ä¸€æ­¥è¿‡æ»¤ï¼š

            q = session.query(Node).\
                    join("children", aliased=True).\
                    filter(Node.name='child 1').\
                    join("children", aliased=True, from_joinpoint=True).\
                    filter(Node.name == 'grandchild 1')

        ä¸Šé¢çš„è¿‡æ»¤åˆ«åå¯ä»¥ä½¿ç”¨[`reset_joinpoint()`](#sqlalchemy.orm.query.Query.reset_joinpoint "sqlalchemy.orm.query.Query.reset_joinpoint")é‡ç½®å›åŸå§‹çš„`Node`å®ä½“ï¼š

            q = session.query(Node).\
                    join("children", "children", aliased=True).\
                    filter(Node.name == 'grandchild 1').\
                    reset_joinpoint().\
                    filter(Node.name == 'parent 1)

        æœ‰å…³`aliased=True`çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜…åˆ†å‘ç¤ºä¾‹[XML
        Persistence](examples.html#examples-xmlpersistence)ï¼Œå…¶ä¸­æ¼”ç¤ºäº†ä½¿ç”¨ç®—æ³•è”æ¥çš„ç±»ä¼¼XPathçš„æŸ¥è¯¢ç³»ç»Ÿã€‚

        å‚æ•°ï¼š

        -   **\*props**[Â¶](#sqlalchemy.orm.query.Query.join.params.*props)
            â€“ A collection of one or more join conditions, each
            consisting of a relationship-bound attribute or string
            relationship name representing an â€œon clauseâ€, or a single
            target entity, or a tuple in the form of
            `(target, onclause)`.
            è¿˜å¯ä»¥æ¥å—`ç›®æ ‡ï¼Œ `å½¢å¼çš„ç‰¹æ®ŠåŒå‚æ•°è°ƒç”¨å½¢å¼ã€‚
        -   **aliased = False**
            [Â¶](#sqlalchemy.orm.query.Query.join.params.aliased) -
            å¦‚æœä¸ºTrueï¼Œè¡¨æ˜JOINç›®æ ‡åº”è¯¥åŒ¿ååˆ«åã€‚éšåå¯¹[`filter()`](#sqlalchemy.orm.query.Query.filter "sqlalchemy.orm.query.Query.filter")å’Œç±»ä¼¼çš„è°ƒç”¨å°†ä½¿è¾“å…¥æ ‡å‡†é€‚åº”ç›®æ ‡åˆ«åï¼Œç›´åˆ°è°ƒç”¨[`reset_joinpoint()`](#sqlalchemy.orm.query.Query.reset_joinpoint "sqlalchemy.orm.query.Query.reset_joinpoint")ã€‚
        -   **isouter = False**
            [Â¶](#sqlalchemy.orm.query.Query.join.params.isouter) -

            å¦‚æœä¸ºTrueï¼Œåˆ™ä½¿ç”¨çš„è¿æ¥å°†æ˜¯å·¦å¤–è¿æ¥ï¼Œå°±åƒè°ƒç”¨[`Query.outerjoin()`](#sqlalchemy.orm.query.Query.outerjoin "sqlalchemy.orm.query.Query.outerjoin")æ–¹æ³•ä¸€æ ·ã€‚è¿™ä¸ªæ ‡å¿—åœ¨è¿™é‡Œä¿æŒä¸[`FromClause.join()`](core_selectable.html#sqlalchemy.sql.expression.FromClause.join "sqlalchemy.sql.expression.FromClause.join")å’Œå…¶ä»–Coreç»“æ„æ‰€æ¥å—çš„ç›¸åŒæ ‡å¿—çš„ä¸€è‡´æ€§ã€‚

            ç‰ˆæœ¬1.0.0ä¸­çš„æ–°åŠŸèƒ½

        -   **full = False**
            [Â¶](#sqlalchemy.orm.query.Query.join.params.full) -

            æ¸²æŸ“å…¨å¤–è¿æ¥ï¼›æ„å‘³ç€`isouter`ã€‚

            ç‰ˆæœ¬1.1ä¸­çš„æ–°åŠŸèƒ½

        -   **from\_joinpoint=False**[Â¶](#sqlalchemy.orm.query.Query.join.params.from_joinpoint)
            â€“ When using `aliased=True`, a setting
            of True here will cause the join to be from the most recent
            joined target, rather than starting back from the original
            FROM clauses of the query.

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        åœ¨ORMæ•™ç¨‹ä¸­[Querying with
        Joins](tutorial.html#ormtutorial-joins)ã€‚

        æœ‰å…³å¦‚ä½•å°†[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")ç”¨äºç»§æ‰¿å…³ç³»çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[Mapping
        Class Inheritance Hierarchies](inheritance.html)ã€‚

        [`orm.join()`](#sqlalchemy.orm.join "sqlalchemy.orm.join") - a
        standalone ORM-level join function, used internally by
        [`Query.join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join"),
        which in previous SQLAlchemy versions was the primary ORM-level
        joining interface.

    `æ ‡ç­¾ T0> ï¼ˆ T1> åç§° T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ç”±[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¡¨ç¤ºçš„å®Œæ•´SELECTè¯­å¥ï¼Œå°†å…¶è½¬æ¢ä¸ºå…·æœ‰ç»™å®šåç§°æ ‡ç­¾çš„æ ‡é‡å­æŸ¥è¯¢ã€‚

        ç±»ä¼¼äº[`sqlalchemy.sql.expression.SelectBase.label()`](core_selectable.html#sqlalchemy.sql.expression.SelectBase.label "sqlalchemy.sql.expression.SelectBase.label")ã€‚

        ç‰ˆæœ¬0.6.5ä¸­çš„æ–°åŠŸèƒ½

    `é™åˆ¶ T0> ï¼ˆ T1> é™åˆ¶ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†`LIMIT`åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„`Query`ã€‚

    `merge_result`{.descname} ï¼ˆ *iterator*ï¼Œ*load = True* ï¼‰ [t5 \>](#sqlalchemy.orm.query.Query.merge_result "Permalink to this definition")
    :   å°†ç»“æœåˆå¹¶åˆ°[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡çš„Sessionä¸­ã€‚

        ç»™å®šä¸€ä¸ªä¸æ­¤ç»“æ„ç›¸åŒç»“æ„çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¿”å›çš„è¿­ä»£å™¨ï¼Œè¿”å›ç»“æœçš„ç›¸åŒè¿­ä»£å™¨ï¼Œæ‰€æœ‰æ˜ å°„å®ä¾‹éƒ½ä½¿ç”¨[`Session.merge()`](session_api.html#sqlalchemy.orm.session.Session.merge "sqlalchemy.orm.session.Session.merge")åˆå¹¶åˆ°ä¼šè¯ä¸­ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–çš„æ–¹æ³•ï¼Œå®ƒå°†åˆå¹¶æ‰€æœ‰æ˜ å°„çš„å®ä¾‹ï¼Œä¸ºæ¯ä¸ªå€¼æ˜ç¡®è°ƒç”¨[`Session.merge()`](session_api.html#sqlalchemy.orm.session.Session.merge "sqlalchemy.orm.session.Session.merge")ï¼Œä»è€Œä»¥è¾ƒå°‘çš„æ–¹æ³•å¼€é”€ä¿ç•™ç»“æœè¡Œå’Œæœªæ˜ å°„åˆ—çš„ç»“æ„ã€‚

        ç»“æœçš„ç»“æ„æ˜¯æ ¹æ®è¿™ä¸ª[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„åˆ—è¡¨ç¡®å®šçš„
        - å¦‚æœè¿™äº›ä¸ä¸€è‡´ï¼Œåˆ™ä¼šå‘ç”Ÿæœªç»æ£€æŸ¥çš„é”™è¯¯ã€‚

        'load'å‚æ•°ä¸[`Session.merge()`](session_api.html#sqlalchemy.orm.session.Session.merge "sqlalchemy.orm.session.Session.merge")ç›¸åŒã€‚

        æœ‰å…³å¦‚ä½•ä½¿ç”¨[`merge_result()`](#sqlalchemy.orm.query.Query.merge_result "sqlalchemy.orm.query.Query.merge_result")çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜…ç¤ºä¾‹[Dogpile
        Caching](examples.html#examples-caching)çš„æºä»£ç ï¼Œå…¶ä¸­[`merge_result()`](#sqlalchemy.orm.query.Query.merge_result "sqlalchemy.orm.query.Query.merge_result")ç”¨äºé«˜æ•ˆå°†çŠ¶æ€ä»ç¼“å­˜æ¢å¤å›ç›®æ ‡[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")ã€‚

    `åç§» T0> ï¼ˆ T1> åç§» T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å¯¹æŸ¥è¯¢åº”ç”¨ä¸€ä¸ª`OFFSET`å¹¶è¿”å›æ–°ç”Ÿæˆçš„`Query`ã€‚

    `ä¸€ä¸ª T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   åªè¿”å›ä¸€ä¸ªç»“æœæˆ–å¼•å‘å¼‚å¸¸ã€‚

        å¦‚æœæŸ¥è¯¢æœªé€‰æ‹©ä»»ä½•è¡Œï¼Œåˆ™å¼•å‘`sqlalchemy.orm.exc.NoResultFound`ã€‚å¦‚æœè¿”å›å¤šä¸ªå¯¹è±¡æ ‡è¯†ï¼Œæˆ–è€…å¦‚æœä¸ºä»…è¿”å›æ ‡é‡å€¼çš„æŸ¥è¯¢è¿”å›å¤šä¸ªè¡Œè€Œä¸æ˜¯å®Œæ•´çš„æ ‡è¯†æ˜ å°„å®ä½“ï¼Œåˆ™å¼•å‘`sqlalchemy.orm.exc.MultipleResultsFound`ã€‚

        è°ƒç”¨[`one()`](extensions_baked.html#sqlalchemy.ext.baked.Result.one "sqlalchemy.ext.baked.Result.one")ä¼šå¯¼è‡´æ‰§è¡ŒåŸºç¡€æŸ¥è¯¢ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.first()`](#sqlalchemy.orm.query.Query.first "sqlalchemy.orm.query.Query.first")

        [`Query.one_or_none()`](#sqlalchemy.orm.query.Query.one_or_none "sqlalchemy.orm.query.Query.one_or_none")

    ` one_or_none  T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   è‡³å¤šè¿”å›ä¸€ä¸ªç»“æœæˆ–å¼•å‘å¼‚å¸¸ã€‚

        å¦‚æœæŸ¥è¯¢æœªé€‰æ‹©ä»»ä½•è¡Œï¼Œåˆ™è¿”å›`None`ã€‚å¦‚æœè¿”å›å¤šä¸ªå¯¹è±¡æ ‡è¯†ï¼Œæˆ–è€…å¦‚æœä¸ºä»…è¿”å›æ ‡é‡å€¼çš„æŸ¥è¯¢è¿”å›å¤šä¸ªè¡Œè€Œä¸æ˜¯å®Œæ•´çš„æ ‡è¯†æ˜ å°„å®ä½“ï¼Œåˆ™å¼•å‘`sqlalchemy.orm.exc.MultipleResultsFound`ã€‚

        è°ƒç”¨[`Query.one_or_none()`](#sqlalchemy.orm.query.Query.one_or_none "sqlalchemy.orm.query.Query.one_or_none")ä¼šå¯¼è‡´æ‰§è¡ŒåŸºç¡€æŸ¥è¯¢ã€‚

        ç‰ˆæœ¬1.0.9æ–°å¢ï¼šæ·»åŠ äº†[`Query.one_or_none()`](#sqlalchemy.orm.query.Query.one_or_none "sqlalchemy.orm.query.Query.one_or_none")

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.first()`](#sqlalchemy.orm.query.Query.first "sqlalchemy.orm.query.Query.first")

        [`Query.one()`](#sqlalchemy.orm.query.Query.one "sqlalchemy.orm.query.Query.one")

    `é€‰é¡¹ T0> ï¼ˆ T1>  * ARGS  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ä¸€ä¸ªæ–°çš„æŸ¥è¯¢å¯¹è±¡ï¼Œåº”ç”¨ç»™å®šçš„æ˜ å°„å™¨é€‰é¡¹åˆ—è¡¨ã€‚

        å¤§å¤šæ•°æä¾›çš„é€‰é¡¹éƒ½ä¼šæ”¹å˜å¦‚ä½•åŠ è½½åˆ—å’Œå…³ç³»æ˜ å°„å±æ€§ã€‚æœ‰å…³å‚è€ƒæ–‡æ¡£ï¼Œè¯·å‚é˜…[Deferred
        Column Loading](loading_columns.html#deferred)å’Œ[*Relationship
        Loading Techniques*](loading_relationships.html)éƒ¨åˆ†ã€‚

    ` ORDER_BY  T0> ï¼ˆ T1>  *æ ‡å‡† T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†ä¸€ä¸ªæˆ–å¤šä¸ªORDER
        BYæ ‡å‡†åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„`Query`

        æ‰€æœ‰ç°æœ‰çš„ORDER BYè®¾ç½®éƒ½å¯ä»¥é€šè¿‡ä¼ é€’`None`

        æˆ–è€…ï¼Œé€šè¿‡ä¼ é€’`False`ä½œä¸ºå€¼ï¼Œå¯ä»¥å®Œå…¨å–æ¶ˆQueryå¯¹è±¡ä¸Šç°æœ‰çš„ORDER BYè®¾ç½® -
        åœ¨è°ƒç”¨ORDER BYæ— æ•ˆçš„æ–¹æ³•ä¹‹å‰ä½¿ç”¨æ­¤è®¾ç½®ã€‚

    `å¤–è¿æ¥`{.descname} ï¼ˆ *\* props*ï¼Œ*\*\* kwargs* ï¼‰ [T5\>](#sqlalchemy.orm.query.Query.outerjoin "Permalink to this definition")
    :   æ ¹æ®æ­¤`Query`å¯¹è±¡çš„æ ‡å‡†åˆ›å»ºå·¦å¤–è¿æ¥ï¼Œå¹¶ç”Ÿæˆåº”ç”¨ï¼Œè¿”å›æ–°ç”Ÿæˆçš„`Query`ã€‚

        ç”¨æ³•ä¸`join()`æ–¹æ³•ç›¸åŒã€‚

    `params`{.descname} ï¼ˆ *\* args*ï¼Œ*\*\* kwargs* ï¼‰ [T5\>](#sqlalchemy.orm.query.Query.params "Permalink to this definition")
    :   æ·»åŠ å¯èƒ½å·²ç»åœ¨filter()ä¸­æŒ‡å®šçš„ç»‘å®šå‚æ•°çš„å€¼ã€‚

        å‚æ•°å¯ä»¥ä½¿ç”¨\*\*
        kwargsæˆ–å¯é€‰çš„å•ä¸ªå­—å…¸æŒ‡å®šä¸ºç¬¬ä¸€ä¸ªä½ç½®å‚æ•°ã€‚ä¸¤è€…çš„åŸå› æ˜¯\*\*
        kwargså¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¸€äº›å‚æ•°å­—å…¸åŒ…å«unicodeé”®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹\*\*
        kwargsä¸èƒ½ä½¿ç”¨ã€‚

    ` populate_existing  T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   è¿”å›ä¸€ä¸ª[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ï¼Œå®ƒå°†åœ¨åŠ è½½æ—¶åˆ·æ–°æ‰€æœ‰å®ä¾‹ï¼Œæˆ–åˆ·æ–°å½“å‰[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")ä¸­çš„æ‰€æœ‰å®ä¾‹ã€‚

        [`populate_existing()`](#sqlalchemy.orm.query.Query.populate_existing "sqlalchemy.orm.query.Query.populate_existing")
        does not improve behavior when the ORM is used normally - the
        [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")
        objectâ€™s usual behavior of maintaining a transaction and
        expiring all attributes after rollback or commit handles object
        state automatically. æ­¤æ–¹æ³•ä¸é€‚ç”¨äºä¸€èˆ¬ç”¨é€”ã€‚

    ` prefix_with  T0> ï¼ˆ T1>  *å‰ç¼€ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†å‰ç¼€åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„`Query`ã€‚

        å‚æ•°ï¼š

        **\* prefixes**
        [Â¶](#sqlalchemy.orm.query.Query.prefix_with.params.*prefixes) -
        å¯é€‰å‰ç¼€ï¼Œé€šå¸¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä½¿ç”¨ä»»ä½•é€—å·ã€‚å¯¹äºMySQLå…³é”®å­—å°¤å…¶æœ‰ç”¨ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            query = sess.query(User.name).\
                prefix_with('HIGH_PRIORITY').\
                prefix_with('SQL_SMALL_RESULT', 'ALL')

        ä¼šå‘ˆç°ï¼š

            SELECT HIGH_PRIORITY SQL_SMALL_RESULT ALL users.name AS users_name
            FROM users

        New in version 0.7.7.

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`HasPrefixes.prefix_with()`](core_selectable.html#sqlalchemy.sql.expression.HasPrefixes.prefix_with "sqlalchemy.sql.expression.HasPrefixes.prefix_with")

    ` reset_joinpoint  T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   è¿”å›ä¸€ä¸ªæ–°çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ï¼Œå…¶ä¸­â€œè¿æ¥ç‚¹â€å·²è¢«é‡ç½®å›æŸ¥è¯¢çš„åŸºæœ¬FROMå®ä½“ã€‚

        æ­¤æ–¹æ³•é€šå¸¸ä¸[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")æ–¹æ³•çš„`aliased=True`ç‰¹æ€§ç»“åˆä½¿ç”¨ã€‚è¯·å‚é˜…[`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")ä¸­çš„ç¤ºä¾‹äº†è§£å¦‚ä½•ä½¿ç”¨å®ƒã€‚

    `æ ‡é‡ T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   è¿”å›ç¬¬ä¸€ä¸ªç»“æœçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰è¡Œå­˜åœ¨ï¼Œè¿”å›Noneã€‚å¦‚æœè¿”å›å¤šè¡Œï¼Œåˆ™å¼•å‘MultipleResultsFoundã€‚

            >>> session.query(Item).scalar()
            <Item>
            >>> session.query(Item.id).scalar()
            1
            >>> session.query(Item.id).filter(Item.id < 0).scalar()
            None
            >>> session.query(Item.id, Item.name).scalar()
            1
            >>> session.query(func.count(Parent.id)).scalar()
            20

        è¿™å¯¼è‡´åº•å±‚æŸ¥è¯¢çš„æ‰§è¡Œã€‚

    ` select_entity_from  T0> ï¼ˆ T1>  from_obj  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†æ­¤[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„FROMå­å¥è®¾ç½®ä¸ºå¯é€‰çš„æ ¸å¿ƒï¼Œå°†å…¶ä½œä¸ºæ›¿ä»£çš„FROMå­å¥åº”ç”¨äºç›¸åº”çš„æ˜ å°„å®ä½“ã€‚

        è¿™ä¸ªæ–¹æ³•ç±»ä¼¼äº[`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")æ–¹æ³•ï¼Œå› ä¸ºå®ƒè®¾ç½®æŸ¥è¯¢çš„FROMå­å¥ã€‚ä½†æ˜¯ï¼Œ[`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")ä»…å½±å“æ”¾ç½®åœ¨FROMä¸­çš„å†…å®¹ï¼Œæ­¤æ–¹æ³•ä¹Ÿé€‚ç”¨ç»™å®šçš„å¯é€‰é¡¹æ¥æ›¿æ¢æ‰€é€‰å®ä½“é€šå¸¸ä»ä¸­é€‰æ‹©çš„FROMã€‚

        The given `from_obj` must be an instance of
        a [`FromClause`](core_selectable.html#sqlalchemy.sql.expression.FromClause "sqlalchemy.sql.expression.FromClause"),
        e.g. a [`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")
        or [`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")
        construct.

        An example would be a [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")
        that selects `User` entities, but uses
        [`Query.select_entity_from()`](#sqlalchemy.orm.query.Query.select_entity_from "sqlalchemy.orm.query.Query.select_entity_from")
        to have the entities selected from a [`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")
        construct instead of the base `user` table:

            select_stmt = select([User]).where(User.id == 7)

            q = session.query(User).\
                    select_entity_from(select_stmt).\
                    filter(User.name == 'ed')

        ç”Ÿæˆçš„æŸ¥è¯¢å°†ç›´æ¥ä»ç»™å®šçš„[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")æ„é€ ä¸­é€‰æ‹©`User`ä¸ªå®ä½“ï¼Œå¹¶ä¸”å°†ä¸ºï¼š

            SELECT anon_1.id AS anon_1_id, anon_1.name AS anon_1_name
            FROM (SELECT "user".id AS id, "user".name AS name
            FROM "user"
            WHERE "user".id = :id_1) AS anon_1
            WHERE anon_1.name = :name_1

        æ³¨æ„ï¼Œå³ä½¿WHEREæ ‡å‡†æ˜¯â€œé€‚åº”æ€§çš„â€ï¼Œä½¿å¾—`anon_1`å­æŸ¥è¯¢æœ‰æ•ˆåœ°æ›¿ä»£äº†æ‰€æœ‰å¯¹`user`è¡¨çš„å¼•ç”¨ï¼Œé™¤äº†å®ƒåœ¨å†…éƒ¨å¼•ç”¨çš„é‚£ä¸ªã€‚

        å°†å®ƒä¸[`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")è¿›è¡Œæ¯”è¾ƒï¼Œè¯¥ç‰ˆæœ¬çš„ç‰ˆæœ¬ä¸º0.9ï¼Œä¸ä¼šå½±å“ç°æœ‰å®ä½“ã€‚ä»¥ä¸‹å£°æ˜ï¼š

            q = session.query(User).\
                    select_from(select_stmt).\
                    filter(User.name == 'ed')

        ç”ŸæˆSQLï¼Œå…¶ä¸­`user`è¡¨ä»¥åŠ`select_stmt`æ„é€ åœ¨FROMå­å¥ä¸­ä½œä¸ºå•ç‹¬çš„å…ƒç´ å­˜åœ¨ã€‚æ²¡æœ‰åº”ç”¨`user`è¡¨çš„â€œè‡ªé€‚åº”â€ï¼š

            SELECT "user".id AS user_id, "user".name AS user_name
            FROM "user", (SELECT "user".id AS id, "user".name AS name
            FROM "user"
            WHERE "user".id = :id_1) AS anon_1
            WHERE "user".name = :name_1

        [`Query.select_entity_from()`](#sqlalchemy.orm.query.Query.select_entity_from "sqlalchemy.orm.query.Query.select_entity_from")ä¿æŒ[`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")çš„æ—§è¡Œä¸ºã€‚åœ¨ç°ä»£ä½¿ç”¨ä¸­ï¼Œä½¿ç”¨[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„ç»“æœï¼š

            select_stmt = select([User]).where(User.id == 7)
            user_from_select = aliased(User, select_stmt.alias())

            q = session.query(user_from_select)

        å‚æ•°ï¼š

        **from\_obj**[Â¶](#sqlalchemy.orm.query.Query.select_entity_from.params.from_obj)
        â€“ a [`FromClause`](core_selectable.html#sqlalchemy.sql.expression.FromClause "sqlalchemy.sql.expression.FromClause")
        object that will replace the FROM clause of this [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query").

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")

        0.8ç‰ˆæ–°å¢ï¼š [`Query.select_entity_from()`](#sqlalchemy.orm.query.Query.select_entity_from "sqlalchemy.orm.query.Query.select_entity_from")è¢«æ·»åŠ æ¥æŒ‡å®šå®ä½“æ›¿æ¢çš„å…·ä½“è¡Œä¸ºï¼Œä½†æ˜¯[`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")è¿™ç§è¡Œä¸ºä»¥åŠç›´åˆ°0.9ã€‚

    ` select_from  T0> ï¼ˆ T1>  * from_obj  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ˜¾å¼åœ°è®¾ç½®è¿™ä¸ª[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„FROMå­å¥ã€‚

        [`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")
        is often used in conjunction with [`Query.join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")
        in order to control which entity is selected from on the â€œleftâ€
        side of the join.

        The entity or selectable object here effectively replaces the
        â€œleft edgeâ€ of any calls to [`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join"),
        when no joinpoint is otherwise established - usually, the
        default â€œjoin pointâ€ is the leftmost entity in the
        [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")
        objectâ€™s list of entities to be selected.

        ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼š

            q = session.query(Address).select_from(User).\
                join(User.addresses).\
                filter(User.name == 'ed')

        å…¶ä¸­ç”Ÿæˆçš„SQLç­‰åŒäºï¼š

            SELECT address.* FROM user
            JOIN address ON user.id=address.user_id
            WHERE user.name = :name_1

        å‚æ•°ï¼š

        **\* from\_obj**
        [Â¶](#sqlalchemy.orm.query.Query.select_from.params.*from_obj) -
        åº”ç”¨äºFROMå­å¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®ä½“çš„é›†åˆã€‚å®ä½“å¯ä»¥æ˜¯æ˜ å°„ç±»ï¼Œ[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")å¯¹è±¡ï¼Œ[`Mapper`](mapping_api.html#sqlalchemy.orm.mapper.Mapper "sqlalchemy.orm.mapper.Mapper")å¯¹è±¡ä»¥åŠåƒå­æŸ¥è¯¢è¿™æ ·çš„æ ¸å¿ƒ[`FromClause`](core_selectable.html#sqlalchemy.sql.expression.FromClause "sqlalchemy.sql.expression.FromClause")å…ƒç´ ã€‚

        åœ¨ç‰ˆæœ¬0.9ä¸­æ›´æ”¹ï¼šæ­¤æ–¹æ³•ä¸å†å°†ç»™å®šçš„FROMå¯¹è±¡åº”ç”¨äºåŒ¹é…å®ä½“ä»ä¸­é€‰æ‹©çš„å¯é€‰é¡¹ï¼›
        [`select_entity_from()`](#sqlalchemy.orm.query.Query.select_entity_from "sqlalchemy.orm.query.Query.select_entity_from")æ–¹æ³•ç°åœ¨å¯ä»¥å®Œæˆæ­¤æ“ä½œã€‚è¯·å‚é˜…è¯¥æ–¹æ³•ä»¥äº†è§£æ­¤è¡Œä¸ºçš„è¯´æ˜ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")

        [`Query.select_entity_from()`](#sqlalchemy.orm.query.Query.select_entity_from "sqlalchemy.orm.query.Query.select_entity_from")

    `å¯é€‰ T0> Â¶ T1>`{.descname}
    :   è¿”å›ç”±æ­¤[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å‘å‡ºçš„[`Select`](core_selectable.html#sqlalchemy.sql.expression.Select "sqlalchemy.sql.expression.Select")å¯¹è±¡ã€‚

        ç”¨äº[`inspect()`](core_inspection.html#sqlalchemy.inspection.inspect "sqlalchemy.inspection.inspect")å…¼å®¹æ€§ï¼Œè¿™ç›¸å½“äºï¼š

            query.enable_eagerloads(False).with_labels().statement

    `åˆ‡ç‰‡`{.descname} ï¼ˆ *å¼€å§‹*ï¼Œ*åœæ­¢* ï¼‰ [](#sqlalchemy.orm.query.Query.slice "Permalink to this definition")
    :   è®¡ç®—ç”±ç»™å®šç´¢å¼•è¡¨ç¤ºçš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„â€œç‰‡æ®µâ€å¹¶è¿”å›ç»“æœçš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ã€‚

        å¼€å§‹å’Œåœæ­¢ç´¢å¼•çš„è¡Œä¸ºä¸Pythonå†…ç½®çš„`range()`å‡½æ•°çš„å‚æ•°ç±»ä¼¼ã€‚æ­¤æ–¹æ³•æä¾›äº†ä½¿ç”¨`LIMIT` / `OFFSET`æ¥è·å–æŸ¥è¯¢ç‰‡æ®µçš„æ›¿ä»£æ–¹æ³•ã€‚

        ä¾‹å¦‚ï¼Œ

            session.query(User).order_by(User.id).slice(1, 3)

        å‘ˆç°ä¸º

            SELECT users.id AS users_id,
                   users.name AS users_name
            FROM users ORDER BY users.id
            LIMIT ? OFFSET ?
            (2, 1)

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.limit()`](#sqlalchemy.orm.query.Query.limit "sqlalchemy.orm.query.Query.limit")

        [`Query.offset()`](#sqlalchemy.orm.query.Query.offset "sqlalchemy.orm.query.Query.offset")

    `è¯­å¥ T0> Â¶ T1>`{.descname}
    :   æ­¤Queryæ‰€è¡¨ç¤ºçš„å®Œæ•´SELECTè¯­å¥ã€‚

        é»˜è®¤æƒ…å†µä¸‹ï¼Œå£°æ˜ä¸ä¼šæ¶ˆé™¤åº”ç”¨äºæ„é€ çš„æ ‡ç­¾ï¼Œé™¤éé¦–å…ˆè°ƒç”¨with\_labelsï¼ˆTrueï¼‰ã€‚

    `subquery`{.descname} ï¼ˆ *name = None*ï¼Œ*with\_labels = False*ï¼Œ*reduce\_columns = False* ï¼‰ T5\> [Â¶ T6\>](#sqlalchemy.orm.query.Query.subquery "Permalink to this definition")
    :   è¿”å›åµŒå…¥åœ¨[`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")ä¸­çš„ç”±æ­¤[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¡¨ç¤ºçš„å®Œæ•´SELECTè¯­å¥ã€‚

        æŸ¥è¯¢ä¸­çš„Eager JOINç”Ÿæˆè¢«ç¦ç”¨ã€‚

        å‚æ•°ï¼š

        -   **name**
            [Â¶](#sqlalchemy.orm.query.Query.subquery.params.name) -
            è¦æŒ‡å®šä¸ºåˆ«åçš„å­—ç¬¦ä¸²åç§°ï¼›è¿™ä¼šä¼ é€’ç»™[`FromClause.alias()`](core_selectable.html#sqlalchemy.sql.expression.FromClause.alias "sqlalchemy.sql.expression.FromClause.alias")ã€‚å¦‚æœ`None`ï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘æ—¶ç¡®å®šæ€§åœ°ç”Ÿæˆåç§°ã€‚
        -   **with\_labels**[Â¶](#sqlalchemy.orm.query.Query.subquery.params.with_labels)
            â€“ if True, [`with_labels()`](#sqlalchemy.orm.query.Query.with_labels "sqlalchemy.orm.query.Query.with_labels")
            will be called on the [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")
            first to apply table-qualified labels to all columns.
        -   **reduce\_columns**
            [Â¶](#sqlalchemy.orm.query.Query.subquery.params.reduce_columns)
            -

            if True, [`Select.reduce_columns()`](core_selectable.html#sqlalchemy.sql.expression.Select.reduce_columns "sqlalchemy.sql.expression.Select.reduce_columns")
            will be called on the resulting [`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")
            construct, to remove same-named columns where one also
            refers to the other via foreign key or WHERE clause
            equivalence.

            åœ¨ç‰ˆæœ¬0.8ä¸­æ›´æ”¹ï¼šæ·»åŠ äº†`with_labels`å’Œ`reduce_columns`å…³é”®å­—å‚æ•°ã€‚

    ` suffix_with  T0> ï¼ˆ T1>  *åç¼€ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   å°†åç¼€åº”ç”¨äºæŸ¥è¯¢å¹¶è¿”å›æ–°ç”Ÿæˆçš„`Query`ã€‚

        å‚æ•°ï¼š

        **\*åç¼€**
        [Â¶](#sqlalchemy.orm.query.Query.suffix_with.params.*suffixes) -
        å¯é€‰åç¼€ï¼Œé€šå¸¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä½¿ç”¨ä»»ä½•é€—å·ã€‚

        ç‰ˆæœ¬1.0.0ä¸­çš„æ–°åŠŸèƒ½

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.prefix_with()`](#sqlalchemy.orm.query.Query.prefix_with "sqlalchemy.orm.query.Query.prefix_with")

        [`HasSuffixes.suffix_with()`](core_selectable.html#sqlalchemy.sql.expression.HasSuffixes.suffix_with "sqlalchemy.sql.expression.HasSuffixes.suffix_with")

    `è”åˆ T0> ï¼ˆ T1>  * Q  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢ç”Ÿæˆæ­¤æŸ¥è¯¢çš„ä¸€ä¸ªUNIONã€‚

        ä¾‹å¦‚ã€‚ï¼š

            q1 = sess.query(SomeClass).filter(SomeClass.foo=='bar')
            q2 = sess.query(SomeClass).filter(SomeClass.bar=='foo')

            q3 = q1.union(q2)

        è¯¥æ–¹æ³•æ¥å—å¤šä¸ªQueryå¯¹è±¡ä»¥æ§åˆ¶åµŒå¥—çš„çº§åˆ«ã€‚ä¸€ç³»åˆ—`union()`è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š

            x.union(y).union(z).all()

        å°†åµŒå¥—åœ¨æ¯ä¸ª`union()`ä¸Šï¼Œå¹¶ç”Ÿæˆï¼š

            SELECT * FROM (SELECT * FROM (SELECT * FROM X UNION
                            SELECT * FROM y) UNION SELECT * FROM Z)

        é‰´äºï¼š

            x.union(y, z).all()

        ç”Ÿäº§ï¼š

            SELECT * FROM (SELECT * FROM X UNION SELECT * FROM y UNION
                            SELECT * FROM Z)

        è¯·æ³¨æ„ï¼Œè®¸å¤šæ•°æ®åº“åç«¯ä¸å…è®¸åœ¨UNIONï¼ŒEXCEPTç­‰å†…éƒ¨è°ƒç”¨çš„æŸ¥è¯¢ä¸Šå‘ˆç°ORDER
        BYã€‚è¦ç¦ç”¨æ‰€æœ‰ORDER
        BYå­å¥ï¼ˆåŒ…æ‹¬æ˜ å°„å™¨ä¸Šé…ç½®çš„å­å¥ï¼‰ï¼Œå‘å‡º`query.order_by(None)` - ç”Ÿæˆçš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡ä¸ä¼šåœ¨å…¶SELECTè¯­å¥ä¸­å‘ˆç°ORDER
        BYã€‚

    ` union_all  T0> ï¼ˆ T1>  * Q  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   é’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢ç”Ÿæˆæ­¤æŸ¥è¯¢çš„UNION ALLã€‚

        ä¸[`union()`](#sqlalchemy.orm.query.Query.union "sqlalchemy.orm.query.Query.union")çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚æŸ¥çœ‹ä½¿ç”¨ç¤ºä¾‹çš„æ–¹æ³•ã€‚

    `æ›´æ–°`{.descname} ï¼ˆ *å€¼*ï¼Œ*synchronize\_session ='è¯„ä¼°'*ï¼Œ*update\_args =æ— * ï¼‰ T5\> [Â¶ T6\>](#sqlalchemy.orm.query.Query.update "Permalink to this definition")
    :   æ‰§è¡Œæ‰¹é‡æ›´æ–°æŸ¥è¯¢ã€‚

        æ›´æ–°æ•°æ®åº“ä¸­æ­¤æŸ¥è¯¢åŒ¹é…çš„è¡Œã€‚

        ä¾‹å¦‚ã€‚ï¼š

            sess.query(User).filter(User.age == 25).\
                update({User.age: User.age - 10}, synchronize_session=False)

            sess.query(User).filter(User.age == 25).\
                update({"age": User.age - 10}, synchronize_session='evaluate')

        è­¦å‘Š

        [`Query.update()`](#sqlalchemy.orm.query.Query.update "sqlalchemy.orm.query.Query.update")æ–¹æ³•æ˜¯ä¸€ç§â€œæ‰¹é‡â€æ“ä½œï¼Œç»•è¿‡ORMå·¥ä½œå•å…ƒè‡ªåŠ¨åŒ–ï¼Œä»¥æé«˜æ€§èƒ½ã€‚**è¯·é˜…è¯»ä¸‹é¢çš„æ‰€æœ‰è­¦å‘Šå’Œè­¦å‘Šã€‚**

        å‚æ•°ï¼š

        -   **å€¼** [Â¶](#sqlalchemy.orm.query.Query.update.params.values)
            -

            ä¸€ä¸ªå¸¦æœ‰å±æ€§åç§°çš„å­—å…¸ï¼Œæˆ–è€…æ˜ å°„å±æ€§æˆ–SQLè¡¨è¾¾å¼ä½œä¸ºé”®ï¼Œå­—é¢å€¼æˆ–sqlè¡¨è¾¾å¼ä½œä¸ºå€¼ã€‚å¦‚æœéœ€è¦[parameter-ordered
            mode](core_tutorial.html#updates-order-parameters)ï¼Œåˆ™è¿™äº›å€¼å¯ä»¥ä½œä¸º2å…ƒç»„åˆ—è¡¨ä¼ é€’ï¼›è¿™è¦æ±‚å°†[`preserve_parameter_order`](core_dml.html#sqlalchemy.sql.expression.update.params.preserve_parameter_order "sqlalchemy.sql.expression.update")æ ‡å¿—ä¼ é€’ç»™[`Query.update.update_args`](#sqlalchemy.orm.query.Query.update.params.update_args "sqlalchemy.orm.query.Query.update")å­—å…¸ã€‚

            > ç‰ˆæœ¬1.0.0æ›´æ”¹ï¼š -
            > å€¼å­—å…¸ä¸­çš„å­—ç¬¦ä¸²åç§°ç°åœ¨é’ˆå¯¹æ˜ å°„çš„å®ä½“è¿›è¡Œè§£æï¼›ä»¥å‰ï¼Œè¿™äº›å­—ç¬¦ä¸²æ˜¯ä½œä¸ºæ–‡å­—åˆ—åä¼ é€’çš„ï¼Œæ²¡æœ‰æ˜ å°„å™¨çº§åˆ«çš„è½¬æ¢ã€‚

        -   **synchronize\_session**
            [Â¶](#sqlalchemy.orm.query.Query.update.params.synchronize_session)
            -

            é€‰æ‹©ç­–ç•¥æ¥æ›´æ–°ä¼šè¯ä¸­å¯¹è±¡çš„å±æ€§ã€‚æœ‰æ•ˆå€¼æ˜¯ï¼š

            > `False` -
            > ä¸è¦åŒæ­¥ä¼šè¯ã€‚ä¸€æ—¦ä¼šè¯è¿‡æœŸï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯æœ€é«˜æ•ˆå’Œå¯é çš„ï¼Œé€šå¸¸åœ¨commit()ä¹‹åå‘ç”Ÿï¼Œæˆ–è€…æ˜ç¡®åœ°ä½¿ç”¨expire\_all()ã€‚åœ¨åˆ°æœŸä¹‹å‰ï¼Œæ›´æ–°çš„å¯¹è±¡å¯èƒ½ä»ç„¶ä¿ç•™åœ¨ä¼šè¯ä¸­ï¼Œå…¶å±æ€§ä¸Šçš„é™ˆæ—§å€¼ä¼šå¯¼è‡´æ··æ·†ç»“æœã€‚
            >
            > `'fetch'` -
            > åœ¨æ›´æ–°ä¹‹å‰æ‰§è¡Œé€‰æ‹©æŸ¥è¯¢ä»¥æŸ¥æ‰¾ä¸æ›´æ–°æŸ¥è¯¢åŒ¹é…çš„å¯¹è±¡ã€‚å·²æ›´æ–°çš„å±æ€§åœ¨åŒ¹é…çš„å¯¹è±¡ä¸Šè¿‡æœŸã€‚
            >
            > `'evaluate'` -
            > ç›´æ¥åœ¨ä¼šè¯ä¸­çš„å¯¹è±¡ä¸­è¯„ä¼°Pythonä¸­çš„æŸ¥è¯¢æ¡ä»¶ã€‚å¦‚æœè¯„ä¼°æ ‡å‡†æ²¡æœ‰å®æ–½ï¼Œåˆ™ä¼šå¼•å‘ä¾‹å¤–ã€‚
            >
            > è¡¨è¾¾å¼æ±‚å€¼ç¨‹åºç›®å‰æ²¡æœ‰è€ƒè™‘æ•°æ®åº“å’ŒPythonä¹‹é—´çš„ä¸åŒå­—ç¬¦ä¸²æ•´ç†ã€‚

        -   **update\_args**
            [Â¶](#sqlalchemy.orm.query.Query.update.params.update_args) -

            å¯é€‰å­—å…¸ï¼ˆå¦‚æœå­˜åœ¨ï¼‰å°†ä½œä¸ºè¯¥å¯¹è±¡çš„`**kw`ä¼ é€’ç»™åº•å±‚çš„[`update()`](core_dml.html#sqlalchemy.sql.expression.update "sqlalchemy.sql.expression.update")ç»“æ„ã€‚å¯ç”¨äºä¼ é€’ç‰¹å®šäºæ–¹è¨€çš„å‚æ•°ï¼Œå¦‚`mysql_limit`ä»¥åŠå…¶ä»–ç‰¹æ®Šå‚æ•°ï¼Œå¦‚[`preserve_parameter_order`](core_dml.html#sqlalchemy.sql.expression.update.params.preserve_parameter_order "sqlalchemy.sql.expression.update")ã€‚

            ç‰ˆæœ¬1.0.0ä¸­çš„æ–°åŠŸèƒ½

        è¿”å›ï¼š

        æ•°æ®åº“çš„â€œè¡Œæ•°â€åŠŸèƒ½è¿”å›çš„è¡Œæ•°ç›¸åŒ¹é…ã€‚

        è­¦å‘Š

        **æ‰¹é‡æŸ¥è¯¢æ›´æ–°çš„å…¶ä»–æ³¨æ„äº‹é¡¹**

        -   The method does **not** offer in-Python cascading of
            relationships - it is assumed that ON UPDATE CASCADE is
            configured for any foreign key references which require it,
            otherwise the database may emit an integrity violation if
            foreign key references are being enforced.

            UPDATEä¹‹åï¼Œå—åˆ°ON UPDATE CASCADEå½±å“çš„[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")ä¸­çš„ä¾èµ–å¯¹è±¡å¯èƒ½ä¸åŒ…å«å½“å‰çŠ¶æ€ï¼›ä¸€æ—¦[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")è¿‡æœŸï¼ˆé€šå¸¸å‘ç”Ÿåœ¨[`Session.commit()`](session_api.html#sqlalchemy.orm.session.Session.commit "sqlalchemy.orm.session.Session.commit")æˆ–å¯ä»¥é€šè¿‡ä½¿ç”¨[`Session.expire_all()`](session_api.html#sqlalchemy.orm.session.Session.expire_all "sqlalchemy.orm.session.Session.expire_all")
            \>ã€‚

        -   `'fetch'`ç­–ç•¥ä¼šå¯¼è‡´å‘å‡ºé¢å¤–çš„SELECTè¯­å¥ï¼Œå¹¶ä¸”ä¼šæ˜¾ç€é™ä½æ€§èƒ½ã€‚

        -   The `'evaluate'` strategy performs a
            scan of all matching objects within the [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session");
            if the contents of the [`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")
            are expired, such as via a proceeding
            [`Session.commit()`](session_api.html#sqlalchemy.orm.session.Session.commit "sqlalchemy.orm.session.Session.commit")
            call, **this will result in SELECT queries emitted for every
            matching object**.

        -   è¯¥æ–¹æ³•æ”¯æŒå¤šè¡¨æ›´æ–°ï¼Œè¯¦è§[Multiple Table
            Updates](core_tutorial.html#multi-table-updates)ï¼Œå¹¶ä¸”æ­¤è¡Œä¸ºçš„æ‰©å±•æ”¯æŒå·²åŠ å…¥ç»§æ‰¿å’Œå…¶ä»–å¤šä¸ªè¡¨æ˜ å°„çš„æ›´æ–°ã€‚ä½†æ˜¯ï¼Œç»§æ‰¿æ˜ å°„å™¨çš„**è¿æ¥æ¡ä»¶ä¸ä¼šè‡ªåŠ¨å‘ˆç°**ã€‚ä»»ä½•å¤šè¡¨æ›´æ–°éƒ½å¿…é¡»å°å¿ƒï¼Œä»¥æ˜ç¡®åŒ…å«è¿™äº›è¡¨ä¹‹é—´çš„è¿æ¥æ¡ä»¶ï¼Œå³ä½¿åœ¨é€šå¸¸ä¸ºè‡ªåŠ¨çš„æ˜ å°„ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¾‹å¦‚ã€‚å¦‚æœç±»`Engineer`å­ç±»`Employee`ï¼Œåˆ™ä½¿ç”¨é’ˆå¯¹`Employee`æœ¬åœ°è¡¨çš„æ¡ä»¶å¯¹`Engineer`æœ¬åœ°è¡¨è¿›è¡ŒUPDATEçœ‹èµ·æ¥åƒï¼š

                session.query(Engineer).\
                    filter(Engineer.id == Employee.id).\
                    filter(Employee.name == 'dilbert').\
                    update({"engineer_type": "programmer"})

        -   [`MapperEvents.before_update()`](events.html#sqlalchemy.orm.events.MapperEvents.before_update "sqlalchemy.orm.events.MapperEvents.before_update")å’Œ[`MapperEvents.after_update()`](events.html#sqlalchemy.orm.events.MapperEvents.after_update "sqlalchemy.orm.events.MapperEvents.after_update")äº‹ä»¶**ä¸ä¼šä»æ­¤æ–¹æ³•è°ƒç”¨**ã€‚ç›¸åï¼Œæä¾›äº†[`SessionEvents.after_bulk_update()`](events.html#sqlalchemy.orm.events.SessionEvents.after_bulk_update "sqlalchemy.orm.events.SessionEvents.after_bulk_update")æ–¹æ³•æ¥å¯¹å®ä½“è¡Œçš„æ‰¹é‡æ›´æ–°è¿›è¡Œæ“ä½œã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.delete()`](#sqlalchemy.orm.query.Query.delete "sqlalchemy.orm.query.Query.delete")

        [Inserts, Updates and
        Deletes](core_tutorial.html#inserts-and-updates) - æ ¸å¿ƒSQLæ•™ç¨‹

    `å€¼ T0> ï¼ˆ T1> åˆ— T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ä¸ç»™å®šåˆ—è¡¨è¾¾å¼ç›¸å¯¹åº”çš„æ ‡é‡ç»“æœã€‚

    `å€¼ T0> ï¼ˆ T1>  *åˆ— T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œäº§ç”Ÿä¸åˆ—ç»™å®šåˆ—è¡¨ç›¸å¯¹åº”çš„ç»“æœå…ƒç»„

    ` whereclause  T0> Â¶ T1>`{.descname}
    :   readonlyå±æ€§ï¼Œå®ƒè¿”å›æ­¤æŸ¥è¯¢çš„å½“å‰WHEREæ ‡å‡†ã€‚

        è¿™ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªSQLè¡¨è¾¾å¼ç»“æ„ï¼Œå¦‚æœæ²¡æœ‰å»ºç«‹æ ‡å‡†ï¼Œåˆ™è¿”å›`None`ã€‚

    ` with_entities  T0> ï¼ˆ T1>  *å®ä½“ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ä¸€ä¸ªæ–°çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")æ›¿æ¢ç»™å®šå®ä½“çš„SELECTåˆ—è¡¨ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            # Users, filtered on some arbitrary criterion
            # and then ordered by related email address
            q = session.query(User).\
                        join(User.address).\
                        filter(User.name.like('%ed%')).\
                        order_by(Address.email)

            # given *only* User.id==5, Address.email, and 'q', what
            # would the *next* User in the result be ?
            subq = q.with_entities(Address.email).\
                        order_by(None).\
                        filter(User.id==5).\
                        subquery()
            q = q.join((subq, subq.c.email < Address.email)).\
                        limit(1)

        ç‰ˆæœ¬0.6.5ä¸­çš„æ–°åŠŸèƒ½

     `with_for_update`{.descname}(*read=False*, *nowait=False*, *of=None*, *skip\_locked=False*, *key\_share=False*)[Â¶](#sqlalchemy.orm.query.Query.with_for_update "Permalink to this definition")
    :   ç”¨`FOR UPDATE`å­å¥çš„æŒ‡å®šé€‰é¡¹è¿”å›æ–°çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ã€‚

        æ­¤æ–¹æ³•çš„è¡Œä¸ºä¸`SelectBase.with_for_update()`çš„è¡Œä¸ºç›¸åŒã€‚å½“ä¸å¸¦å‚æ•°è°ƒç”¨æ—¶ï¼Œç»“æœçš„`SELECT`è¯­å¥å°†é™„åŠ ä¸€ä¸ª`FOR UPDATE`å­å¥ã€‚When additional arguments are specified,
        backend-specific options such as `FOR UPDATE NOWAIT` or `LOCK IN SHARE MODE` can take
        effect.

        ä¾‹å¦‚ã€‚ï¼š

            q = sess.query(User).with_for_update(nowait=True, of=User)

        åœ¨Postgresqlåç«¯çš„ä¸Šè¿°æŸ¥è¯¢å°†å‘ˆç°å¦‚ä¸‹æ‰€ç¤ºï¼š

            SELECT users.id AS users_id FROM users FOR UPDATE OF users NOWAIT

        ç‰ˆæœ¬0.9.0ä¸­çš„æ–°åŠŸèƒ½ï¼š [`Query.with_for_update()`](#sqlalchemy.orm.query.Query.with_for_update "sqlalchemy.orm.query.Query.with_for_update")å–ä»£[`Query.with_lockmode()`](#sqlalchemy.orm.query.Query.with_lockmode "sqlalchemy.orm.query.Query.with_lockmode")æ–¹æ³•ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`GenerativeSelect.with_for_update()`](core_selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update "sqlalchemy.sql.expression.GenerativeSelect.with_for_update")
        - Core level method with full argument and behavioral
        description.

     `with_hint`{.descname}(*selectable*, *text*, *dialect\_name='\*'*)[Â¶](#sqlalchemy.orm.query.Query.with_hint "Permalink to this definition")
    :   ä¸ºç»™å®šå®ä½“æ·»åŠ ä¸€ä¸ªç´¢å¼•æˆ–å…¶ä»–æ‰§è¡Œä¸Šä¸‹æ–‡æç¤ºï¼Œæˆ–è€…å¯é€‰æ‹©[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ã€‚

        åŠŸèƒ½ç›´æ¥ä¼ é€’ç»™[`with_hint()`](core_selectable.html#sqlalchemy.sql.expression.Select.with_hint "sqlalchemy.sql.expression.Select.with_hint")ï¼Œå…¶ä¸­`selectable`å¯ä»¥æ˜¯[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")ï¼Œ[`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")æˆ–ORMå®ä½“/æ˜ å°„ç±»/ç­‰ç­‰ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.with_statement_hint()`](#sqlalchemy.orm.query.Query.with_statement_hint "sqlalchemy.orm.query.Query.with_statement_hint")

    ` with_labels  T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   å°†åˆ—æ ‡ç­¾åº”ç”¨äºQuery.statementçš„è¿”å›å€¼ã€‚

        æŒ‡ç¤ºæ­¤æŸ¥è¯¢çš„è¯­å¥è®¿é—®å™¨åº”è¯¥è¿”å›ä¸€ä¸ªSELECTè¯­å¥ï¼Œè¯¥è¯­å¥å°†æ ‡ç­¾ä»¥\_
        å½¢å¼åº”ç”¨äºæ‰€æœ‰åˆ—ï¼›è¿™é€šå¸¸ç”¨äºæ¶ˆé™¤å¤šä¸ªå…·æœ‰ç›¸åŒåç§°çš„è¡¨ä¸­çš„åˆ—çš„æ­§ä¹‰ã€‚

        å½“Queryå®é™…å‘å‡ºSQLæ¥åŠ è½½è¡Œæ—¶ï¼Œå®ƒæ€»æ˜¯ä½¿ç”¨åˆ—æ ‡ç­¾ã€‚

        æ³¨æ„

        åªæœ‰[`Query.with_labels()`](#sqlalchemy.orm.query.Query.with_labels "sqlalchemy.orm.query.Query.with_labels")æ–¹æ³•**å°†[`Query.statement`](#sqlalchemy.orm.query.Query.statement "sqlalchemy.orm.query.Query.statement")å’Œ*ä¸*çš„è¾“å‡ºåº”ç”¨äºä»»ä½•ç»“æœè¡Œè°ƒç”¨[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")æœ¬èº«çš„ç³»ç»Ÿï¼Œä¾‹å¦‚[`Query.first()`](#sqlalchemy.orm.query.Query.first "sqlalchemy.orm.query.Query.first")ï¼Œ[`Query.all()`](#sqlalchemy.orm.query.Query.all "sqlalchemy.orm.query.Query.all")ç­‰To
        execute a query using [`Query.with_labels()`](#sqlalchemy.orm.query.Query.with_labels "sqlalchemy.orm.query.Query.with_labels"),
        invoke the [`Query.statement`](#sqlalchemy.orm.query.Query.statement "sqlalchemy.orm.query.Query.statement")
        using [`Session.execute()`](session_api.html#sqlalchemy.orm.session.Session.execute "sqlalchemy.orm.session.Session.execute"):

            result = session.execute(query.with_labels().statement)

    ` with_lockmode  T0> ï¼ˆ T1> æ¨¡å¼ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   ä½¿ç”¨æŒ‡å®šçš„â€œé”å®šæ¨¡å¼â€è¿”å›ä¸€ä¸ªæ–°çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡ï¼Œè¯¥æ¨¡å¼å®è´¨ä¸Šæ˜¯æŒ‡`FOR UPDATE`å­å¥ã€‚

        ä»ç‰ˆæœ¬0.9.0å¼€å§‹å¼ƒç”¨ï¼šè¢«[`Query.with_for_update()`](#sqlalchemy.orm.query.Query.with_for_update "sqlalchemy.orm.query.Query.with_for_update")å–ä»£ã€‚

        å‚æ•°ï¼š

        **æ¨¡å¼**
        [Â¶](#sqlalchemy.orm.query.Query.with_lockmode.params.mode) -

        ä»£è¡¨æ‰€éœ€é”å®šæ¨¡å¼çš„å­—ç¬¦ä¸²ã€‚æœ‰æ•ˆå€¼æ˜¯ï¼š

        -   `None` - è½¬æ¢ä¸ºæ— é”æ¨¡å¼
        -   `'update'` - translates to
            `FOR UPDATE` (standard SQL, supported by
            most dialects)
        -   `'update_nowait'` - translates to
            `FOR UPDATE NOWAIT` (supported by
            Oracle, PostgreSQL 8.1 upwards)
        -   `'read'` - translates to
            `LOCK IN SHARE MODE` (for MySQL), and
            `FOR SHARE` (for PostgreSQL)

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.with_for_update()`](#sqlalchemy.orm.query.Query.with_for_update "sqlalchemy.orm.query.Query.with_for_update")
        - ç”¨äºæŒ‡å®š`FOR UPDATE`å­å¥çš„æ”¹è¿›çš„APIã€‚

    `with_parent`{.descname} ï¼ˆ *å®ä¾‹*ï¼Œ*å±æ€§=æ— * ï¼‰ [t5 \>](#sqlalchemy.orm.query.Query.with_parent "Permalink to this definition")
    :   æ·»åŠ è¿‡æ»¤æ ‡å‡†ï¼Œå°†ç»™å®šå®ä¾‹ä¸å­å¯¹è±¡æˆ–é›†åˆç›¸å…³è”ï¼Œä½¿ç”¨å…¶å±æ€§çŠ¶æ€ä»¥åŠå»ºç«‹çš„[`relationship()`](relationship_api.html#sqlalchemy.orm.relationship "sqlalchemy.orm.relationship")é…ç½®ã€‚

        è¯¥æ–¹æ³•ä½¿ç”¨[`with_parent()`](#sqlalchemy.orm.with_parent "sqlalchemy.orm.with_parent")å‡½æ•°ç”Ÿæˆå­å¥ï¼Œå…¶ç»“æœä¼ é€’ç»™[`Query.filter()`](#sqlalchemy.orm.query.Query.filter "sqlalchemy.orm.query.Query.filter")ã€‚

        å‚æ•°ä¸[`with_parent()`](#sqlalchemy.orm.with_parent "sqlalchemy.orm.with_parent")ç›¸åŒï¼Œåªæ˜¯ç»™å®šçš„å±æ€§å¯ä»¥æ˜¯Noneï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†å¯¹è¯¥[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡çš„ç›®æ ‡æ˜ å°„å™¨æ‰§è¡Œæœç´¢ã€‚

    `with_polymorphic`{.descname} ï¼ˆ *cls\_or\_mappers*ï¼Œ*selectable =æ— *ï¼Œ*polymorphic\_on =æ— * ï¼‰ T5\> [Â¶ T6\>](#sqlalchemy.orm.query.Query.with_polymorphic "Permalink to this definition")
    :   åŠ è½½ç”¨äºç»§æ‰¿ç±»çš„åˆ—ã€‚

        [`Query.with_polymorphic()`](#sqlalchemy.orm.query.Query.with_polymorphic "sqlalchemy.orm.query.Query.with_polymorphic")
        applies transformations to the â€œmainâ€ mapped class represented
        by this [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query").
        è¿™é‡Œçš„â€œmainâ€æ˜ å°„ç±»æ„å‘³ç€[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œå³`session.query(SomeClass)`ã€‚è¿™äº›è½¬æ¢å…è®¸åœ¨FROMå­å¥ä¸­å‡ºç°é¢å¤–çš„è¡¨ï¼Œè¿™æ ·æŸ¥è¯¢ä¸­å°±å¯ä»¥ä½¿ç”¨è”åˆç»§æ‰¿å­ç±»çš„åˆ—ï¼Œè¿™æ—¢æ˜¯ä¸ºäº†åŠ è½½æ—¶æ•ˆç‡ï¼Œä¹Ÿæ˜¯ä¸ºäº†åœ¨æŸ¥è¯¢æ—¶ä½¿ç”¨è¿™äº›åˆ—ã€‚

        æœ‰å…³å¦‚ä½•ä½¿ç”¨æ­¤æ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£éƒ¨åˆ†[Basic Control of
        Which Tables are Queried](inheritance.html#with-polymorphic)ã€‚

        Changed in version 0.8: A new and more flexible function
        [`orm.with_polymorphic()`](inheritance.html#sqlalchemy.orm.with_polymorphic "sqlalchemy.orm.with_polymorphic")
        supersedes [`Query.with_polymorphic()`](#sqlalchemy.orm.query.Query.with_polymorphic "sqlalchemy.orm.query.Query.with_polymorphic"),
        as it can apply the equivalent functionality to any set of
        columns or classes in the [`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query"),
        not just the â€œzero mapperâ€. è¯·å‚é˜…è¯¥å‡½æ•°ä»¥è·å–å‚æ•°çš„è¯´æ˜ã€‚

    ` with_session  T0> ï¼ˆ T1> ä¼šè¯ T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›å°†ä½¿ç”¨ç»™å®š[`Session`](session_api.html#sqlalchemy.orm.session.Session "sqlalchemy.orm.session.Session")çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ã€‚

     `with_statement_hint`{.descname}(*text*, *dialect\_name='\*'*)[Â¶](#sqlalchemy.orm.query.Query.with_statement_hint "Permalink to this definition")
    :   å‘æ­¤[`Select`](core_selectable.html#sqlalchemy.sql.expression.Select "sqlalchemy.sql.expression.Select")æ·»åŠ è¯­å¥æç¤ºã€‚

        è¯¥æ–¹æ³•ç±»ä¼¼äº[`Select.with_hint()`](core_selectable.html#sqlalchemy.sql.expression.Select.with_hint "sqlalchemy.sql.expression.Select.with_hint")ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸éœ€è¦å•ç‹¬çš„è¡¨æ ¼ï¼Œè€Œæ˜¯ä½œä¸ºæ•´ä½“åº”ç”¨äºè¯¥è¯­å¥ã€‚

        è¯¥åŠŸèƒ½è°ƒç”¨[`Select.with_statement_hint()`](core_selectable.html#sqlalchemy.sql.expression.Select.with_statement_hint "sqlalchemy.sql.expression.Select.with_statement_hint")ã€‚

        ç‰ˆæœ¬1.0.0ä¸­çš„æ–°åŠŸèƒ½

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.with_hint()`](#sqlalchemy.orm.query.Query.with_hint "sqlalchemy.orm.query.Query.with_hint")

    ` with_transformation  T0> ï¼ˆ T1>  FN  T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   è¿”å›ç”±ç»™å®šå‡½æ•°è½¬æ¢çš„æ–°[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            def filter_something(criterion):
                def transform(q):
                    return q.filter(criterion)
                return transform

            q = q.with_transformation(filter_something(x==5))

        è¿™å…è®¸ä¸º[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡åˆ›å»ºä¸“é—¨çš„é…æ–¹ã€‚è¯·å‚é˜…[Building
        Transformers](extensions_hybrid.html#hybrid-transformers)ä¸­çš„ç¤ºä¾‹ã€‚

        New in version 0.7.4.

    ` yield_per  T0> ï¼ˆ T1> è®¡æ•° T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   ä¸€æ¬¡åªäº§ç”Ÿ`count`è¡Œã€‚

        è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯å½“è·å–éå¸¸å¤§çš„ç»“æœé›†ï¼ˆ\>
        10Kè¡Œï¼‰æ—¶ï¼Œåœ¨å­é›†åˆä¸­æ‰¹é‡ç»“æœå¹¶éƒ¨åˆ†ç”Ÿæˆç»“æœé›†ï¼Œä»¥ä¾¿Pythonè§£é‡Šå™¨ä¸éœ€è¦å£°æ˜éå¸¸å¤§çš„å†…å­˜åŒºåŸŸï¼Œè€—æ—¶å¹¶å¯¼è‡´è¿‡åº¦ä½¿ç”¨å†…å­˜ã€‚å½“ä½¿ç”¨åˆé€‚çš„yield-perè®¾ç½®ï¼ˆä¾‹å¦‚ï¼Œå¤§çº¦1000ï¼‰æ—¶ï¼Œå³ä½¿ä½¿ç”¨ç¼“å†²è¡Œï¼ˆæœ€å¤šï¼‰çš„DBAPIï¼Œä»æˆåƒä¸Šä¸‡è¡Œæå–æ•°æ®çš„æ€§èƒ½é€šå¸¸ä¹Ÿä¼šæé«˜ä¸€å€ã€‚

        [`Query.yield_per()`](#sqlalchemy.orm.query.Query.yield_per "sqlalchemy.orm.query.Query.yield_per")æ–¹æ³•**ä¸å¤§å¤šæ•°çƒ­åˆ‡åŠ è½½æ–¹æ¡ˆï¼ˆåŒ…æ‹¬å­æŸ¥è¯¢åŠ è½½å’Œé›†åˆåŠ è½½**ï¼‰ä¸å…¼å®¹ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œç¦ç”¨é¢„å…ˆåŠ è½½å¯èƒ½æ˜¯æœ‰å¸®åŠ©çš„ï¼Œæ— è®ºæ˜¯æ— æ¡ä»¶åœ°ä½¿ç”¨[`Query.enable_eagerloads()`](#sqlalchemy.orm.query.Query.enable_eagerloads "sqlalchemy.orm.query.Query.enable_eagerloads")ï¼š

            q = sess.query(Object).yield_per(100).enable_eagerloads(False)

        æˆ–è€…æ›´æœ‰é€‰æ‹©åœ°ä½¿ç”¨[`lazyload()`](loading_relationships.html#sqlalchemy.orm.lazyload "sqlalchemy.orm.lazyload")ï¼›ä¾‹å¦‚ç”¨æ˜Ÿå·æ¥æŒ‡å®šé»˜è®¤çš„åŠ è½½ç¨‹åºæ–¹æ¡ˆï¼š

            q = sess.query(Object).yield_per(100).\
                options(lazyload('*'), joinedload(Object.some_related))

        è­¦å‘Š

        è°¨æ…ä½¿ç”¨æ­¤æ–¹æ³•ï¼›å¦‚æœåŒä¸€ä¸ªå®ä¾‹å­˜åœ¨äºå¤šä¸ªæ‰¹æ¬¡çš„è¡Œä¸­ï¼Œåˆ™æœ€ç»ˆç”¨æˆ·å¯¹å±æ€§çš„æ›´æ”¹å°†è¢«è¦†ç›–ã€‚

        ç‰¹åˆ«æ˜¯ï¼Œé€šå¸¸ä¸å¯èƒ½åœ¨æ€¥åˆ‡åŠ è½½çš„é›†åˆï¼ˆå³ä»»ä½•lazy
        ='joined'æˆ–'subquery'ï¼‰ä¸­ä½¿ç”¨æ­¤è®¾ç½®ï¼Œå› ä¸ºåœ¨åç»­ç»“æœæ‰¹å¤„ç†ä¸­é‡åˆ°æ–°é›†åˆæ—¶ï¼Œè¿™äº›é›†åˆå°†è¢«æ¸…é™¤ã€‚åœ¨åŠ è½½â€œå­æŸ¥è¯¢â€çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¡Œçš„å®Œæ•´ç»“æœè¢«å–å‡ºï¼Œè¿™é€šå¸¸ä¼šæŸå®³[`yield_per()`](#sqlalchemy.orm.query.Query.yield_per "sqlalchemy.orm.query.Query.yield_per")çš„ç”¨é€”ã€‚

        Also note that while [`yield_per()`](#sqlalchemy.orm.query.Query.yield_per "sqlalchemy.orm.query.Query.yield_per")
        will set the `stream_results` execution
        option to True, currently this is only understood by
        [`psycopg2`{.xref .py .py-mod .docutils
        .literal}](dialects_postgresql.html#module-sqlalchemy.dialects.postgresql.psycopg2 "sqlalchemy.dialects.postgresql.psycopg2")
        dialect which will stream results using server side cursors
        instead of pre-buffer all rows for this query. å…¶ä»–DBAPI
        **åœ¨ä½¿å…¶å¯ç”¨ä¹‹å‰é¢„ç¼“å†²æ‰€æœ‰è¡Œ**ã€‚åŸå§‹æ•°æ®åº“è¡Œçš„å†…å­˜ä½¿ç”¨é‡è¿œå°äºORMæ˜ å°„å¯¹è±¡çš„å†…å­˜ä½¿ç”¨é‡ï¼Œä½†åœ¨è¿›è¡ŒåŸºå‡†æµ‹è¯•æ—¶åº”è¯¥å°†å…¶è€ƒè™‘åœ¨å†…ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Query.enable_eagerloads()`](#sqlalchemy.orm.query.Query.enable_eagerloads "sqlalchemy.orm.query.Query.enable_eagerloads")

ç‰¹å®šäºORMçš„æŸ¥è¯¢æ„é€ [Â¶](#orm-specific-query-constructs "Permalink to this headline")
-----------------------------------------------------------------------------------

 `sqlalchemy.orm.`{.descclassname}`aliased`{.descname}(*element*, *alias=None*, *name=None*, *flat=False*, *adapt\_on\_names=False*)[Â¶](#sqlalchemy.orm.aliased "Permalink to this definition")
:   ç”Ÿæˆç»™å®šå…ƒç´ çš„åˆ«åï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")å®ä¾‹ã€‚

    ä¾‹å¦‚ã€‚ï¼š

        my_alias = aliased(MyClass)

        session.query(MyClass, my_alias).filter(MyClass.id > my_alias.id)

    [`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")å‡½æ•°ç”¨äºåˆ›å»ºæ˜ å°„ç±»åˆ°æ–°é€‰æ‹©å¯¹è±¡çš„ä¸´æ—¶æ˜ å°„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨[`FromClause.alias()`](core_selectable.html#sqlalchemy.sql.expression.FromClause.alias "sqlalchemy.sql.expression.FromClause.alias")æ–¹æ³•ä»å¯æ­£å¸¸æ˜ å°„çš„å¯é€‰é¡¹ï¼ˆé€šå¸¸ä¸º[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")ï¼‰ç”Ÿæˆå¯é€‰é¡¹ã€‚ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")å°†è¯¥ç±»é“¾æ¥åˆ°æ–°çš„[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")è¯­å¥ã€‚æ­¤å¤–ï¼Œ[`with_polymorphic()`](inheritance.html#sqlalchemy.orm.with_polymorphic "sqlalchemy.orm.with_polymorphic")å‡½æ•°æ˜¯[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")çš„ä¸€ä¸ªå˜ä½“ï¼Œæ—¨åœ¨æŒ‡å®šæ‰€è°“çš„â€œå¤šæ€å¯é€‰â€ï¼Œå®ƒå¯¹åº”äºå¤šä¸ªè”åˆçš„è”åˆ
    - ä¸€æ¬¡æ€§ç»§æ‰¿å­ç±»ã€‚

    ä¸ºæ–¹ä¾¿èµ·è§ï¼Œ[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")å‡½æ•°è¿˜æ¥å—æ™®é€šçš„[`FromClause`](core_selectable.html#sqlalchemy.sql.expression.FromClause "sqlalchemy.sql.expression.FromClause")ç»“æ„ï¼Œå¦‚[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")æˆ–[`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")æ„é€ ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå°†åœ¨å¯¹è±¡ä¸Šè°ƒç”¨[`FromClause.alias()`](core_selectable.html#sqlalchemy.sql.expression.FromClause.alias "sqlalchemy.sql.expression.FromClause.alias")æ–¹æ³•ï¼Œå¹¶è¿”å›æ–°çš„[`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›çš„[`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")ä¸æ˜¯ORMæ˜ å°„çš„ã€‚

    å‚æ•°ï¼š

    -   **å…ƒç´ ** [Â¶](#sqlalchemy.orm.aliased.params.element) -
        å…ƒç´ ä¸ºåˆ«åã€‚é€šå¸¸æ˜¯ä¸€ä¸ªæ˜ å°„ç±»ï¼Œä½†ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª[`FromClause`](core_selectable.html#sqlalchemy.sql.expression.FromClause "sqlalchemy.sql.expression.FromClause")å…ƒç´ ã€‚
    -   **åˆ«å** [Â¶](#sqlalchemy.orm.aliased.params.alias) -
        å¯é€‰å¯é€‰å•å…ƒä»¥å°†å…ƒç´ æ˜ å°„åˆ°ã€‚This should normally be a
        [`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")
        object corresponding to the [`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")
        to which the class is mapped, or to a [`select()`](core_selectable.html#sqlalchemy.sql.expression.select "sqlalchemy.sql.expression.select")
        construct that is compatible with the mapping.
        é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šç”Ÿæˆæ˜ å°„è¡¨çš„ç®€å•åŒ¿ååˆ«åã€‚
    -   **name**[Â¶](#sqlalchemy.orm.aliased.params.name) â€“ optional
        string name to use for the alias, if not specified by the
        `alias` parameter.
        é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥åç§°æ„æˆäº†å¯é€šè¿‡[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡è¿”å›çš„å…ƒç»„è®¿é—®çš„å±æ€§åç§°ã€‚
    -   **flat** [Â¶](#sqlalchemy.orm.aliased.params.flat) -

        å¸ƒå°”å€¼å°†ä¼ é€’ç»™[`FromClause.alias()`](core_selectable.html#sqlalchemy.sql.expression.FromClause.alias "sqlalchemy.sql.expression.FromClause.alias")è°ƒç”¨ï¼Œä»¥ä¾¿[`Join`](core_selectable.html#sqlalchemy.sql.expression.Join "sqlalchemy.sql.expression.Join")å¯¹è±¡çš„åˆ«åä¸åŒ…å«å°é—­çš„SELECTã€‚è¿™å¯ä»¥åœ¨è®¸å¤šæƒ…å†µä¸‹å¯¼è‡´æ›´é«˜æ•ˆçš„æŸ¥è¯¢ã€‚é’ˆå¯¹åµŒå¥—JOINçš„JOINå°†è¢«é‡å†™ä¸ºé’ˆå¯¹ä¸æ”¯æŒæ­¤è¯­æ³•çš„åç«¯ä¸Šçš„åˆ«åSELECTå­æŸ¥è¯¢çš„JOINã€‚

        ç‰ˆæœ¬0.9.0ä¸­çš„æ–°åŠŸèƒ½

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Join.alias()`](core_selectable.html#sqlalchemy.sql.expression.Join.alias "sqlalchemy.sql.expression.Join.alias")

    -   **adapt\_on\_names**
        [Â¶](#sqlalchemy.orm.aliased.params.adapt_on_names) -

        å¦‚æœä¸ºTrueï¼Œåˆ™åœ¨å°†ORMå®ä½“çš„æ˜ å°„åˆ—æ˜ å°„åˆ°ç»™å®šå¯é€‰åˆ—è¡¨çš„æ˜ å°„åˆ—æ—¶å°†ä½¿ç”¨æ›´è‡ªç”±çš„â€œåŒ¹é…â€
        -
        å¦‚æœç»™å®šå¯é€‰åˆ—ä¸å…·æœ‰ä¸ä¸€ä¸ªåˆ—ç›¸å¯¹åº”çš„åˆ—ï¼Œåˆ™å°†æ‰§è¡ŒåŸºäºåç§°çš„åŒ¹é…åœ¨å®ä½“ä¸Šã€‚è¿™ä¸ªç”¨ä¾‹å°±æ˜¯å°†ä¸€ä¸ªå®ä½“ä¸æŸäº›æ´¾ç”Ÿå¯é€‰é¡¹ï¼ˆä¾‹å¦‚ä½¿ç”¨é›†åˆå‡½æ•°çš„å®ä½“ï¼‰ç›¸å…³è”ï¼š

            class UnitPrice(Base):
                __tablename__ = 'unit_price'
                ...
                unit_id = Column(Integer)
                price = Column(Numeric)

            aggregated_unit_price = Session.query(
                                        func.sum(UnitPrice.price).label('price')
                                    ).group_by(UnitPrice.unit_id).subquery()

            aggregated_unit_price = aliased(UnitPrice,
                        alias=aggregated_unit_price, adapt_on_names=True)

        ä»¥ä¸Šï¼Œå¼•ç”¨`.price`çš„`aggregated_unit_price`ä¸Šçš„å‡½æ•°å°†è¿”å›`fund.sum(UnitPrice.price).label('price')`åˆ—ï¼Œå› ä¸ºå®ƒä¸åç§°â€œä»·æ ¼â€ç›¸åŒ¹é…ã€‚é€šå¸¸ï¼Œâ€œä»·æ ¼â€å‡½æ•°ä¸å®é™…çš„`UnitPrice.price`åˆ—æ²¡æœ‰ä»»ä½•â€œåˆ—å¯¹åº”â€ï¼Œå› ä¸ºå®ƒä¸æ˜¯åŸå§‹ä»£ç†ã€‚

        New in version 0.7.3.

*class* `sqlalchemy.orm.utilã€‚`{.descclassname} `AliasedClass`{.descname} ï¼ˆ *cls*ï¼Œ*åˆ«å= None*ï¼Œ*name = None*ï¼Œ*flat = False*ï¼Œ*adapt\_on\_names = False*ï¼Œ*with\_polymorphic\_mappers =() t9 \>ï¼Œ*with\_polymorphic\_discriminator = None*ï¼Œ*base\_alias = None*ï¼Œ*use\_mapper\_path = False* ï¼‰ [](#sqlalchemy.orm.util.AliasedClass "Permalink to this definition")*
:   è¡¨ç¤ºç”¨äºQueryçš„æ˜ å°„ç±»çš„â€œåˆ«åâ€å½¢å¼ã€‚

    è¯¥å¯¹è±¡æ˜¯[`sqlalchemy.sql.expression.alias()`](core_selectable.html#sqlalchemy.sql.expression.alias "sqlalchemy.sql.expression.alias")æ„é€ çš„ORMç­‰ä»·ç‰©ï¼Œå®ƒä½¿ç”¨\_\_getattr\_\_æ–¹æ¡ˆæ¨¡ä»¿æ˜ å°„ç±»å¹¶ç»´æŠ¤å¯¹çœŸå®[`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")å¯¹è±¡çš„å¼•ç”¨ã€‚

    ç”¨æ³•æ˜¯é€šè¿‡[`orm.aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")å‡½æ•°ï¼Œæˆ–è€…é€šè¿‡[`orm.with_polymorphic()`](inheritance.html#sqlalchemy.orm.with_polymorphic "sqlalchemy.orm.with_polymorphic")å‡½æ•°ã€‚

    ç”¨æ³•ç¤ºä¾‹ï¼š

        # find all pairs of users with the same name
        user_alias = aliased(User)
        session.query(User, user_alias).\
                        join((user_alias, User.id > user_alias.id)).\
                        filter(User.name==user_alias.name)

    ç»“æœå¯¹è±¡æ˜¯[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")çš„ä¸€ä¸ªå®ä¾‹ã€‚è¯¥å¯¹è±¡å®ç°äº†ä¸€ä¸ªå±æ€§æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆäº§ç”Ÿä¸åŸå§‹æ˜ å°„ç±»ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•æ¥å£ï¼Œå…è®¸[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")ä¸åŸå§‹ç±»ä¸­çš„ä»»ä½•å±æ€§æŠ€æœ¯å…¼å®¹ï¼ŒåŒ…æ‹¬æ··åˆå±æ€§ï¼ˆå‚è§[Hybrid
    Attributes](extensions_hybrid.html)ï¼‰ã€‚

    å¯ä»¥ä½¿ç”¨[`inspect()`](core_inspection.html#sqlalchemy.inspection.inspect "sqlalchemy.inspection.inspect")æ£€æŸ¥[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")çš„åº•å±‚[`Mapper`](mapping_api.html#sqlalchemy.orm.mapper.Mapper "sqlalchemy.orm.mapper.Mapper")ï¼Œåˆ«åå¯é€‰å’Œå…¶ä»–ä¿¡æ¯ï¼š

        from sqlalchemy import inspect
        my_alias = aliased(MyClass)
        insp = inspect(my_alias)

    å¾—åˆ°çš„æ£€æŸ¥å¯¹è±¡æ˜¯[`AliasedInsp`](#sqlalchemy.orm.util.AliasedInsp "sqlalchemy.orm.util.AliasedInsp")çš„å®ä¾‹ã€‚

    æœ‰å…³æ„é€ å‚æ•°çš„æè¿°ï¼Œè¯·å‚é˜…[`aliased()`](#sqlalchemy.orm.aliased "sqlalchemy.orm.aliased")å’Œ[`with_polymorphic()`](inheritance.html#sqlalchemy.orm.with_polymorphic "sqlalchemy.orm.with_polymorphic")ã€‚

 *class*`sqlalchemy.orm.util.`{.descclassname}`AliasedInsp`{.descname}(*entity*, *mapper*, *selectable*, *name*, *with\_polymorphic\_mappers*, *polymorphic\_on*, *\_base\_alias*, *\_use\_mapper\_path*, *adapt\_on\_names*)[Â¶](#sqlalchemy.orm.util.AliasedInsp "Permalink to this definition")
:   åŸºç¡€ï¼š[`sqlalchemy.orm.base.InspectionAttr`](internals.html#sqlalchemy.orm.base.InspectionAttr "sqlalchemy.orm.base.InspectionAttr")

    ä¸º[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")å¯¹è±¡æä¾›æ£€æŸ¥ç•Œé¢ã€‚

    ç»™[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")ä½¿ç”¨[`inspect()`](core_inspection.html#sqlalchemy.inspection.inspect "sqlalchemy.inspection.inspect")å‡½æ•°è¿”å›[`AliasedInsp`](#sqlalchemy.orm.util.AliasedInsp "sqlalchemy.orm.util.AliasedInsp")å¯¹è±¡ï¼š

        from sqlalchemy import inspect
        from sqlalchemy.orm import aliased

        my_alias = aliased(MyMappedClass)
        insp = inspect(my_alias)

    [`AliasedInsp`](#sqlalchemy.orm.util.AliasedInsp "sqlalchemy.orm.util.AliasedInsp")ä¸Šçš„å±æ€§åŒ…æ‹¬ï¼š

    -   `entity` - ä»£è¡¨[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")ã€‚
    -   `mapper` - æ˜ å°„åŸºç¡€ç±»çš„[`Mapper`](mapping_api.html#sqlalchemy.orm.mapper.Mapper "sqlalchemy.orm.mapper.Mapper")ã€‚
    -   `selectable` - [`Alias`](core_selectable.html#sqlalchemy.sql.expression.Alias "sqlalchemy.sql.expression.Alias")ç»“æ„æœ€ç»ˆä»£è¡¨åˆ«å[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")æˆ–[`Select`](core_selectable.html#sqlalchemy.sql.expression.Select "sqlalchemy.sql.expression.Select")ç»“æ„ã€‚
    -   `name` - åˆ«åçš„åç§°ã€‚å½“ä»[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¿”å›ç»“æœå…ƒç»„æ—¶ï¼Œå®ƒä¹Ÿç”¨ä½œå±æ€§åç§°ã€‚
    -   `with_polymorphic_mappers` - collection of
        [`Mapper`](mapping_api.html#sqlalchemy.orm.mapper.Mapper "sqlalchemy.orm.mapper.Mapper")
        objects indicating all those mappers expressed in the select
        construct for the [`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass").
    -   `polymorphic_on` -
        å°†ç”¨ä½œå¤šæ€åŠ è½½çš„â€œé‰´åˆ«ç¬¦â€çš„å¤‡ç”¨åˆ—æˆ–SQLè¡¨è¾¾å¼ã€‚

    ä¹Ÿå¯ä»¥çœ‹çœ‹

    [Runtime Inspection API](core_inspection.html)

*class* `sqlalchemy.orm.queryã€‚`{.descclassname} `Bundle`{.descname} ï¼ˆ *name*ï¼Œ*\* exprs*ï¼Œ*\*\* kw* ï¼‰ [Â¶](#sqlalchemy.orm.query.Bundle "Permalink to this definition")
:   åŸºç¡€ï¼š[`sqlalchemy.orm.base.InspectionAttr`](internals.html#sqlalchemy.orm.base.InspectionAttr "sqlalchemy.orm.base.InspectionAttr")

    ç”±[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸‹è¿”å›çš„ä¸€ç»„SQLè¡¨è¾¾å¼ã€‚

    [`Bundle`](#sqlalchemy.orm.query.Bundle "sqlalchemy.orm.query.Bundle")æœ¬è´¨ä¸Šå…è®¸åµŒå¥—åŸºäºåˆ—çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡è¿”å›çš„åŸºäºå…ƒç»„çš„ç»“æœã€‚å®ƒä¹Ÿå¯ä»¥é€šè¿‡ç®€å•çš„å­ç±»æ¥æ‰©å±•ï¼Œå…¶ä¸­ä¸»è¦çš„è¦†ç›–èƒ½åŠ›æ˜¯åº”è¯¥å¦‚ä½•è¿”å›è¡¨è¾¾å¼é›†åˆï¼Œå…è®¸åå¤„ç†ä»¥åŠè‡ªå®šä¹‰è¿”å›ç±»å‹ï¼Œè€Œä¸æ¶‰åŠORMèº«ä»½æ˜ å°„ç±»ã€‚

    ç‰ˆæœ¬0.9.0ä¸­çš„æ–°åŠŸèƒ½

    ä¹Ÿå¯ä»¥çœ‹çœ‹

    [Column Bundles](loading_columns.html#bundles)

     `__init__`{.descname}(*name*, *\*exprs*, *\*\*kw*)[Â¶](#sqlalchemy.orm.query.Bundle.__init__ "Permalink to this definition")
    :   æ„å»ºä¸€ä¸ªæ–°çš„[`Bundle`](#sqlalchemy.orm.query.Bundle "sqlalchemy.orm.query.Bundle")ã€‚

        ä¾‹å¦‚ã€‚ï¼š

            bn = Bundle("mybundle", MyClass.x, MyClass.y)

            for row in session.query(bn).filter(
                    bn.c.x == 5).filter(bn.c.y == 4):
                print(row.mybundle.x, row.mybundle.y)

        å‚æ•°ï¼š

        -   **åç§°** [Â¶](#sqlalchemy.orm.query.Bundle.params.name) -
            åŒ…çš„åç§°ã€‚
        -   **\* exprs** [Â¶](#sqlalchemy.orm.query.Bundle.params.*exprs)
            - åŒ…å«è¯¥åŒ…çš„åˆ—æˆ–SQLè¡¨è¾¾å¼ã€‚
        -   **single\_entity=False**[Â¶](#sqlalchemy.orm.query.Bundle.params.single_entity)
            â€“ if True, rows for this [`Bundle`](#sqlalchemy.orm.query.Bundle "sqlalchemy.orm.query.Bundle")
            can be returned as a â€œsingle entityâ€ outside of any
            enclosing tuple in the same manner as a mapped entity.

    `c`{.descname} *=æ— * [Â¶](#sqlalchemy.orm.query.Bundle.c "Permalink to this definition")
    :   [`Bundle.columns`](#sqlalchemy.orm.query.Bundle.columns "sqlalchemy.orm.query.Bundle.columns")çš„åˆ«åã€‚

    `åˆ—`{.descname} *=æ— * [Â¶](#sqlalchemy.orm.query.Bundle.columns "Permalink to this definition")
    :   ç”±[`Bundle`](#sqlalchemy.orm.query.Bundle "sqlalchemy.orm.query.Bundle")å¼•ç”¨çš„SQLè¡¨è¾¾å¼çš„åç§°ç©ºé—´ã€‚

        > ä¾‹å¦‚ã€‚ï¼š
        >
        >     bn = Bundle("mybundle", MyClass.x, MyClass.y)
        >
        >     q = sess.query(bn).filter(bn.c.x == 5)
        >
        > æ†ç»‘åµŒå¥—ä¹Ÿæ”¯æŒï¼š
        >
        >     b1 = Bundle("b1",
        >             Bundle('b2', MyClass.a, MyClass.b),
        >             Bundle('b3', MyClass.x, MyClass.y)
        >         )
        >
        >     q = sess.query(b1).filter(
        >         b1.c.b2.c.a == 5).filter(b1.c.b3.c.y == 9)

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`Bundle.c`](#sqlalchemy.orm.query.Bundle.c "sqlalchemy.orm.query.Bundle.c")

    `create_row_processor`{.descname} ï¼ˆ *query*ï¼Œ*procs*ï¼Œ*æ ‡ç­¾* ï¼‰ [Â¶ T6\>](#sqlalchemy.orm.query.Bundle.create_row_processor "Permalink to this definition")
    :   ä¸ºè¿™ä¸ª[`Bundle`](#sqlalchemy.orm.query.Bundle "sqlalchemy.orm.query.Bundle")äº§ç”Ÿâ€œè¡Œå¤„ç†â€åŠŸèƒ½ã€‚

        å¯èƒ½è¢«å­ç±»è¦†ç›–ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [Column Bundles](loading_columns.html#bundles) -
        åŒ…å«å­ç±»çš„ç¤ºä¾‹ã€‚

    `æ ‡ç­¾ T0> ï¼ˆ T1> åç§° T2> ï¼‰ T3> Â¶ T4>`{.descname}
    :   æä¾›è¿™ä¸ª[`Bundle`](#sqlalchemy.orm.query.Bundle "sqlalchemy.orm.query.Bundle")çš„å‰¯æœ¬ï¼Œä¼ é€’ä¸€ä¸ªæ–°æ ‡ç­¾ã€‚

    `single_entity`{.descname} *= False* [Â¶](#sqlalchemy.orm.query.Bundle.single_entity "Permalink to this definition")
    :   å¦‚æœä¸ºTrueï¼Œåˆ™å¯¹å•ä¸ªBundleçš„æŸ¥è¯¢å°†ä½œä¸ºå•ä¸ªå®ä½“è¿”å›ï¼Œè€Œä¸æ˜¯é”®æ§å…ƒç»„å†…çš„å…ƒç´ ã€‚

*class* `sqlalchemy.utilã€‚`{.descclassname} `KeyedTuple`{.descname} [Â¶](#sqlalchemy.util.KeyedTuple "Permalink to this definition")
:   åŸºç¡€ï¼š`sqlalchemy.util._collections.AbstractKeyedTuple`

    `tuple`å­ç±»æ·»åŠ æ ‡ç­¾åç§°ã€‚

    ä¾‹å¦‚ã€‚ï¼š

        >>> k = KeyedTuple([1, 2, 3], labels=["one", "two", "three"])
        >>> k.one
        1
        >>> k.two
        2

    ç”±[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")è¿”å›çš„åŒ…å«å¤šä¸ªORMå®ä½“å’Œ/æˆ–åˆ—è¡¨è¾¾å¼çš„ç»“æœè¡Œä½¿ç”¨æ­¤ç±»æ¥è¿”å›è¡Œã€‚

    [`KeyedTuple`](#sqlalchemy.util.KeyedTuple "sqlalchemy.util.KeyedTuple")è¡¨ç°å‡ºä¸Pythonæ ‡å‡†åº“ä¸­æä¾›çš„`collections.namedtuple()`ç»“æ„ç±»ä¼¼çš„è¡Œä¸ºï¼Œä½†ç»“æ„å´éå¸¸ä¸åŒã€‚ä¸`collections.namedtuple()`ä¸åŒï¼Œ[`KeyedTuple`](#sqlalchemy.util.KeyedTuple "sqlalchemy.util.KeyedTuple")ä¸ä¾èµ–äºåˆ›å»ºè‡ªå®šä¹‰å­ç±»å‹æ¥è¡¨ç¤ºä¸€ç³»åˆ—æ–°çš„é”®ï¼Œè€Œæ˜¯æ¯ä¸ª[`KeyedTuple`](#sqlalchemy.util.KeyedTuple "sqlalchemy.util.KeyedTuple")`collections.namedtuple()`çš„å­ç±»å‹æ–¹æ³•å¼•å…¥äº†æ˜¾ç€çš„å¤æ‚æ€§å’Œæ€§èƒ½å¼€é”€ï¼Œè¿™å¯¹[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")å¯¹è±¡çš„ç”¨ä¾‹æ¥è¯´ä¸æ˜¯å¿…éœ€çš„ã€‚

    Changed in version 0.8: Compatibility methods with
    `collections.namedtuple()` have been added
    including [`KeyedTuple._fields`{](#sqlalchemy.util.KeyedTuple._fields "sqlalchemy.util.KeyedTuple._fields")
    and [`KeyedTuple._asdict()`](#sqlalchemy.util.KeyedTuple._asdict "sqlalchemy.util.KeyedTuple._asdict").

    ä¹Ÿå¯ä»¥çœ‹çœ‹

    [Querying](tutorial.html#ormtutorial-querying)

    ` _asdict  T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   å°†[`KeyedTuple`](#sqlalchemy.util.KeyedTuple "sqlalchemy.util.KeyedTuple")çš„å†…å®¹ä½œä¸ºå­—å…¸è¿”å›ã€‚

        è¯¥æ–¹æ³•æä¾›äº†ä¸`collections.namedtuple()`çš„å…¼å®¹æ€§ï¼Œä¸åŒä¹‹å¤„åœ¨äºè¿”å›çš„å­—å…¸æ˜¯**not**çš„é¡ºåºã€‚

        0.8ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½

    ` _fields  T0> Â¶ T1>`{.descname}
    :   è¿”å›æ­¤[`KeyedTuple`](#sqlalchemy.util.KeyedTuple "sqlalchemy.util.KeyedTuple")çš„å­—ç¬¦ä¸²é”®åç§°çš„å…ƒç»„ã€‚

        è¯¥æ–¹æ³•æä¾›äº†ä¸`collections.namedtuple()`çš„å…¼å®¹æ€§ã€‚

        0.8ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`KeyedTuple.keys()`](#sqlalchemy.util.KeyedTuple.keys "sqlalchemy.util.KeyedTuple.keys")

    `é”® T0> ï¼ˆ T1> ï¼‰ T2> Â¶ T3>`{.descname}
    :   *inherited from the* `keys()` *method of* `AbstractKeyedTuple`{.xref .py .py-class
        .docutils .literal}

        è¿”å›æ­¤[`KeyedTuple`](#sqlalchemy.util.KeyedTuple "sqlalchemy.util.KeyedTuple")çš„å­—ç¬¦ä¸²é”®åç§°åˆ—è¡¨ã€‚

        ä¹Ÿå¯ä»¥çœ‹çœ‹

        [`KeyedTuple._fields`](#sqlalchemy.util.KeyedTuple._fields "sqlalchemy.util.KeyedTuple._fields")

 *class*`sqlalchemy.orm.strategy_options.`{.descclassname}`Load`{.descname}(*entity*)[Â¶](#sqlalchemy.orm.strategy_options.Load "Permalink to this definition")
:   åŸºç¡€ï¼š`sqlalchemy.sql.expression.Generative`ï¼Œ`sqlalchemy.orm.interfaces.MapperOption`

    è¡¨ç¤ºåŠ è½½å™¨é€‰é¡¹ï¼Œå®ƒä¿®æ”¹[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„çŠ¶æ€ä»¥å½±å“å„ç§æ˜ å°„å±æ€§çš„åŠ è½½æ–¹å¼ã€‚

    0.9.0ç‰ˆæ–°å¢ï¼š `Load()`ç³»ç»Ÿæ˜¯ç°æœ‰åŠ è½½ç¨‹åºé€‰é¡¹ç³»ç»Ÿçš„æ–°åŸºç¡€ï¼ŒåŒ…æ‹¬[`orm.joinedload()`](loading_relationships.html#sqlalchemy.orm.joinedload "sqlalchemy.orm.joinedload")ï¼Œ[`orm.defer()`](loading_columns.html#sqlalchemy.orm.defer "sqlalchemy.orm.defer")ç­‰ç­‰ã€‚ç‰¹åˆ«æ˜¯ï¼Œå®ƒå¼•å…¥äº†ä¸€ç§æ–°çš„æ–¹æ³•é“¾æ¥ç³»ç»Ÿï¼Œå®ƒå–ä»£äº†å¯¹ç‚¹åˆ†éš”è·¯å¾„çš„éœ€æ±‚ä»¥åŠè¯¸å¦‚[`orm.joinedload_all()`](loading_relationships.html#sqlalchemy.orm.joinedload_all "sqlalchemy.orm.joinedload_all")ä¹‹ç±»çš„â€œ\_all()â€é€‰é¡¹ã€‚

    ä¸€ä¸ª[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡å¯ä»¥ç›´æ¥æˆ–é—´æ¥ä½¿ç”¨ã€‚ç›´æ¥ä½¿ç”¨ä¸€ä¸ªï¼Œç»™å®šçˆ¶ç±»çš„å®ä¾‹ã€‚åœ¨å¤„ç†å…·æœ‰å¤šä¸ªå®ä½“çš„[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")æ—¶ï¼Œæˆ–è€…åœ¨ç”Ÿæˆå¯ä¸€èˆ¬åº”ç”¨äºä»»ä½•æŸ¥è¯¢ç±»å‹çš„åŠ è½½ç¨‹åºé€‰é¡¹æ—¶ï¼Œè¿™ç§ä½¿ç”¨æ–¹å¼å¾ˆæœ‰ç”¨ï¼š

        myopt = Load(MyClass).joinedload("widgets")

    ä¸Šé¢çš„`myopt`ç°åœ¨å¯ä»¥ç”¨äº[`Query.options()`](#sqlalchemy.orm.query.Query.options "sqlalchemy.orm.query.Query.options")ï¼š

        session.query(MyClass).options(myopt)

    The [`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")
    construct is invoked indirectly whenever one makes use of the
    various loader options that are present in
    `sqlalchemy.orm`, including options such as
    [`orm.joinedload()`](loading_relationships.html#sqlalchemy.orm.joinedload "sqlalchemy.orm.joinedload"),
    [`orm.defer()`](loading_columns.html#sqlalchemy.orm.defer "sqlalchemy.orm.defer"),
    [`orm.subqueryload()`](loading_relationships.html#sqlalchemy.orm.subqueryload "sqlalchemy.orm.subqueryload"),
    and all the rest. è¿™äº›ç»“æ„äº§ç”Ÿä¸€ä¸ªâ€œåŒ¿åâ€å½¢å¼çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ï¼Œç”¨äºè·Ÿè¸ªå±æ€§å’Œé€‰é¡¹ï¼Œä½†ç›´åˆ°å®ƒä¸çˆ¶å¯¹è±¡[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")ç›¸å…³è”æ—¶æ‰ä¼šé“¾æ¥åˆ°çˆ¶ç±»ã€‚

        # produce "unbound" Load object
        myopt = joinedload("widgets")

        # when applied using options(), the option is "bound" to the
        # class observed in the given query, e.g. MyClass
        session.query(MyClass).options(myopt)

    æ— è®ºä½¿ç”¨ç›´æ¥è¿˜æ˜¯é—´æ¥æ ·å¼ï¼Œè¿”å›çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ç°åœ¨éƒ½è¡¨ç¤ºæ²¿ç€[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")çš„å®ä½“çš„ç‰¹å®šâ€œè·¯å¾„â€ã€‚è¿™ä¸ªè·¯å¾„å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„æ–¹æ³•é“¾å¼æ–¹æ³•æ¥éå†ã€‚å‡è®¾ä¸€ä¸ªç±»å±‚æ¬¡ç»“æ„å¦‚`User`ï¼Œ`User.addresses  - >ï¼†ltï¼› / t4> Address` ï¼ŒUser.orders - ï¼†gtï¼›
    è®¢å•å’Œ`Order.items  - ï¼†gtï¼› Item`ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨â€œè·¯å¾„â€ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸ŠæŒ‡å®šå„ç§åŠ è½½å™¨é€‰é¡¹ï¼š

        session.query(User).options(
                    joinedload("addresses"),
                    subqueryload("orders").joinedload("items")
                )

    åœ¨ä¸Šé¢ï¼Œ`addresses`é›†åˆå°†è¢«è¿æ¥åŠ è½½ï¼Œ`orders`é›†åˆå°†è¢«å­æŸ¥è¯¢åŠ è½½ï¼Œå¹¶ä¸”åœ¨è¯¥å­æŸ¥è¯¢ä¸­åŠ è½½`items`é›†åˆå°†è¢«è¿æ¥åŠ è½½ã€‚

    `baked_lazyload  tt> ï¼ˆ loadoptï¼Œattr ï¼‰ Â¶`{.descname}
    :   åº”ç”¨`orm.baked_lazyload()`é€‰é¡¹äº§ç”Ÿä¸€ä¸ªæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…`orm.baked_lazyload()`{.xref .py .py-func
        .docutils .literal}ã€‚

    `contains_eager`{.descname} ï¼ˆ *loadopt*ï¼Œ*attr*ï¼Œ*åˆ«å=æ— * T5\> [Â¶ T6\>](#sqlalchemy.orm.strategy_options.Load.contains_eager "Permalink to this definition")
    :   ä½¿ç”¨[`orm.contains_eager()`](loading_relationships.html#sqlalchemy.orm.contains_eager "sqlalchemy.orm.contains_eager")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.contains_eager()`](loading_relationships.html#sqlalchemy.orm.contains_eager "sqlalchemy.orm.contains_eager")ã€‚

     `defaultload`{.descname}(*loadopt*, *attr*)[Â¶](#sqlalchemy.orm.strategy_options.Load.defaultload "Permalink to this definition")
    :   åº”ç”¨[`orm.defaultload()`](loading_relationships.html#sqlalchemy.orm.defaultload "sqlalchemy.orm.defaultload")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.defaultload()`](loading_relationships.html#sqlalchemy.orm.defaultload "sqlalchemy.orm.defaultload")ã€‚

     `defer`{.descname}(*loadopt*, *key*)[Â¶](#sqlalchemy.orm.strategy_options.Load.defer "Permalink to this definition")
    :   åº”ç”¨[`orm.defer()`](loading_columns.html#sqlalchemy.orm.defer "sqlalchemy.orm.defer")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.defer()`](loading_columns.html#sqlalchemy.orm.defer "sqlalchemy.orm.defer")ã€‚

     `immediateload`{.descname}(*loadopt*, *attr*)[Â¶](#sqlalchemy.orm.strategy_options.Load.immediateload "Permalink to this definition")
    :   åº”ç”¨[`orm.immediateload()`](loading_relationships.html#sqlalchemy.orm.immediateload "sqlalchemy.orm.immediateload")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.immediateload()`](loading_relationships.html#sqlalchemy.orm.immediateload "sqlalchemy.orm.immediateload")ã€‚

     `joinedload`{.descname}(*loadopt*, *attr*, *innerjoin=None*)[Â¶](#sqlalchemy.orm.strategy_options.Load.joinedload "Permalink to this definition")
    :   åº”ç”¨[`orm.joinedload()`](loading_relationships.html#sqlalchemy.orm.joinedload "sqlalchemy.orm.joinedload")é€‰é¡¹äº§ç”Ÿä¸€ä¸ªæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.joinedload()`](loading_relationships.html#sqlalchemy.orm.joinedload "sqlalchemy.orm.joinedload")ã€‚

     `lazyload`{.descname}(*loadopt*, *attr*)[Â¶](#sqlalchemy.orm.strategy_options.Load.lazyload "Permalink to this definition")
    :   åº”ç”¨[`orm.lazyload()`](loading_relationships.html#sqlalchemy.orm.lazyload "sqlalchemy.orm.lazyload")é€‰é¡¹äº§ç”Ÿä¸€ä¸ªæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.lazyload()`](loading_relationships.html#sqlalchemy.orm.lazyload "sqlalchemy.orm.lazyload")ã€‚

     `load_only`{.descname}(*loadopt*, *\*attrs*)[Â¶](#sqlalchemy.orm.strategy_options.Load.load_only "Permalink to this definition")
    :   åº”ç”¨[`orm.load_only()`](loading_columns.html#sqlalchemy.orm.load_only "sqlalchemy.orm.load_only")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.load_only()`](loading_columns.html#sqlalchemy.orm.load_only "sqlalchemy.orm.load_only")ã€‚

    `noload`{.descname} ï¼ˆ *loadopt*ï¼Œ*attr* ï¼‰ [](#sqlalchemy.orm.strategy_options.Load.noload "Permalink to this definition")
    :   åº”ç”¨[`orm.noload()`](loading_relationships.html#sqlalchemy.orm.noload "sqlalchemy.orm.noload")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.noload()`](loading_relationships.html#sqlalchemy.orm.noload "sqlalchemy.orm.noload")ã€‚

     `raiseload`{.descname}(*loadopt*, *attr*)[Â¶](#sqlalchemy.orm.strategy_options.Load.raiseload "Permalink to this definition")
    :   åº”ç”¨[`orm.raiseload()`](loading_relationships.html#sqlalchemy.orm.raiseload "sqlalchemy.orm.raiseload")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.raiseload()`](loading_relationships.html#sqlalchemy.orm.raiseload "sqlalchemy.orm.raiseload")ã€‚

     `subqueryload`{.descname}(*loadopt*, *attr*)[Â¶](#sqlalchemy.orm.strategy_options.Load.subqueryload "Permalink to this definition")
    :   ä½¿ç”¨[`orm.subqueryload()`](loading_relationships.html#sqlalchemy.orm.subqueryload "sqlalchemy.orm.subqueryload")é€‰é¡¹ç”Ÿæˆæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.subqueryload()`](loading_relationships.html#sqlalchemy.orm.subqueryload "sqlalchemy.orm.subqueryload")ã€‚

    `undefer`{.descname} ï¼ˆ *loadopt*ï¼Œ*é”®* ï¼‰ [Â¶](#sqlalchemy.orm.strategy_options.Load.undefer "Permalink to this definition")
    :   åº”ç”¨[`orm.undefer()`](loading_columns.html#sqlalchemy.orm.undefer "sqlalchemy.orm.undefer")é€‰é¡¹äº§ç”Ÿä¸€ä¸ªæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.undefer()`](loading_columns.html#sqlalchemy.orm.undefer "sqlalchemy.orm.undefer")ã€‚

     `undefer_group`{.descname}(*loadopt*, *name*)[Â¶](#sqlalchemy.orm.strategy_options.Load.undefer_group "Permalink to this definition")
    :   åº”ç”¨[`orm.undefer_group()`](loading_columns.html#sqlalchemy.orm.undefer_group "sqlalchemy.orm.undefer_group")é€‰é¡¹äº§ç”Ÿä¸€ä¸ªæ–°çš„[`Load`](#sqlalchemy.orm.strategy_options.Load "sqlalchemy.orm.strategy_options.Load")å¯¹è±¡ã€‚

        æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜…[`orm.undefer_group()`](loading_columns.html#sqlalchemy.orm.undefer_group "sqlalchemy.orm.undefer_group")ã€‚

 `sqlalchemy.orm.`{.descclassname}`join`{.descname}(*left*, *right*, *onclause=None*, *isouter=False*, *full=False*, *join\_to\_left=None*)[Â¶](#sqlalchemy.orm.join "Permalink to this definition")
:   åœ¨å·¦è¾¹å’Œå³è¾¹çš„å­å¥ä¹‹é—´äº§ç”Ÿä¸€ä¸ªå†…éƒ¨è¿æ¥ã€‚

    [`orm.join()`](#sqlalchemy.orm.join "sqlalchemy.orm.join")æ˜¯[`sql.expression.join()`](core_selectable.html#sqlalchemy.sql.expression.join "sqlalchemy.sql.expression.join")æä¾›çš„æ ¸å¿ƒè¿æ¥æ¥å£çš„æ‰©å±•ï¼Œå…¶ä¸­å·¦å’Œå³é€‰æ‹©ç¬¦ä¸ä»…å¯ä»¥æ˜¯æ ¸å¿ƒå¯é€‰å¯¹è±¡å¦‚[`Table`](core_metadata.html#sqlalchemy.schema.Table "sqlalchemy.schema.Table")ï¼Œè¿˜æ˜ å°„äº†ç±»æˆ–[`AliasedClass`](#sqlalchemy.orm.util.AliasedClass "sqlalchemy.orm.util.AliasedClass")å®ä¾‹ã€‚â€œonâ€å­å¥å¯ä»¥æ˜¯SQLè¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼•ç”¨é…ç½®çš„[`relationship()`](relationship_api.html#sqlalchemy.orm.relationship "sqlalchemy.orm.relationship")çš„å±æ€§æˆ–å­—ç¬¦ä¸²åç§°ã€‚

    [`orm.join()`](#sqlalchemy.orm.join "sqlalchemy.orm.join") is not
    commonly needed in modern usage, as its functionality is
    encapsulated within that of the [`Query.join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")
    method, which features a significant amount of automation beyond
    [`orm.join()`](#sqlalchemy.orm.join "sqlalchemy.orm.join") by itself.
    ä½¿ç”¨[`Query`](#sqlalchemy.orm.query.Query "sqlalchemy.orm.query.Query")æ˜¾å¼ä½¿ç”¨[`orm.join()`](#sqlalchemy.orm.join "sqlalchemy.orm.join")æ¶‰åŠä½¿ç”¨[`Query.select_from()`](#sqlalchemy.orm.query.Query.select_from "sqlalchemy.orm.query.Query.select_from")æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

        from sqlalchemy.orm import join
        session.query(User).\
            select_from(join(User, Address, User.addresses)).\
            filter(Address.email_address=='foo@bar.com')

    åœ¨ç°ä»£SQLAlchemyä¸­ï¼Œä¸Šé¢çš„è¿æ¥å¯ä»¥å†™å¾—æ›´ç®€æ´ï¼š

        session.query(User).\
                join(User.addresses).\
                filter(Address.email_address=='foo@bar.com')

    è¯·å‚é˜…[`Query.join()`](#sqlalchemy.orm.query.Query.join "sqlalchemy.orm.query.Query.join")ä»¥è·å–æœ‰å…³ORMçº§åˆ«è¿æ¥çš„ç°ä»£ç”¨æ³•çš„ä¿¡æ¯ã€‚

    åœ¨ç‰ˆæœ¬0.8.1ä¸­æ›´æ”¹ï¼š - `join_to_left`å‚æ•°ä¸å†ä½¿ç”¨ï¼Œå¹¶ä¸”å·²å¼ƒç”¨ã€‚

 `sqlalchemy.orm.`{.descclassname}`outerjoin`{.descname}(*left*, *right*, *onclause=None*, *full=False*, *join\_to\_left=None*)[Â¶](#sqlalchemy.orm.outerjoin "Permalink to this definition")
:   åœ¨å·¦è¾¹å’Œå³è¾¹çš„å­å¥ä¹‹é—´äº§ç”Ÿä¸€ä¸ªå·¦å¤–è¿æ¥ã€‚

    è¿™æ˜¯[`orm.join()`](#sqlalchemy.orm.join "sqlalchemy.orm.join")å‡½æ•°çš„â€œå¤–éƒ¨è¿æ¥â€ç‰ˆæœ¬ï¼Œé™¤äº†ç”Ÿæˆä¸€ä¸ªOUTER
    JOINå¤–ï¼Œå…¶ç‰¹å¾ä¸å…¶ä»–è¡Œä¸ºç›¸åŒã€‚æœ‰å…³å…¶ä»–ä½¿ç”¨ç»†èŠ‚ï¼Œè¯·å‚é˜…è¯¥å‡½æ•°çš„æ–‡æ¡£ã€‚

 `sqlalchemy.orm.`{.descclassname}`with_parent`{.descname}(*instance*, *prop*)[Â¶](#sqlalchemy.orm.with_parent "Permalink to this definition")
:   ä½¿ç”¨å·²å»ºç«‹çš„[`relationship()`](relationship_api.html#sqlalchemy.orm.relationship "sqlalchemy.orm.relationship")é…ç½®åˆ›å»ºè¿‡æ»¤æ ‡å‡†ï¼Œå°†è¯¥æŸ¥è¯¢çš„ä¸»è¦å®ä½“ä¸ç»™å®šçš„ç›¸å…³å®ä¾‹ç›¸å…³è”ã€‚

    å‘ˆç°çš„SQLä¸å»¶è¿ŸåŠ è½½å™¨ä»è¯¥å±æ€§ä¸Šçš„ç»™å®šçˆ¶çº§è§¦å‘æ—¶æ‰€å‘ˆç°çš„ç›¸åŒï¼Œè¿™æ„å‘³ç€ä»Pythonä¸­çš„çˆ¶å¯¹è±¡è·å–é€‚å½“çš„çŠ¶æ€ï¼Œè€Œæ— éœ€åœ¨å‘ˆç°ä¸­å‘ˆç°è¿æ¥è‡³çˆ¶è¡¨çš„è¿æ¥å£°æ˜ã€‚

    åœ¨ç‰ˆæœ¬0.6.4ä¸­è¿›è¡Œäº†æ›´æ”¹ï¼šæ­¤æ–¹æ³•æ¥å—æ‰€æœ‰æŒä¹…çŠ¶æ€ä¸‹çš„çˆ¶å®ä¾‹ï¼ŒåŒ…æ‹¬ç¬æ€ï¼ŒæŒä¹…å’Œåˆ†ç¦»ã€‚åªæœ‰å¿…è¦çš„ä¸»é”®/å¤–é”®å±æ€§éœ€è¦å¡«å……ã€‚ä»¥å‰çš„ç‰ˆæœ¬ä¸é€‚ç”¨äºç¬æ€å®ä¾‹ã€‚

    å‚æ•°ï¼š

    -   **instance**[Â¶](#sqlalchemy.orm.with_parent.params.instance) â€“
        An instance which has some [`relationship()`](relationship_api.html#sqlalchemy.orm.relationship "sqlalchemy.orm.relationship").
    -   **property**[Â¶](#sqlalchemy.orm.with_parent.params.property) â€“
        String property name, or class-bound attribute, which indicates
        what relationship from the instance should be used to reconcile
        the parent/child relationship.



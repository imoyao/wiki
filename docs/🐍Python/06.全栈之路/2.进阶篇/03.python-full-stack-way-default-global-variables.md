---
title: Python æ ‡å‡†åº“ç³»åˆ—ä¹‹æ¨¡å—é»˜è®¤å…¨å±€å˜é‡

tags: 
  - ç¼–ç 
  - è£…é¥°å™¨
top: 3
categories: 
  - ğŸ’»å·¥ä½œ
  - ğŸPython
  - å…¨æ ˆä¹‹è·¯
  - è¿›é˜¶ç¯‡
date: 2020-05-23 18:21:46
permalink: /pages/82e6c8/
---
# Python æ ‡å‡†åº“ç³»åˆ—ä¹‹æ¨¡å—é»˜è®¤å…¨å±€å˜é‡

å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè‡ªå·±å†™çš„æ¨¡å—åï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å—æœ¬èº«å°±è‡ªå¸¦äº†å¥½å‡ ä¸ªå…¨å±€å˜é‡ï¼Œè¿™äº›å…¨å±€å˜é‡åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­éƒ½å­˜åœ¨ã€‚

æŸ¥çœ‹å½“å‰`py`æ–‡ä»¶çš„å…¨å±€å˜é‡

```python
[root@ansheng ~]# echo 'print(vars())' > scripts.py      
[root@ansheng ~]# python scripts.py 
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', '__file__': 'scripts.py', '__doc__': None, '__package__': None}
```

## é»˜è®¤å…¨å±€å˜é‡

|å˜é‡å|è¯´æ˜|
|:--:|:--|
|\__doc__|py æ–‡ä»¶çš„æ³¨é‡Šï¼Œæ˜¯å¯¹æ–‡ä»¶çš„æ³¨é‡Š|
|\__file__|è·å–å½“å‰æ–‡ä»¶è·¯å¾„|
|\__package__ |è¿”å›å¯¼å…¥çš„æ–‡ä»¶æ‰€åœ¨åŒ…ï¼Œç”¨`.`åˆ†éš”ï¼Œå¦‚æœæ˜¯å½“å‰æ–‡ä»¶åˆ™è¿”å› None|
|\__cached__|è¿”å›å¯¼å…¥çš„å…¶ä»–æ–‡ä»¶`pyc`æ–‡ä»¶è·¯å¾„,å½“å‰æ–‡ä»¶è¿”å› None|
|\__name\__|å¦‚æœæ˜¯ä¸»æ–‡ä»¶åˆ™è¿”å›`__main__` å¦åˆ™ç­‰äºæ¨¡å—å|

> æ²¡æœ‰åˆ—å‡ºæ¥çš„å°±æ˜¯æ²¡å¿…è¦äº†è§£çš„


## å®ä¾‹

è¿”å›`scripts`æ–‡ä»¶çš„æ³¨é‡ŠåŠæ–‡ä»¶è·¯å¾„

```bash
[root@ansheng ~]# cat scripts.py 
#!/usr/bin/env python
# æ–‡ä»¶çš„æ³¨é‡Šé¡¶æ ¼å†™
"""  Python file comments """
# è¾“å‡ºæ–‡ä»¶æ³¨é‡Š
print("comments",__doc__)
# è¾“å‡ºæ–‡ä»¶è·¯å¾„
print("file path",__file__)
```

æ‰§è¡Œè„šæœ¬

```python
[root@ansheng ~]# python scripts.py 
('comments', '  Python file comments ')
# å¦‚æœæ˜¯å½“å‰æ–‡ä»¶åˆ™ç›´æ¥è¿”å›æ–‡ä»¶å
('file path', 'scripts.py')
```

`__name__`å‡½æ•°çš„åº”ç”¨

æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹é¢çš„æ–‡ä»¶åŠæ–‡ä»¶å†…å®¹

```bash
[root@ansheng ~]# ls -l
total 8
drwxr-xr-x 2 root root 4096 May 24 21:36 lib
-rw-r--r-- 1 root root   80 May 24 21:37 scripts.py
[root@ansheng ~]# ls -l lib/
total 12
-rwxr-xr-x 1 root root  54 May 24 21:36 f1.py
-rw-r--r-- 1 root root   0 May 24 21:34 __init__.py
[root@ansheng ~]# cat lib/f1.py
#!/usr/bin/env python
def echo():
 print("lib/f1.py")
[root@ansheng ~]# cat scripts.py 
#!/usr/bin/env python
from lib import f1

if __name__ == "__main__":
  f1.echo()
```
```bash

æ‰§è¡Œ`scripts.py`è„šæœ¬ï¼Œè„šæœ¬ä¼šè°ƒç”¨`lib/f1.py`æ–‡ä»¶ï¼Œè€Œ`lib/f1.py`æ–‡ä»¶ä¼šè¾“å‡º`lib/f1.py`ï¼Œæ‰€ä»¥æ‰§è¡Œ`scripts.py`æ–‡ä»¶çš„æ—¶å€™è‡ªç„¶ä¹Ÿä¼šè¾“å‡º`lib/f1.py`

```bash
[root@ansheng ~]# python scripts.py 
# æ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œä¼šè¾“å‡ºä¸‹é¢çš„å†…å®¹
lib/f1.py
```

è¿™æ˜¯æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ª`scripts1.py`æ–‡ä»¶

```bash
[root@ansheng ~]# touch scripts1.py
```

`scripts1.py`æ–‡ä»¶å†…å®¹å¦‚ä¸‹

```bash
[root@ansheng ~]# cat scripts1.py 
#!/usr/bin/env python
import scripts
```

æ–‡ä»¶åˆ›å»ºå¥½åæ‰§è¡Œä»–ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰è¾“å‡º

```bash
[root@ansheng ~]# python scripts1.py
```

ç„¶åæˆ‘ä»¬æŠŠ`scripts.py`è„šæœ¬æ–‡ä»¶å†…å®¹æ”¹ä¸ºå¦‚ä¸‹

```bash
[root@ansheng ~]# cat scripts.py
#!/usr/bin/env python
from lib import f1
f1.echo()
```

å†æ¬¡æ‰§è¡Œ`scripts1.py`è„šæœ¬è¿™æ˜¯å°±ä¼šè¾“å‡º`lib/f1.py`

```bash
[root@ansheng ~]# python scripts1.py 
lib/f1.py
```

ä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸Šé¢çš„æƒ…å†µå‘¢ï¼Ÿ

å› ä¸ºåŸæ¥çš„`scripts.py`æ–‡ä»¶åŠ äº† if åˆ¤æ–­ï¼Œå…¶æ„æ€å°±æ˜¯è¯´å¦‚æœ`__name__`çš„å€¼ç­‰äº`"__main__"`ï¼Œé‚£ä¹ˆæˆ‘å°±æ‰§è¡Œ f1.echo()æ–¹æ³•ï¼Œå¦åˆ™å°±ä»€ä¹ˆä¹Ÿä¸åšï¼Œå½“`scripts.py`æ–‡ä»¶è¢«æˆ‘ä»¬ç›´æ¥æ‰§è¡Œçš„æ—¶å€™çš„`__name__`è¿”å›ç»“æœæ˜¯`"__main__"`ï¼Œå¦‚æœè¢«åˆ«çš„æ–‡ä»¶è°ƒç”¨äº†ï¼Œé‚£ä¹ˆ`__name__`è¿”å›çš„ç»“æœæ˜¯`"scripts"`ã€‚

è‡ªåŠ¨æŠŠå½“å‰ç›®å½•ä¸‹é¢çš„`bin`ç›®å½•æ·»åŠ åˆ° python çš„`PATH`å˜é‡ä¸­

ç›®å½•ç»“æ„åŠè„šæœ¬å†…å®¹å¦‚ä¸‹

```bash
[root@ansheng ~]# tree /tmp/
/tmp/
â”œâ”€â”€ bin
â”‚Â Â  â”œâ”€â”€ f1.py
â”‚Â Â  â””â”€â”€ __init__.py
â””â”€â”€ scripts.py

1 directory, 3 files
[root@ansheng ~]# cat /tmp/scripts.py 
#!/usr/bin/env python
import os
import sys

path = os.path.dirname(__file__)
mod_path = os.path.join(path,"bin")

sys.path.append(mod_path)
for n in sys.path:
    print(n)
```

æ‰§è¡Œç»“æœ

```bash
[root@ansheng ~]# python /tmp/scripts.py 
/tmp
/usr/lib64/python26.zip
/usr/lib64/python2.6
/usr/lib64/python2.6/plat-linux2
/usr/lib64/python2.6/lib-tk
/usr/lib64/python2.6/lib-old
/usr/lib64/python2.6/lib-dynload
/usr/lib64/python2.6/site-packages
/usr/lib64/python2.6/site-packages/gtk-2.0
/usr/lib/python2.6/site-packages
/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info
/tmp/bin
```
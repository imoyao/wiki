---
title: Python å…¨æ ˆä¹‹è·¯ç³»åˆ—ä¹‹è£…é¥°å™¨

tags: 
  - ç¼–ç 
  - è£…é¥°å™¨
top: 3
categories: 
  - ğŸ’»å·¥ä½œ
  - ğŸPython
  - å…¨æ ˆä¹‹è·¯
  - è¿›é˜¶ç¯‡
date: 2020-05-23 18:21:46
permalink: /pages/f67da8/
---

è£…é¥°å™¨æ˜¯ç”±å‡½æ•°å»ç”Ÿæˆçš„ï¼Œç”¨äºè£…é¥°æŸä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•æˆ–è€…ç±»ï¼Œä»–å¯ä»¥è®©è¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œä¹‹å‰æˆ–è€…æ‰§è¡Œä¹‹ååšä¸€äº›æ“ä½œã€‚

## å®ä¾‹

å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°`func`

```python
#!/usr/bin/env python
# _*_ coding: utf-8 _*_

def func(arg):  # æ¥å—ä¸€ä¸ªå‚æ•°arg
    print(arg)  # è¾“å‡ºè¿™ä¸ªå‚æ•°

func("Hello World!")  # è°ƒç”¨è„šæœ¬å¹¶ä¸”ä¼ å…¥å‚æ•°
```

æ‰§è¡Œè„šæœ¬ï¼Œè¾“å‡ºçš„ç»“æœä¸ºï¼š

```python
C:\Python35\python.exe F:/Python_code/Note/è£…é¥°å™¨.py
func

Process finished with exit code 0
```

ç°è¦åœ¨æ‰§è¡Œ`func`è¿™ä¸ªå‡½æ•°å‰åæ‰§è¡Œä¸€äº›æ“ä½œï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªè£…é¥°å™¨æ¥å®ç°ï¼š

```python
#!/usr/bin/env python
# _*_ coding: utf-8 _*_

def decorator(func):  # åˆ›å»ºä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ï¼Œæ¥å—çš„å‚æ•°argå‚æ•°å°±æ˜¯funcå‡½æ•°å

    def inner(*args, **kwargs):
        print("æ‰§è¡Œå‡½æ•°ä¹‹å‰")
        ret = func(*args, **kwargs)
        print("æ‰§è¡Œå‡½æ•°ä¹‹å")
        return ret

    return inner

@decorator  # å¦‚æœè¦è®©æŸä¸ªå‡½æ•°ä½¿ç”¨è£…é¥°å™¨ï¼Œåªéœ€è¦åœ¨è¿™ä¸ªå‡½æ•°ä¸Šé¢åŠ ä¸Š@+è£…é¥°å™¨å
def func(arg):
    print(arg)

func("Hello World!")
```

è¾“å‡ºç»“æœä¸ºï¼š

```python
/usr/bin/python3.5 /home/ansheng/Documents/PycharmProjects/blogcodes/è£…é¥°å™¨.py
æ‰§è¡Œå‡½æ•°ä¹‹å‰
Hello World!
æ‰§è¡Œå‡½æ•°ä¹‹å

Process finished with exit code 0
```

## å¤šä¸ªè£…é¥°å™¨è£…é¥°åŒä¸€ä¸ªå‡½æ•°

```python
#!/usr/bin/env python
# _*_ coding: utf-8 _*_

def decorator1(func):
    def inner():
        print("å¼€å§‹ä¹‹å‰æ‰§è¡Œè£…é¥°å™¨01")
        ret = func()
        print("ç»“æŸä¹‹åæ‰§è¡Œè£…é¥°å™¨01")
        return ret

    return inner


def decorator2(func):
    def inner():
        print("decorator2>>>Start...")
        ret = func()
        print("decorator2>>>End...")
        return ret

    return inner


@decorator1
@decorator2
def index():
    print("æ‰§è¡Œå‡½æ•°...")

index()
```

è¾“å‡ºç»“æœï¼š

```python
/usr/bin/python3.5 /home/ansheng/Documents/PycharmProjects/blogcodes/è£…é¥°å™¨.py
å¼€å§‹ä¹‹å‰æ‰§è¡Œè£…é¥°å™¨01
decorator2>>>Start...
æ‰§è¡Œå‡½æ•°...
decorator2>>>End...
ç»“æŸä¹‹åæ‰§è¡Œè£…é¥°å™¨01

Process finished with exit code 0
```

## æ›´å¤šå®ä¾‹

```python
#!/usr/bin/env python
# _*_ coding:utf-8 _*_

# Created by å®‰ç”Ÿ on 2017/2/9

"""
å‡½æ•°è£…é¥°å™¨
"""


def decorator(func):
    def wrapped(*args, **kwargs):
        return func(*args, **kwargs)

    return wrapped


@decorator
def func(a, b):
    return a + b


print(func(1, 2))
"""
ç±»è£…é¥°å™¨
"""


class decorator:
    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        return self.func(*args, **kwargs)


@decorator
def func(a, b):
    return a + b


print(func(1, 2))
"""
å¸¦å‚æ•°çš„å‡½æ•°è£…é¥°å™¨
"""


def parameter(a, b):
    print(a, b)

    def decorator(func):
        def wrapped(*args, **kwargs):
            return func(*args, **kwargs)

        return wrapped

    return decorator


@parameter(1, 2)
def func(a, b):
    return a + b


print(func(10, 20))
"""
å¸¦å‚æ•°çš„ç±»è£…é¥°å™¨
"""


def parameter(a, b):
    print(a + b)

    class decorator:
        def __init__(self, func):
            self.func = func

        def __call__(self, *args, **kwargs):
            return self.func(*args, **kwargs)

    return decorator


@parameter(1, 2)
def func(a, b):
    return a + b


print(func(10, 20))

"""
å¸¦å‚æ•°çš„ç±»è£…é¥°å™¨
"""


def parameter(a, b):
    print(a, b)

    def decorator(cls):
        class wrapped:
            def __init__(self, *args, **kwargs):
                self.cls = cls(*args, **kwargs)

            def __getattr__(self, item):
                return getattr(self.cls, item)

        return wrapped

    return decorator


@parameter(1, 2)
class CLS:
    def __init__(self):
        self.a = 'a'

    def P(self, v):
        print(v)


obj = CLS()
print(obj.a)
obj.P('Hello,')

"""
ä¸ºå‡½æ•°ä¸­å’Œç±»ä¸­çš„æ–¹æ³•æ·»åŠ è£…é¥°å™¨
"""


def Call(aClass):
    calls = 0

    def onCall(*args, **kwargs):
        nonlocal calls
        calls += 1
        print('call %s to %s' % (calls, func.__name__))
        return aClass(*args, **kwargs)

    return onCall


@Call
def func(a, b):
    return a + b


print(func(1, 2))


class CLS:
    def __init__(self):
        self.a = 'a'

    @Call
    def b(self):
        return self.a


obj = CLS()
print(obj.b())
```
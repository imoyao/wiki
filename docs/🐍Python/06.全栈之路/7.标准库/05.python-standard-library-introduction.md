---
title: Python æ ‡å‡†åº“ç³»åˆ—ä¹‹æ¨¡å—ä»‹ç»

tags: 
  - ç¼–ç 
  - é¢å‘å¯¹è±¡
top: 1
categories: 
  - ğŸ’» å·¥ä½œ
  - ğŸPython
  - å…¨æ ˆä¹‹è·¯
  - æ ‡å‡†åº“
date: 2020-05-23 18:21:46
permalink: /pages/8792e9/
---

Python çš„æ¨¡å—å…¶å®å°±æ˜¯å°è£…äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ªåŠŸèƒ½çš„ä»£ç é›†åˆï¼Œä»¥ä¾¿äºé‡ç”¨ï¼Œæ¨¡å—å¯ä»¥æ˜¯ä¸€ä¸ª`æ–‡ä»¶`ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª`ç›®å½•`ï¼Œç›®å½•çš„å½¢å¼ç§°ä½œ`åŒ…`ã€‚

## æ³¨æ„
è¿™ä¸ªæ˜¯å½“æ—¶çš„ä¸€ä¸ªæ•´ç†ï¼Œæ›´æ¨èå­¦ä¹ æ¯å‘¨ä¸€ä¸ªæ ‡å‡†åº“ç³»åˆ—ï¼

## æ¨¡å—åˆ†ç±»

**å†…ç½®æ¨¡å—**

å†…ç½®æ¨¡å—å¯ä»¥ç†è§£æˆå½“ä½ å®‰è£…å¥½ python ç¯å¢ƒä¹‹åï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨`import`å¯¼å…¥çš„å°±æ˜¯å†…ç½®æ¨¡å—ï¼Œé»˜è®¤æ¨¡å—è·¯å¾„ä¸ºï¼š`C:\Python35\lib`ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å†…ç½®æ¨¡å—çš„è·¯å¾„ï¼š

```python
 # å¯¼å…¥sysæ¨¡å—
 >>> import sys
 # æœ€åä¸€ä¸ªç›®å½•å°±æ˜¯å†…ç½®æ¨¡å—çš„è·¯å¾„
 >>> for n in sys.path:
 ...  print(n)
 ...

C:\Python35\lib\site-packages\pip-8.1.1-py3.5.egg
C:\Python35\python35.zip
C:\Python35\DLLs
C:\Python35\lib
C:\Python35
C:\Python35\lib\site-packages
```

**ç¬¬ä¸‰æ–¹æ¨¡å—**

ç¬¬ä¸‰æ–¹æ¨¡å—é€šå¸¸æ˜¯å¼€å‘è€…è‡ªå·±ç¼–å†™çš„æ¨¡å—ï¼Œç„¶åæäº¤åˆ° python å®˜æ–¹çš„åº“ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸‹è½½å®‰è£…ä½¿ç”¨äº†ï¼Œé»˜è®¤å®‰è£…ç›®å½•ä¸º`C:\Python35\lib\site-packages`ï¼Œ

**è‡ªå®šä¹‰æ¨¡å—**

è‡ªå·±ç¼–å†™çš„æ¨¡å—

## æ¨¡å—çš„å¯¼å…¥æ–¹å¼

æŠŠä¸€ä¸ªæ¨¡å—å½“åšæˆä¸€ä¸ªæ•´ä½“æ¥è¿›è¡Œå¯¼å…¥

```python
import sys
```

ä»ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å…¥ç‰¹å®šçš„å˜é‡æˆ–è€…æ˜¯æ–¹æ³•

```python
from sys import path
```

è°ƒç”¨çš„æ—¶å€™ç›´æ¥ä½¿ç”¨æ–¹æ³•å`path`

```python
>>> path
['', 'C:\\Python35\\lib\\site-packages\\pip-8.1.1-py3.5.egg', 'C:\\Python35\\python35.zip', 'C:\\Python35\\DLLs', 'C:\\Python35\\lib', 'C:\\Python35', 'C:\\Python35\\lib\\site-packages']
```

ç»™å¯¼å…¥çš„æ¨¡å—æˆ–è€…æ–¹æ³•èµ·ä¸€ä¸ªåˆ«å

```python
from sys import path as path_alias
```

è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨åˆ«å`path_alias`

```python
>>> path_alias
['', 'C:\\Python35\\lib\\site-packages\\pip-8.1.1-py3.5.egg', 'C:\\Python35\\python35.zip', 'C:\\Python35\\DLLs', 'C:\\Python35\\lib', 'C:\\Python35', 'C:\\Python35\\lib\\site-packages']
```

æ·»åŠ é»˜è®¤çš„ç¯å¢ƒå˜é‡,å½“å‰ç”Ÿæ•ˆ

```python
sys.path.append("PATH_NAME")
```

å¯ä»¥ä½¿ç”¨`imp`æ¨¡å—ä¸­çš„`reload`æ–¹æ³•é‡æ–°è½½å…¥æŸä¸ªæ¨¡å—çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä¸‹é¢çš„å®ä¾‹ï¼š

```bash
$ cat simple.py
#!/use/bin/env python

print('Hello, World!')
spam = 1
```
```python
>>> import simple
Hello, World!
>>> simple.spam
1
>>> simple.spam += 1
>>> import simple
>>> simple.spam
2
>>> import imp
>>> imp.reload(simple)
Hello, World!
<module 'simple' from '/Users/ansheng/simple.py'>
>>> simple.spam
1
```

## æ¨¡å—å¯¼å…¥é¡ºåº

1. å…ˆåœ¨å½“å‰è„šæœ¬ç›®å½•å¯»æ‰¾æœ‰æ²¡æœ‰ä¸å¯¼å…¥æ¨¡å—åç§°ç›¸åŒçš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰å°±æŠŠè¿™ä¸ªæ–‡ä»¶å½“ä½œæ¨¡å—å¯¼å…¥ï¼ˆæ®ä¸å®Œå…¨ç»Ÿè®¡ï¼Œè¿™æ˜¯ä¸ªå‘ï¼Œæµ‹è¯•`re`æ¨¡å—æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æµ‹è¯•`sys`æ¨¡å—å°±æœ‰é—®é¢˜äº†ï¼‰
2. æŸ¥æ‰¾æ¨¡å—è·¯å¾„ä¸‹é¢æœ‰æ²¡æœ‰å¯¹åº”çš„æ¨¡å—å
3. å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ¨¡å—åå°±æŠ¥é”™

## import æ˜¯å¦‚ä½•å·¥ä½œçš„

æ¨¡å—åœ¨è¢«å¯¼å…¥çš„æ—¶å€™ä¼šæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š

1. é€šè¿‡ç¯å¢ƒå˜é‡æ‰¾åˆ°æ¨¡å—æ–‡ä»¶ï¼›
2. ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼Œå¦‚æœæœ‰å­—èŠ‚ç æ–‡ä»¶åˆ™å¯¼å…¥å­—èŠ‚ç æ–‡ä»¶ï¼›
3. æ‰§è¡Œæ¨¡å—ä¸­çš„ä»£ç æ¥åˆ›å»ºæ‰€å®šä¹‰çš„å¯¹è±¡ï¼›

ä»¥ä¸Šçš„ä¸‰ä¸ªæ­¥éª¤åªæœ‰åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œæ¨¡å—è¢«ç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶æ‰ä¼šè¿›è¡Œã€‚å¦‚æœå·²ç»å¯¼å…¥äº†è¿™ä¸ªæ¨¡å—ç„¶åå†æ¬¡å¯¼å…¥çš„æ—¶å€™ä¼šè·³è¿‡ä¸Šé¢çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œå®ƒä¼šç›´æ¥æå–å†…å­˜ä¸­å·²ç»åŠ è½½çš„æ¨¡å—å¯¹è±¡ã€‚Python å·²ç»å¯¼å…¥çš„æ¨¡å—ä¼šä¿å­˜åœ¨`sys.modules`å­—å…¸ä¸­ã€‚

## \_X ä¸\_\_all__

åœ¨æ¨¡å—ä¸­çš„æ‰€æœ‰å˜é‡ä»¥`_`å¼€å¤´çš„éƒ½ä¸ä¼šè¢«`from *`æ‰€å¯¼å…¥

```bash
$ cat simple.py
#!/use/bin/env python

_spam1 = 1
spam2 = 1
```

```python
>>> from simple import *
>>> dir()
# _spam1æ²¡æœ‰è¢«å¯¼å…¥
['__builtins__', '__doc__', '__name__', '__package__', 'spam2']
```

ç›¸åçš„`__all__`åˆ—è¡¨é‡Œé¢çš„å˜é‡åˆ™ä¼šè¢«`from *`æ‰€å¯¼å…¥ï¼Œæ²¡æœ‰åœ¨`__all__`åˆ—è¡¨é‡Œé¢çš„å˜é‡åˆ™ä¸ä¼šè¢«å¯¼å…¥

```bash
$ cat simple.py
#!/use/bin/env python

__all__ = ['spam2']

spam1 = 1
spam2 = 1
```

```python
>>> from simple import *
>>> dir()
# spam1æ²¡æœ‰è¢«å¯¼å…¥
['__builtins__', '__doc__', '__name__', '__package__', 'spam2']
```

## æ³¨æ„äº‹é¡¹

æ®ä¸å®Œå…¨ç»Ÿè®¡ï¼Œå¦‚æœå¯¼å…¥çš„æ¨¡å—çš„åç§°åœ¨å½“å‰ç›®å½•ä¸‹æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆåªä¼šæŠŠå½“å‰ç›®å½•ä¸‹çš„è¿™ä¸ªæ–‡ä»¶å½“ä½œæ¨¡å—ï¼Œå¦‚ä¸‹æ¼”ç¤ºï¼š

åˆ›å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œåç§°ä¸º scripts

```bash
[root@iZ28i253je0Z ~]# touch scripts.py
```

å†…å®¹ä¸º

```python
#!/usr/bin/env python
# _*_ coding:utf-8 _*_
# å¯¼å…¥ä¸€ä¸ªæ¨¡å—re
import re
# è¾“å‡ºåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²abc
print(re.match('\w+',"abc").group())
```

æ‰§è¡Œè„šæœ¬

```bash
[root@iZ28i253je0Z ~]# python scripts.py
# æŠŠåŒ¹é…åˆ°çš„ç»“æœabcè¾“å‡ºå‡ºæ¥
abc
```

åˆ›å»ºä¸€ä¸ª`.py`æ–‡ä»¶ï¼Œåç§°ä¸º`re.py`

```bash
[root@iZ28i253je0Z ~]# touch re.py
```

å†…å®¹ä¸º

```python
#!/usr/bin/env python
# _*_ coding:utf-8 _*_
# è¾“å‡ºå†…å®¹modus
print("Hello Word")
```

å†æ¬¡æ‰§è¡Œ`scripts.py`è„šæœ¬

```python
[root@iZ28i253je0Z ~]# python scripts.py
# å…ˆè¾“å‡ºHello Word
Hello Word
# ç„¶åå†æŠ¥é”™æ²¡æœ‰matchè¿™ä¸ªæ–¹æ³•
Traceback (most recent call last):
  File "scripts.py", line 6, in <module>
    print(re.match('\w+',"abc").group())
AttributeError: 'module' object has no attribute 'match'
```

è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º`python`æŠŠ`re.py`å½“æˆæ¨¡å—`re`äº†ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼š

æ›´æ”¹`scripts.py`æ–‡ä»¶å†…å®¹å¦‚ä¸‹

```python
[root@iZ28i253je0Z ~]# cat scripts.py
#!/usr/bin/env python
# _*_ coding:utf-8 _*_

import re
```

`re.py`æ–‡ä»¶å†…å®¹ä¸å˜ï¼Œç„¶åæˆ‘ä»¬åœ¨æ‰§è¡Œè„šæœ¬`scripts.py`

```python
[root@iZ28i253je0Z ~]# python scripts.py
Hello Word
```

çœ‹åˆ°äº†å§ï¼Œä»–ä¼šæŠŠ`re.py`æ–‡ä»¶å†…çš„ä»£ç æ‹¿åˆ°`scripts.py`æ–‡ä»¶ä¸­å»æ‰§è¡Œï¼Œè¿™æ˜¯ä¸ªå‘ï¼Œæœ€å¥½åˆ«è¸©ã€‚

## å¯¼å…¥å½“å‰ç›®å½•ä¸‹å­ç›®å½•ä¸‹çš„æ–‡ä»¶

```bash
[root@ansheng ~]# tree ./
./
â”œâ”€â”€ modules
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ lib01.py
â”‚Â Â  â””â”€â”€ lib02.py
â””â”€â”€ scripts.py

1 directory, 4 files
[root@ansheng ~]# cat scripts.py
#!/usr/bin/env python
# å¯¼å…¥modulesåŒ…ä¸‹é¢çš„lib01æ¨¡å—
from modules import lib01
# å¯¼å…¥modulesåŒ…ä¸‹é¢çš„lib02æ¨¡å—
from modules import lib02
[root@ansheng ~]# cat modules/__init__.py
#!/usr/bin/env python
[root@ansheng ~]# cat modules/lib01.py
#!/usr/bin/env python
# lib01.pyæ–‡ä»¶ä¼šè¾“å‡º"Hello lib01"
print("Hello lib01")
[root@ansheng ~]# cat modules/lib02.py
#!/usr/bin/env python
# lib02.pyæ–‡ä»¶ä¼šè¾“å‡º"Hello lib02"
print("Hello lib02")
```

æ‰§è¡Œç»“æœ

```python
[root@ansheng ~]# python scripts.py
# ä¼šæ‰§è¡Œmodules/lib02.pyä¸modules/lib01.pyæ–‡ä»¶å†…å®¹
Hello lib01
Hello lib02
```

> åŒ…å«ç›®å½•ä¸‹çš„æ–‡ä»¶æ—¶éœ€è¦åœ¨ç›®å½•ä¸‹å£°æ˜ä¸€ä¸ª`__init__.py`æ–‡ä»¶ï¼Œå³ä½¿è¿™ä¸ªæ–‡ä»¶æ˜¯ç©ºçš„ä¹Ÿå¯ä»¥ã€‚

## å¦‚ä½•å®‰è£… Python ç¬¬ä¸‰æ–¹æ¨¡å—

Python å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†ç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆå¦‚ä½•å®‰è£…è¿™äº›åº“å‘¢ï¼Ÿ

å®‰è£…ç¬¬ä¸‰æ–¹åº“æœ‰ä¸¤ç§æ–¹å¼ï¼š

1. ç¬¬ä¸€ç§å°±æ˜¯ä½¿ç”¨ python è‡ªå¸¦çš„ä»“åº“ pip è¿›å®‰è£…
2. ç¬¬äºŒç§å°±æ˜¯ä½¿ç”¨æºç è¿›è¡Œå®‰è£…

## PIP æ–¹å¼å®‰è£…

é¦–å…ˆç”¨ yum å®‰è£…`python-pip`è½¯ä»¶åŒ…

```bash
[root@ansheng ~]# yum  install python-pip
```

å®‰è£…å®Œæˆä¹‹åå¯ä»¥ä½¿ç”¨`pip -V`æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬

```bash
[root@ansheng ~]# pip -V
pip 7.1.0 from /usr/lib/python2.6/site-packages (python 2.6)
```

è¿™æ¬¡å°±ä»¥`requests`æ¨¡å—ä¸ºä¾‹æŠŠï¼Œå…ˆæŸ¥çœ‹å½“å‰ç³»ç»Ÿæœ‰æ²¡æœ‰å®‰è£…`requests`æ¨¡å—

```bash
[root@ansheng ~]# python
Python 2.6.6 (r266:84292, Jul 23 2015, 15:22:56)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
# å¦‚æœæ²¡æœ‰å®‰è£…åœ¨å¯¼å…¥çš„æ—¶å€™å°±ä¼šæŠ¥é”™
>>> import requests
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named requests
>>> exit()
```

ç”¨`pip`çš„æ–¹å¼å®‰è£…`requests`æ¨¡å—

```bash
[root@ansheng ~]# pip install requests
```

å®‰è£…å®Œæˆä¹‹åè¿›å…¥`python`è§£é‡Šå™¨å¯¼å…¥`requests`æ¨¡å—ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å¯¼å…¥æˆåŠŸ

```bash
[root@ansheng ~]# python
Python 2.6.6 (r266:84292, Jul 23 2015, 15:22:56)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import requests
```

å®‰è£…æˆåŠŸã€‚

å¸è½½æ‰§è¡Œ`pip uninstall`åŠ æ¨¡å—å

```bash
[root@ansheng ~]# pip uninstall requests
```

## æºç åŒ…æ–¹å¼å®‰è£…

ä¸‹è½½æ¨¡å—`requests`çš„æºç åŒ…

```bash
[root@ansheng ~]# git clone git://github.com/kennethreitz/requests.git
Initialized empty Git repository in /root/requests/.git/
remote: Counting objects: 17546, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 17546 (delta 0), reused 0 (delta 0), pack-reused 17544
Receiving objects: 100% (17546/17546), 5.04 MiB | 46 KiB/s, done.
Resolving deltas: 100% (11232/11232), done.
```

æŸ¥çœ‹ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶

```bash
[root@ansheng ~]# cd requests/
[root@ansheng requests]# ls
AUTHORS.rst      docs  HISTORY.rst  Makefile     NOTICE      requests                    requirements.txt  tests
CONTRIBUTING.md  ext   LICENSE      MANIFEST.in  README.rst  requirements-to-freeze.txt  setup.py
```

æ‰§è¡Œ`python setup.py install`è¿›è¡Œç¼–è¯‘å®‰è£…

```bash
[root@ansheng requests]# python setup.py install
```

éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ

```bash
[root@ansheng requests]# python
Python 2.6.6 (r266:84292, Jul 23 2015, 15:22:56)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import requests
```

å®‰è£…æˆåŠŸï¼Œä»¥ä¸Šå°±æ˜¯`Python`ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä¸¤ç§å®‰è£…æ–¹å¼ã€‚
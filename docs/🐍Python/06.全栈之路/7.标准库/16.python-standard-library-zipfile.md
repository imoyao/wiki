---
title: Python æ ‡å‡†åº“ç³»åˆ—ä¹‹ zipfile æ¨¡å—

tags: 
  - ç¼–ç 
  - é¢å‘å¯¹è±¡
top: 11
categories: 
  - ðŸ’»å·¥ä½œ
  - ðŸPython
  - å…¨æ ˆä¹‹è·¯
  - æ ‡å‡†åº“
date: 2020-05-23 18:21:46
permalink: /pages/8b1ed6/
---

The ZIP file format is a common archive and compression standard. This module provides tools to create, read, write, append, and list a ZIP file. 

This module does not currently handle multi-disk ZIP files. It can handle ZIP files that use the ZIP64 extensions (that is ZIP files that are more than 4 GiB in size). It supports decryption of encrypted files in ZIP archives, but it currently cannot create an encrypted file. Decryption is extremely slow as it is implemented in native Python rather than C.

å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.python.org/3.5/library/zipfile.html

æ‰“åŒ…

```python
>>> import zipfile
>>> import os
>>> os.system("ls -l")
æ€»ç”¨é‡ 0
0
# ä»¥wçš„æ–¹å¼çš„æ—¶å€™æ˜¯æ‰“å¼€æ–‡ä»¶å¹¶æ¸…ç©ºï¼Œå¦‚æžœæ˜¯aæ–¹å¼é‚£ä¹ˆå°±æ˜¯è¿½åŠ æ–‡ä»¶äº†
>>> z = zipfile.ZipFile('zip_file.zip', 'w')
# æŠŠæ–‡ä»¶æ”¾å…¥åŽ‹ç¼©åŒ…
>>> z.write('/tmp/folder/file.txt')
# ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç›®å½•
>>> z.write('/tmp/folder/dir')         
# å…³é—­æ–‡ä»¶
>>> z.close()
# æŸ¥çœ‹å·²ç»æ‰“åŒ…çš„æ–‡ä»¶
>>> os.system("ls -l zip_file.zip")                     
-rw-rw-r-- 1 ansheng ansheng 238 5æœˆ  26 17:08 zip_file.zip
0
```

è¿½åŠ ä¸€ä¸ªæ–‡ä»¶

```python
# è¿½åŠ å…¶å®žå°±æ˜¯æŠŠæ¨¡å¼wæ¢æˆa
>>> z = zipfile.ZipFile('zip_file.zip', 'a')
>>> z.write('/tmp/folder/file.txt')         
# å…³é—­æ–‡ä»¶
>>> z.close()
# æŸ¥çœ‹åŒ…å†…çš„æ–‡ä»¶
>>> z.namelist()
['tmp/folder/sc.pyc', 'tmp/folder/dir/', 'tmp/folder/file.txt']
```

æŸ¥çœ‹åŽ‹ç¼©åŒ…å†…çš„æ‰€æœ‰æ–‡ä»¶

```python
# z.namelist()èŽ·å–åŽ‹ç¼©åŒ…å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä»¥åˆ—è¡¨å½¢å¼è¿”å›ž
>>> z.namelist()
['tmp/folder/sc.pyc', 'tmp/folder/dir/', 'tmp/folder/file.txt']
```

è§£åŽ‹

```python
>>> z = zipfile.ZipFile('zip_file.zip', 'r')
# extractallæŠŠæ‰€æœ‰çš„æ–‡ä»¶è§£åŽ‹åˆ°å½“å‰ç›®å½•
>>> z.extractall()
>>> os.system("tree tmp/")         
tmp/
â””â”€â”€ folder
    â”œâ”€â”€ dir
    â””â”€â”€ sc.pyc

2 directories, 1 file
0
```

è§£åŽ‹ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶

```python
>>> z = zipfile.ZipFile('zip_file.zip', 'r')
# è¿”å›žæ–‡ä»¶æ‰€åœ¨è·¯å¾„
>>> z.extract("tmp/folder/sc.pyc")          
'/home/ansheng/tmp/folder/sc.pyc'
>>> os.system("tree tmp/")                  
tmp/
â””â”€â”€ folder
    â””â”€â”€ sc.pyc

1 directory, 1 file
0
```
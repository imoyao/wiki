---
title: Python æ ‡å‡†åº“ç³»åˆ—ä¹‹ configparser æ¨¡å—

tags: 
  - ç¼–ç 
  - é¢å‘å¯¹è±¡
top: 8
categories: 
  - ðŸ’» å·¥ä½œ
  - ðŸPython
  - å…¨æ ˆä¹‹è·¯
  - æ ‡å‡†åº“
date: 2020-05-23 18:21:46
permalink: /pages/a15df1/
---

> This module provides the ConfigParser class which implements a basic configuration language which provides a structure similar to whatâ€™s found in Microsoft Windows INI files. You can use this to write Python programs which can be customized by end users easily.

configparser ç”¨äºŽå¤„ç†ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨ open æ¥æ“ä½œæ–‡ä»¶ã€‚

**é…ç½®æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š**

```
# ç¬¬ä¸€ç§æ³¨é‡Šæ–¹å¼
; ç¬¬äºŒç§æ³¨é‡Šæ–¹å¼
 
[node1]  # èŠ‚ç‚¹
k1 = v1  # key = value
k2 : v2  # key : value
```

## å®žä¾‹

åˆ›å»ºä¸€ä¸ª`file.conf`æ–‡ä»¶ï¼Œå†…å®¹ä¸ºç©ºï¼Œç„¶åŽè¿›å…¥`python`IDEï¼š

```bash
[root@ansheng ~]# touch file.conf 
[root@ansheng ~]# python
Python 2.6.6 (r266:84292, Jul 23 2016, 15:22:56) 
[GCC 4.4.7 20120313 (Red Hat 4.4.7-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

ä¸ºæ–‡ä»¶æ·»åŠ èŠ‚ç‚¹

```python
>>> import configparser
>>> config = configparser.ConfigParser()
>>> config.read('file.conf', encoding='utf-8')
['file.conf']
# æ·»åŠ èŠ‚ç‚¹"node1","node2",ç„¶åŽå†™å…¥æ–‡ä»¶
>>> config.add_section("node1")
>>> config.add_section("node2")
>>> config.write(open('file.conf', 'w'))
```

æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨

```python
# å¦‚æžœæ–‡ä»¶å­˜åœ¨åˆ™è¿”å›ž"True"ï¼Œå¦åˆ™å°±è¿”å›ž"False"
>>> print(config.has_section('node1'))
True
>>> print(config.has_section('node2'))
True
>>> print(config.has_section('node3'))
False
```

åˆ é™¤èŠ‚ç‚¹

```python
# å¦‚æžœåˆ é™¤çš„èŠ‚ç‚¹å­˜åœ¨åˆ™è¿”å›ž"True"ï¼Œå¦åˆ™è¿”å›ž"False"
>>> config.remove_section("node2")
True
>>> config.write(open('file.conf', 'w'))
>>> print(config.has_section('node2'))
False
```

è®¾ç½®èŠ‚ç‚¹å†…çš„é”®å€¼å¯¹

```python
# æ·»åŠ å®Œé”®å€¼å¯¹ä¹‹åŽåˆ«å¿˜è®°äº†å†™å…¥åˆ°æ–‡ä»¶ä¸­
>>> config.set('node1', 'Name', "ansheng")
>>> config.set('node1', 'Blog_URL', "https://blog.ansheng.me")
>>> config.set('node1', 'Hostname', "localhost.localhost")
>>> config.set('node1', 'IP', "127.0.0.1")
>>> config.write(open('file.conf', 'w'))
```

æ£€æŸ¥èŠ‚ç‚¹å†…çš„ key æ˜¯å¦å­˜åœ¨

```python
# å¦‚æžœèŠ‚ç‚¹çš„Keyå­˜åœ¨å°±è¿”å›ž"True"ï¼Œå¦åˆ™è¿”å›ž"False"
>>> print(config.has_option('node1', 'Name'))
True
>>> print(config.has_option('node1', 'IP'))
True
>>> print(config.has_option('node1', 'VV'))
False
```

åˆ é™¤èŠ‚ç‚¹å†…çš„ key

```python
# å¦‚æžœåˆ é™¤çš„èŠ‚ç‚¹å­˜åœ¨å°±è¿”å›ž"True"ï¼Œå¦åˆ™å°±è¿”å›ž"False"
>>> config.remove_option('node1', 'IP')
True
>>> config.write(open('file.conf', 'w'))
>>> print(config.has_option('node1', 'IP'))
False
```

èŽ·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹æŒ‡å®š key çš„å€¼

```python
# é»˜è®¤è¿”å›žçš„æ˜¯å­—ç¬¦ä¸²ç±»åž‹
>>> config.get('node1', 'Name')
'ansheng'
>>> config.get('node1', 'Blog_URL')
'https://blog.ansheng.me'
# è¿”å›žçš„å­—ç¬¦ä¸²æˆ‘ä»¬å¯ä»¥è®¾ç½®æˆä¸€ä¸‹ä¸‰ç§æ•°æ®ç±»åž‹ï¼Œåˆ†åˆ«æ˜¯"int"ï¼Œ"float"ï¼Œ"bool"
# v = config.getint('node1', 'k1')
# v = config.getfloat('node1', 'k1')
# v = config.getboolean('node1', 'k1')
```

èŽ·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹æ‰€æœ‰çš„ key

```python
# è¿”å›žèŠ‚ç‚¹ä¸‹é¢æ‰€æœ‰çš„Keyåˆ—è¡¨
>>> config.options('node1')
['name', 'blog_url', 'hostname']
```

èŽ·å–æŒ‡å®šèŠ‚ç‚¹ä¸‹æ‰€æœ‰çš„é”®å€¼å¯¹

```python
# è¿”å›žä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç»„å°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹
>>> config.items('node1')
[('name', 'ansheng'), ('blog_url', 'https://blog.ansheng.me'), ('hostname', 'localhost.localhost')]
```

èŽ·å–æ‰€æœ‰èŠ‚ç‚¹

```python
# èŽ·å–å½“å‰æ–‡ä»¶ä¸­æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹
>>> config.sections()
['node1']
```
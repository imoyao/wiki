---
title: Python ä¸­çš„ MRO ä¸å¤šç»§æ‰¿
date: 2021-03-11 17:25:49
permalink: /python/MRO/
categories:
  - ğŸPython
  - é«˜é˜¶çŸ¥è¯†ç‚¹
tags:
  - MRO
---

## é¢„å¤‡çŸ¥è¯†

### MROï¼ˆMethod Resolution Orderï¼‰

å³æ–¹æ³•è§£æé¡ºåºï¼Œæ˜¯ python ä¸­ç”¨äºå¤„ç†äºŒä¹‰æ€§é—®é¢˜çš„ç®—æ³•ã€‚

Python è¯­è¨€åŒ…å«äº†å¾ˆå¤šä¼˜ç§€çš„ç‰¹æ€§ï¼Œå…¶ä¸­å¤šé‡ç»§æ‰¿å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½†æ˜¯å¤šé‡ç»§æ‰¿ä¼šå¼•å‘å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚äºŒä¹‰æ€§ï¼ŒPython ä¸­ä¸€åˆ‡çš†å¼•ç”¨ï¼Œè¿™ä½¿å¾—ä»–ä¸ä¼šåƒ C++ä¸€æ ·ä½¿ç”¨è™šåŸºç±»å¤„ç†åŸºç±»å¯¹è±¡é‡å¤çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœçˆ¶ç±»å­˜åœ¨åŒåå‡½æ•°çš„æ—¶å€™è¿˜æ˜¯ä¼šäº§ç”ŸäºŒä¹‰æ€§ï¼ŒPython ä¸­å¤„ç†è¿™ç§é—®é¢˜çš„æ–¹æ³•å°±æ˜¯ MROã€‚

### äºŒä¹‰æ€§

Python æ”¯æŒå¤šç»§æ‰¿ï¼Œå¤šç»§æ‰¿çš„è¯­è¨€å¾€å¾€ä¼šé‡åˆ°ä»¥ä¸‹ä¸¤ç±»äºŒä¹‰æ€§çš„é—®é¢˜ï¼š

1. æœ‰ä¸¤ä¸ªåŸºç±» A å’Œ Bï¼ŒA å’Œ B éƒ½å®šä¹‰äº†æ–¹æ³• f()ï¼ŒC ç»§æ‰¿ A å’Œ Bï¼Œé‚£ä¹ˆè°ƒç”¨ C çš„ f()æ–¹æ³•æ—¶ä¼šå‡ºç°ä¸ç¡®å®šã€‚
2. æœ‰ä¸€ä¸ªåŸºç±» Aï¼Œå®šä¹‰äº†æ–¹æ³• f()ï¼ŒB ç±»å’Œ C ç±»ç»§æ‰¿äº† A ç±»ï¼ˆçš„ f()æ–¹æ³•ï¼‰ï¼ŒD ç±»ç»§æ‰¿äº† B å’Œ C ç±»ï¼Œé‚£ä¹ˆå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼ŒD ä¸çŸ¥é“åº”è¯¥ç»§æ‰¿ B çš„ f()æ–¹æ³•è¿˜æ˜¯ C çš„ f()æ–¹æ³•ã€‚

C++ä¹Ÿæ˜¯æ”¯æŒå¤šç»§æ‰¿çš„è¯­è¨€ä¹‹ä¸€ã€‚

å¯¹äºé—®é¢˜ 1ï¼ŒC++ä¸­é€šè¿‡åŒåè¦†ç›–çš„æ–¹å¼æ¥è§£å†³ï¼Œå­ç±»æ–¹æ³•å’Œå±æ€§ä¼šä¼˜å…ˆè°ƒç”¨ï¼Œå¦‚æœè¦åœ¨å­ç±»ä¸­è®¿é—®è¢«å±è”½çš„åŸºç±»æˆå‘˜ï¼Œåº”ä½¿ç”¨åŸºç±»åæ¥é™å®šï¼ˆBaseClassName::Func()ï¼‰ã€‚
å¯¹äºé—®é¢˜ 2ï¼ŒC++ä¸­é€šè¿‡è™šç»§æ‰¿æ¥è§£å†³ï¼Œä»¥ virtual å…³é”®å­—ä¿®é¥°å…±åŒçš„ç›´æ¥åŸºç±»ï¼Œä»è€Œä¿è¯ä¸ä¼šäº§ç”Ÿå¤šä¸ªåŸºç±»å‰¯æœ¬äº§ç”Ÿæ­§ä¹‰ã€‚
Python ä¸­é€šè¿‡ C3 ç®—æ³•å¾ˆå¥½çš„é¿å…äº†ä»¥ä¸Šä¸¤ç±»äºŒä¹‰æ€§çš„æƒ…å†µã€‚

### æ·±åº¦ä¼˜å…ˆç®—æ³•ï¼ˆDFSï¼ŒDepth-First-Searchï¼‰

![DFS](https://pic.imgdb.cn/item/650ee54dc458853aef2488e3.jpg)

1. æŠŠæ ¹èŠ‚ç‚¹å‹å…¥æ ˆä¸­ã€‚
2. æ¯æ¬¡ä»æ ˆä¸­å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œæœç´¢æ‰€æœ‰åœ¨å®ƒä¸‹ä¸€çº§çš„å…ƒç´ ï¼ŒæŠŠè¿™äº›å…ƒç´ å‹å…¥æ ˆä¸­ã€‚å¹¶æŠŠè¿™ä¸ªå…ƒç´ è®°ä¸ºå®ƒä¸‹ä¸€çº§å…ƒç´ çš„å‰é©±ã€‚
3. æ‰¾åˆ°æ‰€è¦æ‰¾çš„å…ƒç´ æ—¶ç»“æŸç¨‹åºã€‚
4. å¦‚æœéå†æ•´ä¸ªæ ‘è¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œç»“æŸç¨‹åºã€‚

### å¹¿åº¦ä¼˜å…ˆç®—æ³•ï¼ˆBFSï¼ŒBreadth-First-Searchï¼‰

![BFS](https://pic.imgdb.cn/item/650ee506c458853aef248002.jpg)

1. æŠŠæ ¹èŠ‚ç‚¹æ”¾åˆ°é˜Ÿåˆ—çš„æœ«å°¾ã€‚
2. æ¯æ¬¡ä»é˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºä¸€ä¸ªå…ƒç´ ï¼ŒæŸ¥çœ‹è¿™ä¸ªå…ƒç´ æ‰€æœ‰çš„ä¸‹ä¸€çº§å…ƒç´ ï¼ŒæŠŠå®ƒä»¬æ”¾åˆ°é˜Ÿåˆ—çš„æœ«å°¾ã€‚å¹¶æŠŠè¿™ä¸ªå…ƒç´ è®°ä¸ºå®ƒä¸‹ä¸€çº§å…ƒç´ çš„å‰é©±ã€‚
3. æ‰¾åˆ°æ‰€è¦æ‰¾çš„å…ƒç´ æ—¶ç»“æŸç¨‹åºã€‚
4. å¦‚æœéå†æ•´ä¸ªæ ‘è¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œç»“æŸç¨‹åºã€‚

### æ‹“æ‰‘æ’åº

å¯¹ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾(Directed Acyclic Graph ç®€ç§° DAG)G è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œæ˜¯å°† G ä¸­æ‰€æœ‰é¡¶ç‚¹æ’æˆä¸€ä¸ªçº¿æ€§åºåˆ—ï¼Œä½¿å¾—å›¾ä¸­ä»»æ„ä¸€å¯¹é¡¶ç‚¹ u å’Œ vï¼Œè‹¥è¾¹(u,v)âˆˆE(G)ï¼Œåˆ™ u åœ¨çº¿æ€§åºåˆ—ä¸­å‡ºç°åœ¨ v ä¹‹å‰ã€‚é€šå¸¸ï¼Œè¿™æ ·çš„çº¿æ€§åºåˆ—ç§°ä¸ºæ»¡è¶³æ‹“æ‰‘æ’åº(TopologicalOrder)çš„åºåˆ—ï¼Œç®€ç§°æ‹“æ‰‘åºåˆ—ã€‚

æ‹“æ‰‘æ’åºçš„å®ç°æ­¥éª¤ï¼š

1. å¾ªç¯æ‰§è¡Œä»¥ä¸‹ä¸¤æ­¥ï¼Œç›´åˆ°ä¸å­˜åœ¨å…¥åº¦ä¸º 0 çš„é¡¶ç‚¹ä¸ºæ­¢
2. é€‰æ‹©ä¸€ä¸ªå…¥åº¦ä¸º 0 çš„é¡¶ç‚¹å¹¶è¾“å‡ºä¹‹ï¼›
3. ä»ç½‘ä¸­åˆ é™¤æ­¤é¡¶ç‚¹åŠæ‰€æœ‰å‡ºè¾¹ã€‚

## å†å²ä¸­çš„ MRO

å¦‚æœä¸æƒ³äº†è§£å†å²ï¼Œåªæƒ³çŸ¥é“ç°åœ¨çš„ MRO å¯ä»¥ç›´æ¥çœ‹æœ€åçš„ C3 ç®—æ³•ï¼Œä¸è¿‡ C3 æ‰€è§£å†³çš„é—®é¢˜éƒ½æ˜¯å†å²é—ç•™é—®é¢˜ï¼Œäº†è§£é—®é¢˜ï¼Œæ‰èƒ½è§£å†³é—®é¢˜ï¼Œå»ºè®®å…ˆçœ‹å†å²ä¸­ MRO çš„æ¼”åŒ–ã€‚

- Python2.2 ä»¥å‰çš„ç‰ˆæœ¬ï¼šç»å…¸ç±»ï¼ˆclassic classï¼‰æ—¶ä»£  

ç»å…¸ç±»æ˜¯ä¸€ç§æ²¡æœ‰ç»§æ‰¿çš„ç±»ï¼Œå®ä¾‹ç±»å‹éƒ½æ˜¯ type ç±»å‹ï¼Œå¦‚æœç»å…¸ç±»è¢«ä½œä¸ºçˆ¶ç±»ï¼Œå­ç±»è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ—¶ä¼šå‡ºé”™ã€‚  
è¿™æ—¶ MRO çš„æ–¹æ³•ä¸º DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆå­èŠ‚ç‚¹é¡ºåºï¼šä»å·¦åˆ°å³ï¼‰ï¼‰ã€‚

```python
class A:   # æ˜¯æ²¡æœ‰ç»§æ‰¿ä»»ä½•çˆ¶ç±»çš„
    def __init__(self):
        print "è¿™æ˜¯ç»å…¸ç±»"

inspect.getmroï¼ˆAï¼‰å¯ä»¥æŸ¥çœ‹ç»å…¸ç±»çš„MROé¡ºåº

import inspect

class D:
    pass

class C(D):
    pass

class B(D):
    pass

class A(B, C):
    pass

if __name__ == '__main__':
    print inspect.getmro(A)
```

```python
>>  (<class __main__.A at 0x10e0e5530>, <class __main__.B at 0x10e0e54c8>, <class __main__.D at 0x10e0e53f8>, <class __main__.C at 0x10e0e5460>)
```

MRO çš„ DFS é¡ºåºå¦‚ä¸‹å›¾ï¼š

 ![3](https://cdn.jsdelivr.net/gh/masantu/statics/images/1088037-20200630195007277-97571993.png)

ä¸¤ç§ç»§æ‰¿æ¨¡å¼åœ¨ DFS ä¸‹çš„ä¼˜ç¼ºç‚¹ã€‚  
ç¬¬ä¸€ç§ï¼Œæˆ‘ç§°ä¸ºæ­£å¸¸ç»§æ‰¿æ¨¡å¼ï¼Œä¸¤ä¸ªäº’ä¸ç›¸å…³çš„ç±»çš„å¤šç»§æ‰¿ï¼Œè¿™ç§æƒ…å†µ DFS é¡ºåºæ­£å¸¸ï¼Œä¸ä¼šå¼•èµ·ä»»ä½•é—®é¢˜ï¼›

ç¬¬äºŒç§ï¼Œæ£±å½¢ç»§æ‰¿æ¨¡å¼ï¼Œå­˜åœ¨å…¬å…±çˆ¶ç±»ï¼ˆDï¼‰çš„å¤šç»§æ‰¿ï¼ˆæœ‰ç§ D å­—ä¸€æ—çš„æ„Ÿè§‰ï¼‰ï¼Œè¿™ç§æƒ…å†µä¸‹ DFS å¿…å®šç»è¿‡å…¬å…±çˆ¶ç±»ï¼ˆDï¼‰ï¼Œè¿™æ—¶å€™æƒ³æƒ³ï¼Œå¦‚æœè¿™ä¸ªå…¬å…±çˆ¶ç±»ï¼ˆDï¼‰æœ‰ä¸€äº›åˆå§‹åŒ–å±æ€§æˆ–è€…æ–¹æ³•ï¼Œä½†æ˜¯å­ç±»ï¼ˆCï¼‰åˆé‡å†™äº†è¿™äº›å±æ€§æˆ–è€…æ–¹æ³•ï¼Œé‚£ä¹ˆæŒ‰ç…§ DFS é¡ºåºå¿…å®šæ˜¯ä¼šå…ˆæ‰¾åˆ° D çš„å±æ€§æˆ–æ–¹æ³•ï¼Œé‚£ä¹ˆ C çš„å±æ€§æˆ–è€…æ–¹æ³•å°†æ°¸è¿œè®¿é—®ä¸åˆ°ï¼Œå¯¼è‡´ C åªèƒ½ç»§æ‰¿æ— æ³•é‡å†™ï¼ˆoverrideï¼‰ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ–°å¼ç±»ä¸ä½¿ç”¨ DFS çš„åŸå› ï¼Œå› ä¸ºä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå…¬å…±çš„ç¥–å…ˆ objectã€‚

- Python2.2 ç‰ˆæœ¬ï¼šæ–°å¼ç±»ï¼ˆnew-style classï¼‰è¯ç”Ÿ

ä¸ºäº†ä½¿ç±»å’Œå†…ç½®ç±»å‹æ›´åŠ ç»Ÿä¸€ï¼Œå¼•å…¥äº†æ–°å¼ç±»ã€‚æ–°å¼ç±»çš„æ¯ä¸ªç±»éƒ½ç»§æ‰¿äºä¸€ä¸ªåŸºç±»ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰ç±»æˆ–è€…å…¶å®ƒç±»ï¼Œé»˜è®¤ç»§æ‰¿äº objectã€‚å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

è¿™æ—¶æœ‰ä¸¤ç§ MRO çš„æ–¹æ³•  

1. å¦‚æœæ˜¯ç»å…¸ç±» MRO ä¸º DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆå­èŠ‚ç‚¹é¡ºåºï¼šä»å·¦åˆ°å³ï¼‰ï¼‰ã€‚  
2. å¦‚æœæ˜¯æ–°å¼ç±» MRO ä¸º BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆå­èŠ‚ç‚¹é¡ºåºï¼šä»å·¦åˆ°å³ï¼‰ï¼‰ã€‚

```python
Class A(object):   # ç»§æ‰¿äºobject
    def __init__(self): print "è¿™æ˜¯æ–°å¼ç±»" A.__mro__ å¯ä»¥æŸ¥çœ‹æ–°å¼ç±»çš„é¡ºåº
```

MRO çš„ BFS é¡ºåºå¦‚ä¸‹å›¾ï¼š

 ![2](https://cdn.jsdelivr.net/gh/masantu/statics/images/1088037-20200630195406979-1243876785.png)

ä¸¤ç§ç»§æ‰¿æ¨¡å¼åœ¨ BFS ä¸‹çš„ä¼˜ç¼ºç‚¹ã€‚  
ç¬¬ä¸€ç§ï¼Œæ­£å¸¸ç»§æ‰¿æ¨¡å¼ï¼Œçœ‹èµ·æ¥æ­£å¸¸ï¼Œä¸è¿‡å®é™…ä¸Šæ„Ÿè§‰å¾ˆåˆ«æ‰­ï¼Œæ¯”å¦‚ B æ˜æ˜ç»§æ‰¿äº† D çš„æŸä¸ªå±æ€§ï¼ˆå‡è®¾ä¸º fooï¼‰ï¼ŒC ä¸­ä¹Ÿå®ç°äº†è¿™ä¸ªå±æ€§ fooï¼Œé‚£ä¹ˆ BFS æ˜æ˜å…ˆè®¿é—® B ç„¶åå†å»è®¿é—® Cï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆ foo è¿™ä¸ªå±æ€§ä¼šæ˜¯ Cï¼Ÿè¿™ç§åº”è¯¥å…ˆä» B å’Œ B çš„çˆ¶ç±»å¼€å§‹æ‰¾çš„é¡ºåºï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå•è°ƒæ€§ã€‚

ç¬¬äºŒç§ï¼Œæ£±å½¢ç»§æ‰¿æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¸‹é¢ï¼ŒBFS çš„æŸ¥æ‰¾é¡ºåºè™½ç„¶è§£å†³äº† DFS é¡ºåºä¸‹é¢çš„æ£±å½¢é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯è¿èƒŒäº†æŸ¥æ‰¾çš„å•è°ƒæ€§ã€‚

å› ä¸ºè¿èƒŒäº†å•è°ƒæ€§ï¼Œæ‰€ä»¥ BFS æ–¹æ³•åªåœ¨ Python2.2 ä¸­å‡ºç°äº†ï¼Œåœ¨å…¶åç‰ˆæœ¬ä¸­ç”¨ C3 ç®—æ³•å–ä»£äº† BFSã€‚

- Python2.3 åˆ° Python2.7ï¼šç»å…¸ç±»ã€æ–°å¼ç±»å’Œå¹³å‘å±•

å› ä¸ºä¹‹å‰çš„ BFS å­˜åœ¨è¾ƒå¤§çš„é—®é¢˜ï¼Œæ‰€ä»¥ä» Python2.3 å¼€å§‹æ–°å¼ç±»çš„ MRO å–è€Œä»£ä¹‹çš„æ˜¯ C3 ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ C3 ç®—æ³•è‚¯å®šè§£å†³äº†å•è°ƒæ€§é—®é¢˜ï¼Œå’Œåªèƒ½ç»§æ‰¿æ— æ³•é‡å†™çš„é—®é¢˜ã€‚C3 ç®—æ³•å…·ä½“å®ç°ç¨åè®²è§£ã€‚

MRO çš„ C3 ç®—æ³•é¡ºåºå¦‚ä¸‹å›¾ï¼šçœ‹èµ·ç®€ç›´æ˜¯ DFS å’Œ BFS çš„åˆä½“æœ‰æœ¨æœ‰ã€‚ä½†æ˜¯ä»…ä»…æ˜¯çœ‹èµ·æ¥åƒè€Œå·²ã€‚

![3](https://cdn.jsdelivr.net/gh/masantu/statics/images/1088037-20200630195910366-1399325863.png)

- Python3 åˆ°è‡³ä»Šï¼šæ–°å¼ç±»ä¸€ç»Ÿæ±Ÿæ¹–  

Python3 å¼€å§‹å°±åªå­˜åœ¨æ–°å¼ç±»äº†ï¼Œé‡‡ç”¨çš„ MRO ä¹Ÿä¾æ—§æ˜¯ C3 ç®—æ³•ã€‚

## ç¥å¥‡çš„ç®—æ³• C3

> take the head of the first list, i.e L[B1][0]; if this head is not in the tail of any of the other lists, then add it to the linearization of C and remove it from the lists in the merge, otherwise look at the head of the next list and take it, if it is a good head. Then repeat the operation until all the class are removed or it is impossible to find good heads. In this case, it is impossible to construct the merge, Python 2.3 will refuse to create the class C and will raise an exception.

C3 ç®—æ³•çš„æœ¬è´¨å°±æ˜¯ Mergeï¼Œä¸æ–­åœ°æŠŠ mro()å‡½æ•°è¿”å›çš„åºåˆ—è¿›è¡Œ Mergeï¼Œè§„åˆ™å¦‚ä¸‹ï¼š

1. å¦‚æœç¬¬ä¸€ä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¯åç»­åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…ä¸å†åç»­åºåˆ—ä¸­å†æ¬¡å‡ºç°ï¼Œåˆ™å°†è¿™ä¸ªå…ƒç´ åˆå¹¶åˆ°æœ€ç»ˆçš„æ–¹æ³•è§£æé¡ºåºåºåˆ—ä¸­ï¼Œå¹¶ä»å½“å‰æ“ä½œçš„å…¨éƒ¨åºåˆ—ä¸­åˆ é™¤ã€‚

2. å¦‚æœä¸ç¬¦åˆï¼Œåˆ™è·³è¿‡æ­¤å…ƒç´ ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤ 1 çš„åˆ¤æ–­è§„åˆ™

ä½¿ç”¨ç¬¬ä¸€æ®µä»£ç é€æ­¥è¿›è¡Œæ–¹æ³•è§£æï¼š

1.å…ˆæ‰“å° NewStyleClassB å’Œ NewStyleClassC çš„ mro()ï¼Œå¾—åˆ°ä»–ä»¬çš„ç»§æ‰¿é¡ºåºåºåˆ—

```python
[<class '__main__.NewStyleClassB'>, <class '__main__.NewStyleClassA'>, <class 'object'>]
[<class '__main__.NewStyleClassC'>, <class 'object'>]
```

2.æ ¹æ® C3 ç®—æ³•é€æ­¥å¯¹ç»§æ‰¿é¡ºåºè¿›è¡Œè§£æï¼š

```python

mro(SubNewStyleClass)
    = [SubNewStyleClass] + merge(mro(NewStyleClassB), mro(NewStyleClassC), [NewStyleClassB, NewStyleClassC])
    # æ ¹æ®ç¬¬ä¸€æ­¥çš„æ‰“å°ç»“æœï¼Œå¯ä»¥å¾—å‡º
    = [SubNewStyleClass] + merge([NewStyleClassB, NewStyleClassA, object],  [NewStyleClassC, NewStyleClassA, object], [NewStyleClassB, NewStyleClassC])
    # åˆ¤æ–­mergeçš„å½“å‰åºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  NewStyleClassB, åœ¨ç¬¬ä¸‰ä¸ªåºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿå­˜åœ¨ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆåºåˆ—å¹¶ä¸”åˆ é™¤ï¼š
    = [SubNewStyleClass, NewStyleClassB] + merge([NewStyleClassA, object],  [NewStyleClassC, NewStyleClassA, object], [NewStyleClassC])
    # åˆ¤æ–­mergeçš„å½“å‰åºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  NewStyleClassAï¼Œåœ¨ç¬¬äºŒä¸ªåºåˆ—ä¸­å­˜åœ¨ï¼Œå¹¶ä¸”ä¸ä¸ºç¬¬äºŒä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è·³è¿‡
    #  ç»§ç»­åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  NewStyleClassCï¼Œåœ¨ç¬¬ä¸‰ä¸ªåºåˆ—ä¸­å­˜åœ¨ï¼Œå¹¶ä¸”ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆåºåˆ—å¹¶ä¸”åˆ é™¤ï¼š
    = [SubNewStyleClass, NewStyleClassB, NewStyleClassC] + merge([NewStyleClassA, object], [NewStyleClassA, object])
    # ç›®å‰ç¬¬ä¸€ä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯NewStyleClassAï¼Œæ‰€ä»¥å†æ¬¡å¯¹NewStyleClassAè¿›è¡Œåˆ¤æ–­ã€‚
    # NewStyleClassAåœ¨ç¬¬äºŒä¸ªåºåˆ—ä¸­å­˜åœ¨ï¼Œå¹¶ä¸”ä¸ºç¬¬äºŒä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆåºåˆ—å¹¶ä¸”åˆ é™¤ï¼š
    = [SubNewStyleClass, NewStyleClassB, NewStyleClassC, NewStyleClassA] + merge([object], [object])
    # æœ€ç»ˆobjectï¼Œåœ¨ç¬¬äºŒä¸ªåºåˆ—ä¸­å‡ºç°ï¼Œå¹¶ä¸”ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆçš„åºåˆ—å¹¶ä¸”åˆ é™¤ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»§æ‰¿é¡ºåºï¼š
    = [SubNewStyleClass, NewStyleClassB, NewStyleClassC, NewStyleClassA, object)
```

è§£æçš„ç»“æœå’Œè°ƒç”¨ SubNewStyleClass.mro()æ–¹æ³•æ‰“å°å‡ºçš„ç»“æœæ˜¯ç›¸åŒçš„ï¼š

```python
[<class '__main__.SubNewStyleClass'>, <class '__main__.NewStyleClassB'>, <class '__main__.NewStyleClassC'>, <class '__main__.NewStyleClassA'>, <class 'object'>]
 ```

ä½¿ç”¨ç¬¬äºŒæ®µä»£ç é€æ­¥è¿›è¡Œæ–¹æ³•è§£æï¼š

1. å…ˆæ‰“å° NewStyleClassB å’Œ NewStyleClassC çš„ mro()ï¼Œå¾—åˆ°ä»–ä»¬çš„ç»§æ‰¿é¡ºåºåºåˆ—

```python
[<class '__main__.NewStyleClassB'>, <class '__main__.NewStyleClassA'>, <class 'object'>]
[<class '__main__.NewStyleClassC'>, <class 'object'>]
```

2. æ ¹æ® C3 ç®—æ³•é€æ­¥å¯¹ç»§æ‰¿é¡ºåºè¿›è¡Œè§£æï¼š

```python

mro(SubNewStyleClass)
ã€€ã€€= [SubNewStyleClass] + merge(mro(NewStyleClassB), mro(NewStyleClassC), [NewStyleClassB, NewStyleClassC])
ã€€ã€€# æ ¹æ®ç¬¬ä¸€æ­¥çš„æ‰“å°ç»“æœï¼Œå¯ä»¥å¾—å‡º
ã€€ã€€= [SubNewStyleClass] + merge([NewStyleClassB, NewStyleClassA, object],  [NewStyleClassC, object], [NewStyleClassB, NewStyleClassC])
ã€€ã€€# åˆ¤æ–­mergeçš„å½“å‰åºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  NewStyleClassB, åœ¨ç¬¬ä¸‰ä¸ªåºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿå­˜åœ¨ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆåºåˆ—å¹¶ä¸”åˆ é™¤ï¼š
ã€€ã€€= [SubNewStyleClass, NewStyleClassB] + merge([NewStyleClassA, object],  [NewStyleClassC, object], [NewStyleClassC])
ã€€ã€€# åˆ¤æ–­mergeçš„å½“å‰åºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  NewStyleClassAï¼Œåœ¨åç»­çš„åºåˆ—ä¸­éƒ½ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆçš„åºåˆ—å¹¶ä¸”åˆ é™¤ï¼š
ã€€ã€€= [SubNewStyleClass, NewStyleClassB, NewStyleClassA] + merge([object], [NewStyleClassC, object], [NewStyleClassC])
ã€€ã€€# åˆ¤æ–­mergeçš„å½“å‰åºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  objectï¼Œåœ¨ç¬¬äºŒä¸ªåºåˆ—ä¸­å‡ºç°ï¼Œå¹¶ä¸”ä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è·³è¿‡
ã€€ã€€# è·³è¿‡objectåï¼Œç»§ç»­åˆ¤æ–­ä¸‹ä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ NewStyleClassCï¼Œåœ¨ç¬¬ä¸‰ä¸ªåºåˆ—ä¸­å‡ºç°å¹¶ä¸”ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆçš„åºåˆ—å¹¶ä¸”åˆ é™¤ï¼š
ã€€ã€€= [SubNewStyleClass, NewStyleClassB, NewStyleClassA, NewStyleClassC] + merge([object], [object])
ã€€ã€€# å†æ¬¡åˆ¤æ–­objectï¼Œåœ¨ç¬¬äºŒä¸ªåºåˆ—ä¸­å‡ºç°ï¼Œå¹¶ä¸”ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°†å…¶åˆå¹¶åˆ°æœ€ç»ˆçš„åºåˆ—å¹¶ä¸”åˆ é™¤ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»§æ‰¿é¡ºåºï¼š
ã€€ã€€= [SubNewStyleClass, NewStyleClassB, NewStyleClassA, NewStyleClassC, object)
```

å’Œè°ƒç”¨ SubNewStyleClass.mro()æ–¹æ³•æ‰“å°å‡ºçš„ç»“æœæ˜¯ç›¸åŒçš„

```python
[<class '__main__.SubNewStyleClass'>, <class '__main__.NewStyleClassB'>, <class '__main__.NewStyleClassA'>, <class '__main__.NewStyleClassC'>, <class 'object'>]
 ```

C3 ç®—æ³•è§£å†³äº†å•è°ƒæ€§é—®é¢˜å’Œåªèƒ½ç»§æ‰¿æ— æ³•é‡å†™é—®é¢˜ï¼Œåœ¨å¾ˆå¤šæŠ€æœ¯æ–‡ç« åŒ…æ‹¬å®˜ç½‘ä¸­çš„ C3 ç®—æ³•ï¼Œéƒ½åªæœ‰é‚£ä¸ª merge list çš„å…¬å¼æ³•ï¼Œæƒ³çœ‹çš„è¯ç½‘ä¸Šå¾ˆå¤šï¼Œè‡ªå·±å¯ä»¥æŸ¥ã€‚ä½†æ˜¯ä»å…¬å¼å¾ˆéš¾ç†è§£åˆ°è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨ã€‚æˆ‘ç»è¿‡ä¸€ç•ªæ€è€ƒåï¼Œæˆ‘è®²è®²æˆ‘æ‰€ç†è§£çš„ C3 ç®—æ³•çš„æœ¬è´¨ã€‚å¦‚æœé”™äº†ï¼Œå¸Œæœ›æœ‰äººæŒ‡å‡ºæ¥ã€‚

å‡è®¾ç»§æ‰¿å…³ç³»å¦‚ä¸‹(å®˜ç½‘çš„ä¾‹å­)ï¼š

```python
class D(object):
    pass

class E(object):
    pass

class F(object):
    pass

class C(D, F):
    pass

class B(E, D):
    pass

class A(B, C):
    pass

if __name__ == '__main__':
    print(A.__mro__)
```

é¦–å…ˆå‡è®¾ç»§æ‰¿å…³ç³»æ˜¯ä¸€å¼ å›¾ï¼ˆäº‹å®ä¸Šä¹Ÿæ˜¯ï¼‰ï¼Œæˆ‘ä»¬æŒ‰ç±»ç»§æ‰¿æ˜¯çš„é¡ºåºï¼ˆclass A(B, C)æ‹¬å·é‡Œé¢çš„é¡ºåº Bï¼ŒCï¼‰ï¼Œå­ç±»æŒ‡å‘çˆ¶ç±»ï¼Œæ„ä¸€å¼ å›¾ã€‚

 ![1](https://cdn.jsdelivr.net/gh/masantu/statics/images/1088037-20200630200524362-1041481937.png)

æˆ‘ä»¬è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼šå•è°ƒæ€§é—®é¢˜å’Œä¸èƒ½é‡å†™çš„é—®é¢˜ã€‚  
  
å¾ˆå®¹æ˜“å‘ç°è¦è§£å†³å•è°ƒæ€§ï¼Œåªè¦ä¿è¯ä»æ ¹(A)åˆ°å¶(object)ï¼Œä»å·¦åˆ°å³çš„è®¿é—®é¡ºåºå³å¯ã€‚

é‚£ä¹ˆå¯¹äºåªèƒ½ç»§æ‰¿ï¼Œä¸èƒ½é‡å†™çš„é—®é¢˜å‘¢ï¼Ÿå…ˆåˆ†æè¿™ä¸ªé—®é¢˜çš„æœ¬è´¨åŸå› ï¼Œä¸»è¦æ˜¯å› ä¸ºå…ˆè®¿é—®äº†å­ç±»çš„çˆ¶ç±»å¯¼è‡´çš„ã€‚é‚£ä¹ˆæ€ä¹ˆè§£å†³åªèƒ½å…ˆè®¿é—®å­ç±»å†è®¿é—®çˆ¶ç±»çš„é—®é¢˜å‘¢ï¼Ÿå¦‚æœç†Ÿæ‚‰å›¾è®ºçš„äººåº”è¯¥èƒ½é©¬ä¸Šæƒ³åˆ°æ‹“æ‰‘æ’åºï¼Œè¿™é‡Œå¼•ç”¨ä¸€ä¸‹ç™¾ç§‘çš„çš„å®šä¹‰:

å¯¹ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾(Directed Acyclic Graph ç®€ç§° DAG)G è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œæ˜¯å°† G ä¸­æ‰€æœ‰é¡¶ç‚¹æ’æˆä¸€ä¸ªçº¿æ€§åºåˆ—ï¼Œä½¿å¾—å›¾ä¸­ä»»æ„ä¸€å¯¹é¡¶ç‚¹ u å’Œ vï¼Œè‹¥è¾¹(u,v)âˆˆE(G)ï¼Œåˆ™ u åœ¨çº¿æ€§åºåˆ—ä¸­å‡ºç°åœ¨ v ä¹‹å‰ã€‚é€šå¸¸ï¼Œè¿™æ ·çš„çº¿æ€§åºåˆ—ç§°ä¸ºæ»¡è¶³æ‹“æ‰‘æ¬¡åº(Topological Order)çš„åºåˆ—ï¼Œç®€ç§°æ‹“æ‰‘åºåˆ—ã€‚ç®€å•çš„è¯´ï¼Œç”±æŸä¸ªé›†åˆä¸Šçš„ä¸€ä¸ªååºå¾—åˆ°è¯¥é›†åˆä¸Šçš„ä¸€ä¸ªå…¨åºï¼Œè¿™ä¸ªæ“ä½œç§°ä¹‹ä¸ºæ‹“æ‰‘æ’åºã€‚

å› ä¸ºæ‹“æ‰‘æ’åºè‚¯å®šæ˜¯æ ¹åˆ°å¶ï¼ˆä¹Ÿä¸èƒ½è¯´æ˜¯å¶äº†ï¼Œå› ä¸ºå·²ç»ä¸æ˜¯æ ‘äº†ï¼‰ï¼Œæ‰€ä»¥åªè¦æ»¡è¶³ä»å·¦åˆ°å³ï¼Œå¾—åˆ°çš„æ‹“æ‰‘æ’åºå°±æ˜¯ç»“æœï¼Œå…³äºæ‹“æ‰‘æ’åºç®—æ³•ï¼Œå¤§å­¦çš„æ•°æ®ç»“æ„æœ‰æ•™ï¼Œè¿™é‡Œä¸åšè®²è§£ï¼Œä¸æ‡‚çš„å¯ä»¥è‡ªè¡Œè°·æ­Œæˆ–è€…ç¿»ä¸€ä¸‹ä¹¦ï¼Œå»ºè®®äº†è§£å®Œç®—æ³•å†å¾€ä¸‹çœ‹ã€‚

é‚£ä¹ˆæ¨¡æ‹Ÿä¸€ä¸‹ä¾‹å­çš„æ‹“æ‰‘æ’åºï¼šé¦–å…ˆæ‰¾å…¥åº¦ä¸º 0 çš„ç‚¹ï¼Œåªæœ‰ä¸€ä¸ª Aï¼ŒæŠŠ A æ‹¿å‡ºæ¥ï¼ŒæŠŠ A ç›¸å…³çš„è¾¹å‰ªæ‰ï¼Œå†æ‰¾ä¸‹ä¸€ä¸ªå…¥åº¦ä¸º 0 çš„ç‚¹ï¼Œæœ‰ä¸¤ä¸ªç‚¹ï¼ˆB,Cï¼‰,å–æœ€å·¦åŸåˆ™ï¼Œæ‹¿ Bï¼Œè¿™æ˜¯æ’åºæ˜¯ Aâ†’Bï¼Œç„¶åå‰ª B ç›¸å…³çš„è¾¹ï¼Œè¿™æ—¶å€™å…¥åº¦ä¸º 0 çš„ç‚¹æœ‰ E å’Œ Cï¼Œå–æœ€å·¦ã€‚è¿™æ—¶å€™æ’åºä¸º Aâ†’Bâ†’Eï¼Œæ¥ç€å‰ª E ç›¸å…³çš„è¾¹ï¼Œè¿™æ—¶åªæœ‰ä¸€ä¸ªç‚¹å…¥åº¦ä¸º 0ï¼Œé‚£å°±æ˜¯ Cï¼Œå– Cï¼Œé¡ºåºä¸º Aâ†’Bâ†’Eâ†’Cã€‚å‰ª C çš„è¾¹å¾—åˆ°ä¸¤ä¸ªå…¥åº¦ä¸º 0 çš„ç‚¹ï¼ˆDFï¼‰ï¼Œå–æœ€å·¦ Dï¼Œé¡ºåºä¸º Aâ†’Bâ†’Eâ†’Câ†’Dï¼Œç„¶åå‰ª D ç›¸å…³çš„è¾¹ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå…¥åº¦ä¸º 0 çš„å°±æ˜¯ Fï¼Œç„¶åæ˜¯ objectã€‚é‚£ä¹ˆæœ€åçš„æ’åºå°±ä¸º Aâ†’Bâ†’Eâ†’Câ†’Dâ†’Fâ†’objectã€‚

å¯¹æ¯”ä¸€ä¸‹ `A.__mro__`çš„ç»“æœ

```python
(<class '__main__.A'>, <class '__main__.B'>, <class '__main__.E'>, <class '__main__.C'>, <class '__main__.D'>, <class '__main__.F'>, <type 'object'>)
```

## Python å¤šç»§æ‰¿è¯¦è§£

```python
class A(object):    # A must be new-style class
   def __init__(self):
    print "enter A"
    print "leave A"
 
class B(C):     # A --> C
   def __init__(self):
    print "enter B"
    super(B, self).__init__()
    print "leave B"
```

åœ¨æˆ‘ä»¬çš„å°è±¡ä¸­ï¼Œå¯¹äº super(B, self).__init__()æ˜¯è¿™æ ·ç†è§£çš„ï¼šsuper(B, self)é¦–å…ˆæ‰¾åˆ° B çš„çˆ¶ç±»ï¼ˆå°±æ˜¯ç±» Aï¼‰ï¼Œç„¶åæŠŠç±» B çš„å¯¹è±¡ self è½¬æ¢ä¸ºç±» A çš„å¯¹è±¡ï¼Œç„¶åâ€œè¢«è½¬æ¢â€çš„ç±» A å¯¹è±¡è°ƒç”¨è‡ªå·±çš„__init__å‡½æ•°ã€‚  
  
æœ‰ä¸€å¤©æŸåŒäº‹è®¾è®¡äº†ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„ç±»ä½“ç³»ç»“æ„ï¼ˆæˆ‘ä»¬å…ˆä¸è¦ç®¡è¿™ä¸ªç±»ä½“ç³»è®¾è®¡å¾—æ˜¯å¦åˆç†ï¼Œä»…æŠŠè¿™ä¸ªä¾‹å­ä½œä¸ºä¸€ä¸ªé¢˜ç›®æ¥ç ”ç©¶å°±å¥½ï¼‰ï¼Œä»£ç å¦‚ä¸‹  

```python
# ä»£ç æ®µ4ï¼š

class A(object):
    def __init__(self):
        print "enter A"
        print "leave A"
 
class B(object):
    def __init__(self):
        print "enter B"
        print "leave B"
 
class C(A):
    def __init__(self):
        print "enter C"
        super(C, self).__init__()
        print "leave C"
 
class D(A):
    def __init__(self):
        print "enter D"
        super(D, self).__init__()
        print "leave D"

class E(B, C):
    def __init__(self):
        print "enter E"
        B.__init__(self)
        C.__init__(self)
        print "leave E"
 
class F(E, D):
    def __init__(self):
        print "enter F"
        E.__init__(self)
        D.__init__(self)
        print "leave F"
```

f = F() ï¼Œç»“æœå¦‚ä¸‹ï¼š

```plain
enter F enter E enter B leave B enter C enter D enter A leave A leave D leave C leave E enter D enter A leave A leave D leave F  
```

æ˜æ˜¾åœ°ï¼Œç±» A å’Œç±» D çš„åˆå§‹åŒ–å‡½æ•°è¢«é‡å¤è°ƒç”¨äº† 2 æ¬¡ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ç»“æœï¼æˆ‘ä»¬æ‰€æœŸæœ›çš„ç»“æœæ˜¯æœ€å¤šåªæœ‰ç±» A çš„åˆå§‹åŒ–å‡½æ•°è¢«è°ƒç”¨ 2 æ¬¡â€”â€”å…¶å®è¿™æ˜¯å¤šç»§æ‰¿çš„ç±»ä½“ç³»å¿…é¡»é¢å¯¹çš„é—®é¢˜ã€‚æˆ‘ä»¬æŠŠä»£ç æ®µ 4 çš„ç±»ä½“ç³»ç”»å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾ï¼š

```plain
    object  
   |       \\  
   |        A  
   |      / |  
   B  C  D  
    \\   /   |  
      E    |  
        \\   |  
          F
```

æŒ‰æˆ‘ä»¬å¯¹`super`çš„ç†è§£ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨è°ƒç”¨ç±» C çš„åˆå§‹åŒ–å‡½æ•°æ—¶ï¼Œåº”è¯¥æ˜¯è°ƒç”¨ç±» A çš„åˆå§‹åŒ–å‡½æ•°ï¼Œä½†äº‹å®ä¸Šå´è°ƒç”¨äº†ç±» D çš„åˆå§‹åŒ–å‡½æ•°ã€‚å¥½ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜ï¼

ä¹Ÿå°±æ˜¯è¯´ï¼Œmro ä¸­è®°å½•äº†ä¸€ä¸ªç±»çš„æ‰€æœ‰åŸºç±»çš„ç±»ç±»å‹åºåˆ—ã€‚æŸ¥çœ‹ mro çš„è®°å½•ï¼Œå‘è§‰åŒ…å« 7 ä¸ªå…ƒç´ ï¼Œ7 ä¸ªç±»ååˆ†åˆ«ä¸ºï¼š

```plain
 F E B C D A object
```

ä»è€Œè¯´æ˜äº†ä¸ºä»€ä¹ˆåœ¨`C.__init__`ä¸­ä½¿ç”¨`super(C, self).__init__()`ä¼šè°ƒç”¨ç±» D çš„åˆå§‹åŒ–å‡½æ•°äº†ã€‚ ???

æˆ‘ä»¬æŠŠä»£ç æ®µ 4 æ”¹å†™ä¸ºï¼š

```python
# ä»£ç æ®µ5ï¼š
class A(object):
    def __init__(self):
        print "enter A"
        super(A, self).__init__()  # new
        print "leave A"
 
class B(object):
    def __init__(self):
        print "enter B"
        super(B, self).__init__()  # new
        print "leave B"
 
class C(A):
    def __init__(self):
        print "enter C"
        super(C, self).__init__()
        print "leave C"
 
class D(A):
    def __init__(self):
        print "enter D"
        super(D, self).__init__()
        print "leave D"
        
class E(B, C):
    def __init__(self):
        print "enter E"
        super(E, self).__init__()  # change
        print "leave E"
 
class F(E, D):
    def __init__(self):
        print "enter F"
        super(F, self).__init__()  # change
        print "leave F"
```

f = F()ï¼Œæ‰§è¡Œç»“æœï¼š

```plain
enter F enter E enter B enter C enter D enter A leave A leave D leave C leave B leave E leave F  
```

å¯è§ï¼ŒF çš„åˆå§‹åŒ–ä¸ä»…å®Œæˆäº†æ‰€æœ‰çš„çˆ¶ç±»çš„è°ƒç”¨ï¼Œè€Œä¸”ä¿è¯äº†æ¯ä¸€ä¸ªçˆ¶ç±»çš„åˆå§‹åŒ–å‡½æ•°åªè°ƒç”¨ä¸€æ¬¡ã€‚  

### å°ç»“

ã€€ã€€1. super å¹¶ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªç±»åï¼Œå½¢å¦‚ super(B, self)äº‹å®ä¸Šè°ƒç”¨äº† super ç±»çš„åˆå§‹åŒ–å‡½æ•°ï¼Œäº§ç”Ÿäº†ä¸€ä¸ª super å¯¹è±¡ï¼›  
ã€€ã€€2. super ç±»çš„åˆå§‹åŒ–å‡½æ•°å¹¶æ²¡æœ‰åšä»€ä¹ˆç‰¹æ®Šçš„æ“ä½œï¼Œåªæ˜¯ç®€å•è®°å½•äº†ç±»ç±»å‹å’Œå…·ä½“å®ä¾‹ï¼›  
ã€€ã€€3. super(B, self).func çš„è°ƒç”¨å¹¶ä¸æ˜¯ç”¨äºè°ƒç”¨å½“å‰ç±»çš„çˆ¶ç±»çš„ func å‡½æ•°ï¼›  
ã€€ã€€4. Python çš„å¤šç»§æ‰¿ç±»æ˜¯é€šè¿‡ mro çš„æ–¹å¼æ¥ä¿è¯å„ä¸ªçˆ¶ç±»çš„å‡½æ•°è¢«é€ä¸€è°ƒç”¨ï¼Œè€Œä¸”ä¿è¯æ¯ä¸ªçˆ¶ç±»å‡½æ•°åªè°ƒç”¨ä¸€æ¬¡ï¼ˆå¦‚æœæ¯ä¸ªç±»éƒ½ä½¿ç”¨ superï¼‰ï¼›  
ã€€ã€€5. æ··ç”¨ super ç±»å’Œéç»‘å®šçš„å‡½æ•°æ˜¯ä¸€ä¸ªå±é™©è¡Œä¸ºï¼Œè¿™å¯èƒ½å¯¼è‡´åº”è¯¥è°ƒç”¨çš„çˆ¶ç±»å‡½æ•°æ²¡æœ‰è°ƒç”¨æˆ–è€…ä¸€ä¸ªçˆ¶ç±»å‡½æ•°è¢«è°ƒç”¨å¤šæ¬¡ã€‚

## ç›¸å…³é“¾æ¥

- [Python æ–°å¼ç±»ç»§æ‰¿çš„ C3 ç®—æ³•](https://www.cnblogs.com/blackmatrix/p/5644023.html)
- [C3 ç®—æ³• - silencioã€‚ - åšå®¢å›­](https://www.cnblogs.com/bubu99/p/12657564.html)
- [Python ä¸­çš„ MRO ä¸å¤šç»§æ‰¿](https://blog.csdn.net/qwertyupoiuytr/article/details/56439134)
- [Python ä¸­ Class ç±»ç”¨æ³•å®ä¾‹åˆ†æ](http://www.jb51.net/article/74743.htm)
- [python å¤šç»§æ‰¿è¯¦è§£](http://www.pythontab.com/html/2013/pythonhexinbiancheng_0828/550.html)
- [ä½ çœŸçš„ç†è§£ Python ä¸­ MRO ç®—æ³•å—ï¼Ÿ - Hello_BeautifulWorld - åšå®¢å›­](https://www.cnblogs.com/devilmaycry812839668/p/13215612.html)
- [Python å¤šç»§æ‰¿ä¸ super ä½¿ç”¨è¯¦è§£_æ¶¤ç”Ÿæ‰‹è®°-CSDN åšå®¢](https://blog.csdn.net/qq_26442553/article/details/81775449)

---
title: pandas å­¦ä¹ 
tags: 
  - pandas
date: 2021-01-15 12:27:56
permalink: /python/pandas/
categories: 
  - ğŸPython
  - æ•°æ®åˆ†æ
link: https://pyzh.readthedocs.io/en/latest/python-pandas.html
---

ä»€ä¹ˆæ˜¯ pandas
--------------

[pandas](https://github.com/pandas-dev/pandas) : Python æ•°æ®åˆ†ææ¨¡å—

pandas æ˜¯ä¸ºäº†è§£å†³æ•°æ®åˆ†æä»»åŠ¡è€Œåˆ›å»ºçš„ï¼Œçº³å…¥äº†å¤§é‡çš„åº“å’Œæ ‡å‡†æ•°æ®æ¨¡å‹ï¼Œæä¾›äº†é«˜æ•ˆåœ°æ“ä½œå¤§å‹æ•°æ®é›†æ‰€éœ€çš„å·¥å…·ã€‚

`pandasä¸­çš„æ•°æ®ç»“æ„` :

1.  Series: ä¸€ç»´æ•°ç»„ï¼Œç±»ä¼¼äº python ä¸­çš„åŸºæœ¬æ•°æ®ç»“æ„ listï¼ŒåŒºåˆ«æ˜¯ series åªå…è®¸å­˜å‚¨ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æ›´æœ‰æ•ˆçš„ä½¿ç”¨å†…å­˜ï¼Œæé«˜è¿ç®—æ•ˆç‡ã€‚å°±åƒæ•°æ®åº“ä¸­çš„åˆ—æ•°æ®ã€‚
2.  DataFrame: äºŒç»´çš„è¡¨æ ¼å‹æ•°æ®ç»“æ„ã€‚å¾ˆå¤šåŠŸèƒ½ä¸ R ä¸­çš„ data.frame ç±»ä¼¼ã€‚å¯ä»¥å°† DataFrame ç†è§£ä¸º Series çš„å®¹å™¨ã€‚
3.  Panelï¼šä¸‰ç»´çš„æ•°ç»„ï¼Œå¯ä»¥ç†è§£ä¸º DataFrame çš„å®¹å™¨ã€‚

ååˆ†é’Ÿæå®š pandasï¼ˆè¯‘æ–‡+æ³¨é‡Šï¼‰
-----------------------------

`è¯´æ˜` : æœ¬æ–‡æ˜¯ pandas å®˜ç½‘ [10 Minutes to pandas](http://pandas.pydata.org/pandas-docs/stable/10min.html) çš„ç¿»è¯‘ã€‚

<<<<<<< HEAD
å¼•å…¥éœ€è¦çš„åŒ…:
=======
`å¼•å…¥éœ€è¦çš„åŒ…`:
>>>>>>> 42b5b59 (add posts)
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
```
`æ³¨`

-   numpy æ˜¯ä¸€ä¸ª python å®ç°çš„ç§‘å­¦è®¡ç®—åŒ…
-   matplotlib æ˜¯ä¸€ä¸ª python çš„ 2D ç»˜å›¾åº“
-   æ›´å¤šç« èŠ‚è¯·æŸ¥çœ‹[Cookbook](http://pandas.pydata.org/pandas-docs/stable/cookbook.html#cookbook)

åˆ›å»ºå¯¹è±¡
--------

è¯¦æƒ…è¯·æŸ¥çœ‹[æ•°æ®ç»“æ„ä»‹ç»](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dsintro)

1.é€šè¿‡ä¼ å…¥ä¸€ä¸ªåˆ—è¡¨æ¥åˆ›å»º[Series](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html#pandas.Series) ï¼Œpandas ä¼šåˆ›å»ºé»˜è®¤çš„æ•´å½¢æŒ‡æ ‡:
```python
    >>> s = pd.Series([1,3,5,np.nan,6,8])
    >>> s
    0  1
    1  3
    2  5
    3  NaN
    4  6
    5  8
    dtype: float64
```
2.é€šè¿‡ä¼ é€’æ•°å­—æ•°ç»„ã€æ—¶é—´ç´¢å¼•ã€åˆ—æ ‡ç­¾æ¥åˆ›å»º[DataFrame](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html#pandas.DataFrame):
```python
    >>> dates = pd.date_range('20130101',periods=6)
    >>> dates
        DatetimeIndex(['2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04',
                       '2013-01-05', '2013-01-06'],
                       dtype='datetime64[ns]', freq='D')

    >>> df = pd.DataFrame(np.random.randn(6,4),index=dates,columns=list('ABCD'))
    >>> df
                           A         B         C         D
        2013-01-01  0.859619 -0.545903  0.012447  1.257684
        2013-01-02  0.119622 -0.484051  0.404728  0.360880
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691
        2013-01-04 -0.921692  0.876693 -0.670553  1.468060
        2013-01-05 -0.300317 -0.011320 -1.376442  1.694740
        2013-01-06 -1.903683  0.786785 -0.194179  0.177973
```
`æ³¨`

-   `np.random.randn(6,4)` å³åˆ›å»º 6 è¡Œ 4 åˆ—çš„éšæœºæ•°å­—æ•°ç»„

3.é€šè¿‡ä¼ é€’èƒ½è¢«è½¬æ¢æˆç±»ä¼¼ç»“æ„çš„å­—å…¸æ¥åˆ›å»º DataFrame:
```python
    >>>df2 = pd.DataFrame({'A' : 1.,
                           'B' : pd.Timestamp('20130102'), 
                           'C' : pd.Series(1,index=list(range(4)),dtype='float32'),
                           'D' : np.array([3] * 4,dtype='int32'), 
                           'E' : pd.Categorical(["test","train","test","train"]), 
                           'F' : 'foo' })

    >>> df2
           A          B  C  D      E    F
        0  1 2013-01-02  1  3   test  foo
        1  1 2013-01-02  1  3  train  foo
        2  1 2013-01-02  1  3   test  foo
        3  1 2013-01-02  1  3  train  foo
```
4.æŸ¥çœ‹å„åˆ—çš„[dtypes](http://pandas.pydata.org/pandas-docs/stable/basics.html#basics-dtypes):
```python
    >>> df2.dtypes
        A           float64
        B    datetime64[ns]
        C           float32
        D             int32
        E          category
        F            object
        dtype: object
```
5.å¦‚æœä½¿ç”¨ IPythonï¼ŒTab ä¼šè‡ªåŠ¨è¡¥å…¨æ‰€æœ‰çš„å±æ€§å’Œè‡ªå®šä¹‰çš„åˆ—ï¼Œå¦‚ä¸‹æ‰€ç¤º:
```python
    >>> df2.<TAB>
        df2.A                   df2.boxplot
        df2.abs                 df2.C
        df2.add                 df2.clip
        df2.add_prefix          df2.clip_lower
        df2.add_suffix          df2.clip_upper
        df2.align               df2.columns
        df2.all                 df2.combine
        df2.any                 df2.combineAdd
        df2.append              df2.combine_first
        df2.apply               df2.combineMult
        df2.applymap            df2.compound
        df2.as_blocks           df2.consolidate
        df2.asfreq              df2.convert_objects
        df2.as_matrix           df2.copy
        df2.astype              df2.corr
        df2.at                  df2.corrwith
        df2.at_time             df2.count
        df2.axes                df2.cov
        df2.B                   df2.cummax
        df2.between_time        df2.cummin
        df2.bfill               df2.cumprod
        df2.blocks              df2.cumsum
        df2.bool                df2.D
```
å¯ä»¥çœ‹åˆ°ï¼ŒAã€Bã€Cã€D åˆ—å‡é€šè¿‡ Tab è‡ªåŠ¨ç”Ÿæˆ

æŸ¥çœ‹æ•°æ®
--------

è¯¦æƒ…è¯·æŸ¥çœ‹[åŸºæœ¬åŠŸèƒ½](http://pandas.pydata.org/pandas-docs/stable/basics.html#basics)

1.æŸ¥çœ‹ DataFrame å¤´éƒ¨&å°¾éƒ¨æ•°æ®:
```python
    >>> df.head()
                           A         B         C         D
        2013-01-01  0.859619 -0.545903  0.012447  1.257684
        2013-01-02  0.119622 -0.484051  0.404728  0.360880
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691
        2013-01-04 -0.921692  0.876693 -0.670553  1.468060
        013-01-05 -0.300317 -0.011320 -1.376442  1.694740
    >>> df.tail(3)
                           A         B         C         D
        2013-01-04 -0.921692  0.876693 -0.670553  1.468060
        2013-01-05 -0.300317 -0.011320 -1.376442  1.694740
        2013-01-06 -1.903683  0.786785 -0.194179  0.177973
```
2.æŸ¥çœ‹ç´¢å¼•ã€åˆ—ã€å’Œæ•°ç»„æ•°æ®:
```python
    >>> df.index
        DatetimeIndex(['2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04',
                       '2013-01-05', '2013-01-06'],
                        dtype='datetime64[ns]', freq='D')
    >>> df.columns
        Index([u'A', u'B', u'C', u'D'], dtype='object')
    >>> df.values
        array([[ 0.85961861, -0.54590304,  0.01244705,  1.25768432],
        [ 0.11962178, -0.4840508 ,  0.40472795,  0.36088029],
        [-0.7192337 , -0.39617432,  0.63523701,  0.21669124],
        [-0.92169244,  0.87669275, -0.67055318,  1.46806034],
        [-0.30031679, -0.01132035, -1.37644224,  1.69474031],
        [-1.90368258,  0.78678454, -0.19417942,  0.17797326]])
```
3.æŸ¥çœ‹æ•°æ®çš„å¿«é€Ÿç»Ÿè®¡ç»“æœ:
```python
    >>> df.describe()
                      A         B         C         D
        count  6.000000  6.000000  6.000000  6.000000
        mean  -0.477614  0.037671 -0.198127  0.862672
        std    0.945047  0.643196  0.736736  0.685969
        min   -1.903683 -0.545903 -1.376442  0.177973
        25%   -0.871078 -0.462082 -0.551460  0.252739
        50%   -0.509775 -0.203747 -0.090866  0.809282
        75%    0.014637  0.587258  0.306658  1.415466
        max    0.859619  0.876693  0.635237  1.694740
```
4.å¯¹æ•°æ®è¿›è¡Œè¡Œåˆ—è½¬æ¢:
```python
    >>> df.T
           2013-01-01  2013-01-02  2013-01-03  2013-01-04  2013-01-05  2013-01-06
        A    0.859619    0.119622   -0.719234   -0.921692   -0.300317   -1.903683
        B   -0.545903   -0.484051   -0.396174    0.876693   -0.011320    0.786785
        C    0.012447    0.404728    0.635237   -0.670553   -1.376442   -0.194179
        D    1.257684    0.360880    0.216691    1.468060    1.694740    0.177973
```
5.æŒ‰[axis](http://stackoverflow.com/questions/22149584/what-does-axis-in-pandas-mean)æ’åº:
```python
    >>> df.sort_index(axis=1, ascending=False)
                           D         C         B         A
        2013-01-01  1.257684  0.012447 -0.545903  0.859619
        2013-01-02  0.360880  0.404728 -0.484051  0.119622
        2013-01-03  0.216691  0.635237 -0.396174 -0.719234
        2013-01-04  1.468060 -0.670553  0.876693 -0.921692
        2013-01-05  1.694740 -1.376442 -0.011320 -0.300317
        2013-01-06  0.177973 -0.194179  0.786785 -1.903683
```
6.æŒ‰å€¼æ’åº:
```python
    >>> df.sort_values(by='B')
                           A         B         C         D
        2013-01-01  0.859619 -0.545903  0.012447  1.257684
        2013-01-02  0.119622 -0.484051  0.404728  0.360880
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691
        2013-01-05 -0.300317 -0.011320 -1.376442  1.694740
        2013-01-06 -1.903683  0.786785 -0.194179  0.177973
        2013-01-04 -0.921692  0.876693 -0.670553  1.468060
```
é€‰æ‹©æ•°æ®
--------

`æ³¨æ„`:è™½ç„¶æ ‡å‡†çš„ Python/Numpy è¡¨è¾¾å¼æ˜¯ç›´è§‚ä¸”å¯ç”¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨èä½¿ç”¨ä¼˜åŒ–åçš„ pandas æ–¹æ³•,ä¾‹å¦‚:.at,.iat,.loc,.iloc ä»¥åŠ.ix
è¯¦æƒ…è¯·æŸ¥çœ‹: [Indexing and Selecting Data](http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing)
å’Œ [MultiIndex / Advanced Indexing](http://pandas.pydata.org/pandas-docs/stable/advanced.html#advanced)

-   è·å–

1.é€‰æ‹©ä¸€åˆ—ï¼Œè¿”å› Seriesï¼Œç›¸å½“äº df.A:
```python
    >>> df['A']
        2013-01-01    0.859619
        2013-01-02    0.119622
        2013-01-03   -0.719234
        2013-01-04   -0.921692
        2013-01-05   -0.300317
        2013-01-06   -1.903683
        Freq: D, Name: A, dtype: float64
```
2.é€šè¿‡\[\]é€‰æ‹©ï¼Œå³å¯¹è¡Œè¿›è¡Œåˆ‡ç‰‡:
```python
    >>> df[0:3]
                           A         B         C         D
        2013-01-01  0.859619 -0.545903  0.012447  1.257684
        2013-01-02  0.119622 -0.484051  0.404728  0.360880
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691
```
-   æ ‡ç­¾å¼é€‰æ‹©

1.é€šè¿‡æ ‡ç­¾è·å–äº¤å‰åŒºåŸŸ:
```python
    >>> df.loc[dates[0]]
        A    0.859619
        B   -0.545903
        C    0.012447
        D    1.257684
        Name: 2013-01-01 00:00:00, dtype: float64
```
`æ³¨`:å³è·å–æ—¶é—´ä¸º 2013-01-01 çš„æ•°æ®

2.é€šè¿‡æ ‡ç­¾è·å–å¤šè½´æ•°æ®:
```python
    >>> df.loc[:,['A','B']]
                          A         B
        2013-01-01  0.859619 -0.545903
        2013-01-02  0.119622 -0.484051
        2013-01-03 -0.719234 -0.396174
        2013-01-04 -0.921692  0.876693
        2013-01-05 -0.300317 -0.011320
        2013-01-06 -1.903683  0.786785
```
3.æ ‡ç­¾åˆ‡ç‰‡:
```python
    >>> df.loc['20130102':'20130104',['A','B']]
                           A         B
        2013-01-02  0.119622 -0.484051
        2013-01-03 -0.719234 -0.396174
        2013-01-04 -0.921692  0.876693
```
4.å¯¹è¿”å›çš„å¯¹è±¡ç¼©å‡ç»´åº¦:
```python
    >>> df.loc['20130102',['A','B']]
        A    0.119622
        B   -0.484051
        Name: 2013-01-02 00:00:00, dtype: float64
```
5.è·å–å•ä¸ªå€¼:
```python
    >>> df.loc[dates[0],'A']
        0.85961861159875042
```
6.å¿«é€Ÿè®¿é—®å•ä¸ªæ ‡é‡ï¼ˆåŒ 5ï¼‰:
```python
    >>> df.at[dates[0],'A']
        0.85961861159875042
```
`æ³¨`:loc é€šè¿‡è¡Œæ ‡ç­¾è·å–è¡Œæ•°æ®ï¼Œiloc é€šè¿‡è¡Œå·è·å–è¡Œæ•°æ®

-   ä½ç½®å¼é€‰æ‹©

è¯¦æƒ…è¯·æŸ¥çœ‹[é€šè¿‡ä½ç½®é€‰æ‹©](http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-integer)

1.é€šè¿‡æ•°å€¼é€‰æ‹©:
```python
    >>> df.iloc[3]
        A   -0.921692
        B    0.876693
        C   -0.670553
        D    1.468060
        Name: 2013-01-04 00:00:00, dtype: float64
```
2.é€šè¿‡æ•°å€¼åˆ‡ç‰‡:
```python
    >>> df.iloc[3:5,0:2]
                           A         B
        2013-01-04 -0.921692  0.876693
        2013-01-05 -0.300317 -0.011320
```
`æ³¨`:å·¦å¼€å³é—­

3.é€šè¿‡æŒ‡å®šåˆ—è¡¨ä½ç½®:
```python
    >>> df.iloc[[1,2,4],[0,2]]
                           A         C
        2013-01-02  0.119622  0.404728
        2013-01-03 -0.719234  0.635237
        2013-01-05 -0.300317 -1.376442
```
4.å¯¹è¡Œåˆ‡ç‰‡:
```python
    >>> df.iloc[1:3,:]
                           A         B         C         D
        2013-01-02  0.119622 -0.484051  0.404728  0.360880
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691
```
5.å¯¹åˆ—åˆ‡ç‰‡:
```python
    >>> df.iloc[:,1:3]
                           B         C
        2013-01-01 -0.545903  0.012447
        2013-01-02 -0.484051  0.404728
        2013-01-03 -0.396174  0.635237
        2013-01-04  0.876693 -0.670553
        2013-01-05 -0.011320 -1.376442
        2013-01-06  0.786785 -0.194179
```
6.è·å–ç‰¹å®šå€¼:
```python
    >>> df.iloc[1,1]
        -0.48405080229207309
```
7.å¿«é€Ÿè®¿é—®æŸä¸ªæ ‡é‡ï¼ˆåŒ 6ï¼‰:
```python
    >>> df.iat[1,1]
        -0.48405080229207309
```
- Boolean ç´¢å¼• 
1.é€šè¿‡æŸåˆ—é€‰æ‹©æ•°æ®:
```python
    >>> df[df.A > 0]
                           A         B         C         D
        2013-01-01  0.859619 -0.545903  0.012447  1.257684
        2013-01-02  0.119622 -0.484051  0.404728  0.360880
```
2.é€šè¿‡ where é€‰æ‹©æ•°æ®:
```python
    >>> df[df > 0]
                           A         B         C         D
        2013-01-01  0.859619       NaN  0.012447  1.257684
        2013-01-02  0.119622       NaN  0.404728  0.360880
        2013-01-03       NaN       NaN  0.635237  0.216691
        2013-01-04       NaN  0.876693       NaN  1.468060
        2013-01-05       NaN       NaN       NaN  1.694740
        2013-01-06       NaN  0.786785       NaN  0.177973
```
3.é€šè¿‡[isin()](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.isin.html#pandas.Series.isin)è¿‡æ»¤æ•°æ®:
```python
    >>> df2 = df.copy()
    >>> df2['E'] = ['one', 'one','two','three','four','three']
    >>> df2
                           A         B         C         D      E
        2013-01-01  0.859619 -0.545903  0.012447  1.257684    one
        2013-01-02  0.119622 -0.484051  0.404728  0.360880    one
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691    two
        2013-01-04 -0.921692  0.876693 -0.670553  1.468060  three
        2013-01-05 -0.300317 -0.011320 -1.376442  1.694740   four
        2013-01-06 -1.903683  0.786785 -0.194179  0.177973  three
    >>> df2[df2['E'].isin(['two','four'])]
                           A         B         C         D     E
        2013-01-03 -0.719234 -0.396174  0.635237  0.216691   two
        2013-01-05 -0.300317 -0.011320 -1.376442  1.694740  four
```
- è®¾ç½® 
1.æ–°å¢ä¸€åˆ—æ•°æ®:
```plain
    >>> s1 = pd.Series([1,2,3,4,5,6], index=pd.date_range('20130102', periods=6))
    >>> s1
        2013-01-02    1
        2013-01-03    2
        2013-01-04    3
        2013-01-05    4
        2013-01-06    5
        2013-01-07    6
        Freq: D, dtype: int64
    >>> df['F'] = s1
```
2.é€šè¿‡æ ‡ç­¾æ›´æ–°å€¼:
```python
    >>> df.at[dates[0],'A'] = 0
```
3.é€šè¿‡ä½ç½®æ›´æ–°å€¼:
```python
    >>> df.iat[0,1] = 0
```
4.é€šè¿‡æ•°ç»„æ›´æ–°ä¸€åˆ—å€¼:
```python
    >>> df.loc[:,'D'] = np.array([5] * len(df))
```
ä¸Šé¢å‡ æ­¥æ“ä½œçš„ç»“æœ:
```python
    >>> df
                           A         B         C  D   F
        2013-01-01  0.000000  0.000000  0.012447  5 NaN
        2013-01-02  0.119622 -0.484051  0.404728  5   1
        2013-01-03 -0.719234 -0.396174  0.635237  5   2
        2013-01-04 -0.921692  0.876693 -0.670553  5   3
        2013-01-05 -0.300317 -0.011320 -1.376442  5   4
        2013-01-06 -1.903683  0.786785 -0.194179  5   5
```
5.é€šè¿‡ where æ›´æ–°å€¼:
```python

    >>> df2 = df.copy()
    >>> df2[df2 > 0] = -df2
    >>> df2
                           A         B         C  D   F
        2013-01-01  0.000000  0.000000 -0.012447 -5 NaN
        2013-01-02 -0.119622 -0.484051 -0.404728 -5  -1
        2013-01-03 -0.719234 -0.396174 -0.635237 -5  -2
        2013-01-04 -0.921692 -0.876693 -0.670553 -5  -3
        2013-01-05 -0.300317 -0.011320 -1.376442 -5  -4
        2013-01-06 -1.903683 -0.786785 -0.194179 -5  -5    
```
ç¼ºå¤±æ•°æ®å¤„ç†
------------

pandas ç”¨ np.nan ä»£è¡¨ç¼ºå¤±æ•°æ®ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ [Missing Data section](http://pandas.pydata.org/pandas-docs/stable/missing_data.html#missing-data)

1.reindex()å¯ä»¥ä¿®æ”¹/å¢åŠ /åˆ é™¤ç´¢å¼•ï¼Œä¼šè¿”å›ä¸€ä¸ªæ•°æ®çš„å‰¯æœ¬:
```python
    >>> df1 = df.reindex(index=dates[0:4], columns=list(df.columns) + ['E'])
    >>> df1.loc[dates[0]:dates[1],'E'] = 1
    >>> df1
                           A         B         C  D   F   E
        2013-01-01  0.000000  0.000000  0.012447  5 NaN   1
        2013-01-02  0.119622 -0.484051  0.404728  5   1   1
        2013-01-03 -0.719234 -0.396174  0.635237  5   2 NaN
        2013-01-04 -0.921692  0.876693 -0.670553  5   3 NaN
```
2.ä¸¢æ‰å«æœ‰ç¼ºå¤±é¡¹çš„è¡Œ:
```python
    >>> df1.dropna(how='any')
                           A         B         C  D  F  E
        2013-01-02  0.119622 -0.484051  0.404728  5  1  1
```
3.å¯¹ç¼ºå¤±é¡¹èµ‹å€¼:
```python
    >>> df1.fillna(value=5)
                           A         B         C  D  F  E
        2013-01-01  0.000000  0.000000  0.012447  5  5  1
        2013-01-02  0.119622 -0.484051  0.404728  5  1  1
        2013-01-03 -0.719234 -0.396174  0.635237  5  2  5
        2013-01-04 -0.921692  0.876693 -0.670553  5  3  5
```
4.å¯¹ç¼ºå¤±é¡¹å¸ƒå°”èµ‹å€¼:
```python
    >>> pd.isnull(df1)
                        A      B      C      D      F      E
        2013-01-01  False  False  False  False   True  False
        2013-01-02  False  False  False  False  False  False
        2013-01-03  False  False  False  False  False   True
        2013-01-04  False  False  False  False  False   True
```
ç›¸å…³æ“ä½œ
--------

è¯¦æƒ…è¯·æŸ¥çœ‹ [Basic section on Binary Ops](http://pandas.pydata.org/pandas-docs/stable/basics.html#basics-binop)

-   ç»Ÿè®¡(æ“ä½œé€šå¸¸æƒ…å†µä¸‹ä¸åŒ…å«ç¼ºå¤±é¡¹)

1.æŒ‰åˆ—æ±‚å¹³å‡å€¼:
```python
    >>> df.mean()
        A   -0.620884
        B    0.128655
        C   -0.198127
        D    5.000000
        F    3.000000
        dtype: float64
```
2.æŒ‰è¡Œæ±‚å¹³å‡å€¼:
```python
    >>> df.mean(1)
        2013-01-01    1.253112
        2013-01-02    1.208060
        2013-01-03    1.303966
        2013-01-04    1.456889
        2013-01-05    1.462384
        2013-01-06    1.737785
        Freq: D, dtype: float64
```
3.æ“ä½œä¸åŒçš„ç»´åº¦éœ€è¦å…ˆå¯¹é½,pandas ä¼šæ²¿ç€æŒ‡å®šç»´åº¦æ‰§è¡Œ:
```python
    >>> s = pd.Series([1,3,5,np.nan,6,8], index=dates).shift(2)
    >>> s
        2013-01-01   NaN
        2013-01-02   NaN
        2013-01-03     1
        2013-01-04     3
        2013-01-05     5
        2013-01-06   NaN
        Freq: D, dtype: float64
    >>> df.sub(s, axis='index')
                           A         B         C   D   F
        2013-01-01       NaN       NaN       NaN NaN NaN
        2013-01-02       NaN       NaN       NaN NaN NaN
        2013-01-03 -1.719234 -1.396174 -0.364763   4   1
        2013-01-04 -3.921692 -2.123307 -3.670553   2   0
        2013-01-05 -5.300317 -5.011320 -6.376442   0  -1
        2013-01-06       NaN       NaN       NaN NaN NaN 
```
`æ³¨`:

-   è¿™é‡Œå¯¹é½ç»´åº¦æŒ‡çš„å¯¹é½æ—¶é—´ index
-   shift(2)æŒ‡æ²¿ç€æ—¶é—´è½´å°†æ•°æ®é¡ºç§»ä¸¤ä½
-   sub æŒ‡å‡æ³•ï¼Œä¸ NaN è¿›è¡Œæ“ä½œï¼Œç»“æœä¹Ÿæ˜¯ NaN

------------------------------------------------------------------------

-   åº”ç”¨

1.å¯¹æ•°æ®åº”ç”¨ function:
```python
    >>> df.apply(np.cumsum)
                           A         B         C   D   F
        2013-01-01  0.000000  0.000000  0.012447   5 NaN
        2013-01-02  0.119622 -0.484051  0.417175  10   1
        2013-01-03 -0.599612 -0.880225  1.052412  15   3
        2013-01-04 -1.521304 -0.003532  0.381859  20   6
        2013-01-05 -1.821621 -0.014853 -0.994583  25  10
        2013-01-06 -3.725304  0.771932 -1.188763  30  15
        >>> df.apply(lambda x: x.max() - x.min())
        A    2.023304
        B    1.360744
        C    2.011679
        D    0.000000
        F    4.000000
        dtype: float64    
```
`æ³¨`: - cumsum ç´¯åŠ 

è¯¦æƒ…è¯·æŸ¥çœ‹
[ç›´æ–¹å›¾å’Œç¦»æ•£åŒ–](http://pandas.pydata.org/pandas-docs/stable/basics.html#basics-discretization)

-   ç›´æ–¹å›¾:
```python
        >>> s = pd.Series(np.random.randint(0, 7, size=10))
        >>> s
            0    1
            1    3
            2    5
            3    1
            4    6
            5    1
            6    3
            7    4
            8    0
            9    3
            dtype: int64
        >>> s.value_counts()
            3    3
            1    3
            6    1
            5    1
            4    1
            0    1
            dtype: int64
```
pandas é»˜è®¤é…ç½®äº†ä¸€äº›å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ“ä½œå…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤º:(è¯¦æƒ…è¯·æŸ¥çœ‹[Vectorized String Methods](http://pandas.pydata.org/pandas-docs/stable/text.html#text-string-methods))

-   å­—ç¬¦ä¸²æ–¹æ³•:
```python
        >>> s = pd.Series(['A', 'B', 'C', 'Aaba', 'Baca', np.nan, 'CABA', 'dog', 'cat'])
        >>> s.str.lower()
            0       a
            1       b
            2       c
            3    aaba
            4    baca
            5     NaN
            6    caba
            7     dog
            8     cat
            dtype: object
```
åˆå¹¶
----

\- è¿æ¥
pandas æä¾›äº†å¤§é‡çš„æ–¹æ³•ï¼Œèƒ½è½»æ¾çš„å¯¹ Seriesï¼ŒDataFrame å’Œ Panel æ‰§è¡Œåˆå¹¶æ“ä½œã€‚è¯¦æƒ…è¯·æŸ¥çœ‹[Merging section](http://pandas.pydata.org/pandas-docs/stable/merging.html#merging)

ä½¿ç”¨ concat()è¿æ¥ pandas å¯¹è±¡:
```python
    >>> df = pd.DataFrame(np.random.randn(10, 4))
    >>> df
              0         1         2         3
        0 -0.199614  1.914485  0.396383 -0.295306
        1 -0.061961 -1.352883  0.266751 -0.874132
        2  0.346504 -2.328099 -1.492250  0.095392
        3  0.187115  0.562740 -1.677737 -0.224807
        4 -1.422599 -1.028044  0.789487  0.806940
        5  0.439478 -0.592229  0.736081  1.008404
        6 -0.205641 -0.649465 -0.706395  0.578698
        7 -2.168725 -2.487189  0.060258  1.965318
        8  0.207634  0.512572  0.595373  0.816516
        9  0.764893  0.612208 -1.022504 -2.032126
    >>> pieces = [df[:3], df[3:7], df[7:]]
    >>> pd.concat(pieces)
              0         1         2         3
        0 -0.199614  1.914485  0.396383 -0.295306
        1 -0.061961 -1.352883  0.266751 -0.874132
        2  0.346504 -2.328099 -1.492250  0.095392
        3  0.187115  0.562740 -1.677737 -0.224807
        4 -1.422599 -1.028044  0.789487  0.806940
        5  0.439478 -0.592229  0.736081  1.008404
        6 -0.205641 -0.649465 -0.706395  0.578698
        7 -2.168725 -2.487189  0.060258  1.965318
        8  0.207634  0.512572  0.595373  0.816516
        9  0.764893  0.612208 -1.022504 -2.032126
```
\- Join ç±»ä¼¼ SQL çš„åˆå¹¶æ“ä½œï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ [Database style joining](http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-join)

æ —å­:
```python
    >>> left = pd.DataFrame({'key': ['foo', 'foo'], 'lval': [1, 2]})
    >>> right = pd.DataFrame({'key': ['foo', 'foo'], 'rval': [4, 5]})
    >>> left
        key  lval
        0  foo     1
        1  foo     2
    >>> right
           key  rval
        0  foo     4
        1  foo     5
    >>> pd.merge(left, right, on='key')
           key  lval  rval
        0  foo     1     4
        1  foo     1     5
        2  foo     2     4
        3  foo     2     5
```
æ —å­:
```python
    >>> left = pd.DataFrame({'key': ['foo', 'bar'], 'lval': [1, 2]})
    >>> right = pd.DataFrame({'key': ['foo', 'bar'], 'rval': [4, 5]})
    >>> left
        key  lval
        0  foo     1
        1  bar     2
    >>> right
           key  rval
        0  foo     4
        1  bar     5
    >>> pd.merge(left, right, on='key')
           key  lval  rval
        0  foo     1     4
        1  bar     2     5
```
-   è¿½åŠ ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹[Appending](http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-concatenation):
```python
        >>> df = pd.DataFrame(np.random.randn(8, 4), columns=['A','B','C','D'])
        >>> df
                  A         B         C         D
            0 -1.710447  2.541720 -0.654403  0.132077
            1  0.667796 -1.124769 -0.430752 -0.244731
            2  1.555865 -0.483805  0.066114 -0.409518
            3  1.171798  0.036219 -0.515065  0.860625
            4 -0.834051 -2.178128 -0.345627  0.819392
            5 -0.354886  0.161204  1.465532  1.879841
            6  0.560888  1.208905  1.301983  0.799084
            7 -0.770196  0.307691  1.212200  0.909137
        >>> s = df.iloc[3]
        >>> df.append(s, ignore_index=True)
                  A         B         C         D
            0 -1.710447  2.541720 -0.654403  0.132077
            1  0.667796 -1.124769 -0.430752 -0.244731
            2  1.555865 -0.483805  0.066114 -0.409518
            3  1.171798  0.036219 -0.515065  0.860625
            4 -0.834051 -2.178128 -0.345627  0.819392
            5 -0.354886  0.161204  1.465532  1.879841
            6  0.560888  1.208905  1.301983  0.799084
            7 -0.770196  0.307691  1.212200  0.909137
            8  1.171798  0.036219 -0.515065  0.860625
```
åˆ†ç»„
----

`group by`: - Splitting å°†æ•°æ®åˆ†ç»„ - Applying å¯¹æ¯ä¸ªåˆ†ç»„åº”ç”¨ä¸åŒçš„ function - Combining ä½¿ç”¨æŸç§æ•°æ®ç»“æœå±•ç¤ºç»“æœ
è¯¦æƒ…è¯·æŸ¥çœ‹ [Grouping section](http://pandas.pydata.org/pandas-docs/stable/groupby.html#groupby)

ä¸¾ä¸ªæ —å­:
```python
    >>> df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar','foo', 'bar', 'foo', 'foo'],
                           'B' : ['one', 'one', 'two', 'three','two', 'two', 'one', 'three'],
                           'C' : np.random.randn(8),
                           'D' : np.random.randn(8)})
    >>> df
             A      B         C         D
        0  foo    one -0.655020 -0.671592
        1  bar    one  0.846428  1.884603
        2  foo    two -2.280466  0.725070
        3  bar  three  1.166448 -0.208171
        4  foo    two -0.257124 -0.850319
        5  bar    two -0.654609  1.258091
        6  foo    one -1.624213 -0.383978
        7  foo  three -0.523944  0.114338
```
åˆ†ç»„å sum æ±‚å’Œ:
```python
    >>> df.groupby('A').sum()
                    C         D
        A
        bar  1.358267  2.934523
        foo -5.340766 -1.066481
```
å¯¹å¤šåˆ—åˆ†ç»„å sum:
```python
    >>> df.groupby(['A','B']).sum()
                          C         D
        A   B
        bar one    0.846428  1.884603
            three  1.166448 -0.208171
            two   -0.654609  1.258091
        foo one   -2.279233 -1.055570
            three -0.523944  0.114338
            two   -2.537589 -0.125249
```
é‡å¡‘
----

è¯¦æƒ…è¯·æŸ¥çœ‹ [Hierarchical Indexing](http://pandas.pydata.org/pandas-docs/stable/advanced.html#advanced-hierarchical)å’Œ[Reshaping](http://pandas.pydata.org/pandas-docs/stable/reshaping.html#reshaping-stacking)

`stack`:
```python
    >>> tuples = list(zip(*[['bar', 'bar', 'baz', 'baz',
                             'foo', 'foo', 'qux', 'qux'],
                            ['one', 'two', 'one', 'two',
                             'one', 'two', 'one', 'two']]))
    >>> tuples
        [('bar', 'one'), ('bar', 'two'), 
         ('baz', 'one'), ('baz', 'two'), 
         ('foo', 'one'), ('foo', 'two'), 
         ('qux', 'one'), ('qux', 'two')]
    >>> index = pd.MultiIndex.from_tuples(tuples, names=['first', 'second'])
    >>> index
        MultiIndex(levels=[[u'bar', u'baz', u'foo', u'qux'], [u'one', u'two']],
                   labels=[[0, 0, 1, 1, 2, 2, 3, 3], [0, 1, 0, 1, 0, 1, 0, 1]],
                   names=[u'first', u'second'])
    >>> df = pd.DataFrame(np.random.randn(8, 2), index=index, columns=['A', 'B'])
    >>> df
                             A         B
        first second
        bar   one    -0.922059 -0.918091
              two    -0.825565 -0.880527
        baz   one     0.241927  1.130320
              two    -0.261823  2.463877
        foo   one    -0.220328 -0.519477
              two    -1.028038 -0.543191
        qux   one     0.315674  0.558686
              two     0.422296  0.241212
    >>> df2 = df[:4]
    >>> df2
                                 A         B
        first second
        bar   one    -0.922059 -0.918091
              two    -0.825565 -0.880527
        baz   one     0.241927  1.130320
              two    -0.261823  2.463877
```
`æ³¨`:pd.MultiIndex.from\_tuples å°†åŒ…å«å¤šä¸ª list çš„å…ƒç»„è½¬æ¢ä¸ºå¤æ‚ç´¢å¼•

ä½¿ç”¨ stack()æ–¹æ³•ä¸º DataFrame å¢åŠ  column:
```python
    >>> stacked = df2.stack()
    >>> stacked
        first  second
        bar    one     A   -0.922059
                       B   -0.918091
               two     A   -0.825565
                       B   -0.880527
        baz    one     A    0.241927
                       B    1.130320
               two     A   -0.261823
                       B    2.463877
        dtype: float64
```
ä½¿ç”¨ unstack()æ–¹æ³•è¿˜åŸ stack çš„ DataFrameï¼Œé»˜è®¤è¿˜åŸæœ€åä¸€çº§ï¼Œä¹Ÿå¯ä»¥è‡ªç”±æŒ‡å®š:
```python
    >>> stacked.unstack()
                         A         B
        first second
        bar   one    -0.922059 -0.918091
              two    -0.825565 -0.880527
        baz   one     0.241927  1.130320
              two    -0.261823  2.463877
    >>> stacked.unstack(1)
        second        one       two
        first
        bar   A -0.922059 -0.825565
              B -0.918091 -0.880527
        baz   A  0.241927 -0.261823
              B  1.130320  2.463877
    >>> stacked.unstack(0)
        first          bar       baz
        second
        one    A -0.922059  0.241927
               B -0.918091  1.130320
        two    A -0.825565 -0.261823
               B -0.880527  2.463877
```
`é€è§†è¡¨` è¯¦æƒ…è¯·æŸ¥çœ‹ [Pivot Tables](http://pandas.pydata.org/pandas-docs/stable/reshaping.html#reshaping-pivot)

æ —å­:
```python
    >>> df = pd.DataFrame({'A' : ['one', 'one', 'two', 'three'] * 3,
                           'B' : ['A', 'B', 'C'] * 4,
                           'C' : ['foo', 'foo', 'foo', 'bar', 'bar', 'bar'] * 2,
                           'D' : np.random.randn(12),
                           'E' : np.random.randn(12)})
```
`æ³¨`:å¯ä»¥ç†è§£ä¸ºè‡ªç”±ç»„åˆè¡¨çš„è¡Œä¸åˆ—ï¼Œç±»ä¼¼äºäº¤å‰æŠ¥è¡¨

æˆ‘ä»¬èƒ½éå¸¸ç®€å•çš„æ„é€ é€è§†è¡¨:
```python
    >>> pd.pivot_table(df, values='D', index=['A', 'B'], columns=['C'])
        C             bar       foo
        A     B
        one   A -1.250611 -1.047274
              B  1.532134 -0.455948
              C  0.125989 -0.500260
        three A  0.623716       NaN
              B       NaN  0.095117
              C -0.348707       NaN
        two   A       NaN  0.390363
              B -0.743466       NaN
              C       NaN  0.792279
```
æ—¶é—´åºåˆ—
--------

pandas å¯ä»¥ç®€å•é«˜æ•ˆçš„è¿›è¡Œé‡æ–°é‡‡æ ·é€šè¿‡é¢‘ç‡è½¬æ¢(ä¾‹å¦‚:å°†ç§’çº§æ•°æ®è½¬æ¢æˆäº”åˆ†é’Ÿä¸ºå•ä½çš„æ•°æ®)ã€‚è¿™å¸¸è§ä¸é‡‘èåº”ç”¨ä¸­ï¼Œä½†æ˜¯ä¸é™äºæ­¤ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹
[Time Series section](http://pandas.pydata.org/pandas-docs/stable/timeseries.html#timeseries)

æ —å­:
```python
    >>> rng = pd.date_range('1/1/2012', periods=100, freq='S')
    >>> ts = pd.Series(np.random.randint(0, 500, len(rng)), index=rng)
    >>> ts.resample('5Min').sum()
        2012-01-01    24390
        Freq: 5T, dtype: int64
```
`æ³¨`:å°†éšæœºäº§ç”Ÿçš„ç§’çº§æ•°æ®æ•´åˆæˆ 5min çš„æ•°æ®

æ—¶åŒºè¡¨ç°:
```python
    >>> rng = pd.date_range('3/6/2012 00:00', periods=5, freq='D')
    >>> ts = pd.Series(np.random.randn(len(rng)), rng)
    >>> ts
        2012-03-06    0.972202
        2012-03-07   -0.839969
        2012-03-08   -0.979993
        2012-03-09   -0.052460
        2012-03-10   -0.487963
        Freq: D, dtype: float64
    >>> ts_utc = ts.tz_localize('UTC')
    >>> ts_utc
        2012-03-06 00:00:00+00:00    0.972202
        2012-03-07 00:00:00+00:00   -0.839969
        2012-03-08 00:00:00+00:00   -0.979993
        2012-03-09 00:00:00+00:00   -0.052460
        2012-03-10 00:00:00+00:00   -0.487963
        Freq: D, dtype: float64
```
æ—¶åŒºå˜æ¢:
```python
    >>> ts_utc.tz_convert('US/Eastern')
        2012-03-05 19:00:00-05:00    0.972202
        2012-03-06 19:00:00-05:00   -0.839969
        2012-03-07 19:00:00-05:00   -0.979993
        2012-03-08 19:00:00-05:00   -0.052460
        2012-03-09 19:00:00-05:00   -0.487963
        Freq: D, dtype: float64
```
åœ¨ä¸åŒçš„æ—¶é—´è·¨åº¦è¡¨ç°é—´å˜æ¢:
```python
    >>> rng = pd.date_range('1/1/2012', periods=5, freq='M')
    >>> ts = pd.Series(np.random.randn(len(rng)), index=rng)
    >>> ts
        2012-01-31   -0.681068
        2012-02-29   -0.263571
        2012-03-31    1.268001
        2012-04-30    0.331786
        2012-05-31    0.663572
        Freq: M, dtype: float64
    >>> ps = ts.to_period()
    >>> ps
        2012-01   -0.681068
        2012-02   -0.263571
        2012-03    1.268001
        2012-04    0.331786
        2012-05    0.663572
        Freq: M, dtype: float64
    >>> ps.to_timestamp()
        2012-01-01   -0.681068
        2012-02-01   -0.263571
        2012-03-01    1.268001
        2012-04-01    0.331786
        2012-05-01    0.663572
        Freq: MS, dtype: float64
```
`æ³¨`:to\_period()é»˜è®¤é¢‘ç‡ä¸º Mï¼Œto\_period å’Œ to\_timestamp å¯ä»¥ç›¸äº’è½¬æ¢

åœ¨å‘¨æœŸå’Œæ—¶é—´æˆ³é—´è½¬æ¢ï¼Œä¸‹é¢çš„æ —å­å°†å­£åº¦æ—¶é—´è½¬æ¢ä¸ºå„å­£åº¦æœ€åä¸€ä¸ªæœˆçš„ 09am:
```python
    >>> prng = pd.period_range('1990Q1', '2000Q4', freq='Q-NOV')
    >>> prng
        PeriodIndex(['1990Q1', '1990Q2', '1990Q3', '1990Q4', '1991Q1', '1991Q2',
                     '1991Q3', '1991Q4', '1992Q1', '1992Q2', '1992Q3', '1992Q4',
                     '1993Q1', '1993Q2', '1993Q3', '1993Q4', '1994Q1', '1994Q2',
                     '1994Q3', '1994Q4', '1995Q1', '1995Q2', '1995Q3', '1995Q4',
                     '1996Q1', '1996Q2', '1996Q3', '1996Q4', '1997Q1', '1997Q2',
                     '1997Q3', '1997Q4', '1998Q1', '1998Q2', '1998Q3', '1998Q4',
                     '1999Q1', '1999Q2', '1999Q3', '1999Q4', '2000Q1', '2000Q2',
                     '2000Q3', '2000Q4'],
                    dtype='int64', freq='Q-NOV')
    >>> ts = pd.Series(np.random.randn(len(prng)), prng)
    >>> ts.index = (prng.asfreq('M', 'e') + 1).asfreq('H', 's') + 9
    >>> ts.head()
        1990-03-01 09:00   -0.927090
        1990-06-01 09:00   -1.045881
        1990-09-01 09:00   -0.837705
        1990-12-01 09:00   -0.529390
        1991-03-01 09:00   -0.423405
        Freq: H, dtype: float64
```
åˆ†ç±»
----

ä» 0.15 ç‰ˆä»¥åï¼Œpandas å¯ä»¥é€  DataFrame ä¸­åŒ…å«åˆ†ç±»æ•°æ®ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹[åˆ†ç±»ä»‹ç»](http://pandas.pydata.org/pandas-docs/stable/categorical.html#categorical)
å’Œ [API æ–‡æ¡£](http://pandas.pydata.org/pandas-docs/stable/api.html#api-categorical):
```python
    >>> df = pd.DataFrame({"id":[1,2,3,4,5,6], "raw_grade":['a', 'b', 'b', 'a', 'a', 'e']})
```
1.å°†åŸå§‹æˆç»©è½¬æ¢ä¸ºåˆ†ç±»æ•°æ®:
```python
    >>> df["grade"] = df["raw_grade"].astype("category")
    >>> df["grade"]
        0    a
        1    b
        2    b
        3    a
        4    a
        5    e
        Name: grade, dtype: category
        Categories (3, object): [a, b, e]
```
2.é‡å‘½ååˆ†ç±»ä½¿å…¶æ›´æœ‰æ„ä¹‰:
```python
    >>> df["grade"].cat.categories = ["very good", "good", "very bad"]
```
3.é‡æ–°æ•´ç†ç±»åˆ«ï¼Œå¹¶æ·»åŠ ç¼ºå°‘çš„ç±»åˆ«:
```python
    >>> df["grade"] = df["grade"].cat.set_categories(["very bad", "bad", "medium", "good", "very good"])
    >>> df["grade"]
        0    very good
        1         good
        2         good
        3    very good
        4    very good
        5     very bad
        Name: grade, dtype: category
        Categories (5, object): [very bad, bad, medium, good, very good]
```
4.æŒ‰æ•´ç†åçš„ç±»åˆ«æ’åº(å¹¶éè¯æ±‡çš„é¡ºåº):
```python
    >>> df.sort_values(by="grade")
           id raw_grade      grade
        5   6         e   very bad
        1   2         b       good
        2   3         b       good
        0   1         a  very good
        3   4         a  very good
        4   5         a  very good
```
5.æŒ‰ç±»åˆ«åˆ†ç»„ä¹ŸåŒ…æ‹¬ç©ºç±»åˆ«:
```python
    >>> df.groupby("grade").size()
        grade
        very bad     1
        bad          0
        medium       0
        good         2
        very good    3
        dtype: int64
```
ç»˜å›¾
----

è¯¦æƒ…è¯·æŸ¥çœ‹[Plotting](http://pandas.pydata.org/pandas-docs/stable/visualization.html#visualization):
```python
    >>> ts = pd.Series(np.random.randn(1000), index=pd.date_range('1/1/2000', periods=1000))
    >>> ts = ts.cumsum()
    >>> ts.plot()
        <matplotlib.axes._subplots.AxesSubplot at 0x7ff2ab2af550>
```
[å›¾ä¸€](http://pandas.pydata.org/pandas-docs/stable/_images/series_plot_basic.png)

åœ¨ DataFrame ä¸­ï¼Œplot()å¯ä»¥ç»˜åˆ¶æ‰€æœ‰å¸¦æœ‰æ ‡ç­¾çš„åˆ—:
```python
    >>> df = pd.DataFrame(np.random.randn(1000, 4), index=ts.index,
                          columns=['A', 'B', 'C', 'D'])
    >>> df = df.cumsum()
    >>> plt.figure(); df.plot(); plt.legend(loc='best')
        <matplotlib.legend.Legend at 0x7ff29c8163d0>
```
[å›¾äºŒ](http://pandas.pydata.org/pandas-docs/stable/_images/frame_plot_basic.png)

è·å–æ•°æ® å†™å…¥å¯¼å‡º
-----------------

\- CSV 1.
[å†™å…¥ csv æ–‡ä»¶](http://pandas.pydata.org/pandas-docs/stable/io.html#io-store-in-csv):
```python
    >>> df.to_csv('foo.csv')
```
2.  [è¯»å– csv æ–‡ä»¶](http://pandas.pydata.org/pandas-docs/stable/io.html#io-read-csv-table):
```python
        >>> pd.read_csv('foo.csv')
                 Unnamed: 0          A          B         C          D
            0    2000-01-01   0.266457  -0.399641 -0.219582   1.186860
            1    2000-01-02  -1.170732  -0.345873  1.653061  -0.282953
            2    2000-01-03  -1.734933   0.530468  2.060811  -0.515536
            3    2000-01-04  -1.555121   1.452620  0.239859  -1.156896
            4    2000-01-05   0.578117   0.511371  0.103552  -2.428202
            5    2000-01-06   0.478344   0.449933 -0.741620  -1.962409
            6    2000-01-07   1.235339  -0.091757 -1.543861  -1.084753
            ..          ...        ...        ...       ...        ...
            993  2002-09-20 -10.628548  -9.153563 -7.883146  28.313940
            994  2002-09-21 -10.390377  -8.727491 -6.399645  30.914107
            995  2002-09-22  -8.985362  -8.485624 -4.669462  31.367740
            996  2002-09-23  -9.558560  -8.781216 -4.499815  30.518439
            997  2002-09-24  -9.902058  -9.340490 -4.386639  30.105593
            998  2002-09-25 -10.216020  -9.480682 -3.933802  29.758560
            999  2002-09-26 -11.856774 -10.671012 -3.216025  29.369368

            [1000 rows x 5 columns]
```
\- HDF5
[HDFStores](http://pandas.pydata.org/pandas-docs/stable/io.html#io-hdf5)

1.å†™å…¥ HDF5 Store:
```python
    >>> df.to_hdf('foo.h5','df')
```
2.ä» HDF5 Store è¯»å–:
```python
    >>> pd.read_hdf('foo.h5','df')
                            A          B         C          D
        2000-01-01   0.266457  -0.399641 -0.219582   1.186860
        2000-01-02  -1.170732  -0.345873  1.653061  -0.282953
        2000-01-03  -1.734933   0.530468  2.060811  -0.515536
        2000-01-04  -1.555121   1.452620  0.239859  -1.156896
        2000-01-05   0.578117   0.511371  0.103552  -2.428202
        2000-01-06   0.478344   0.449933 -0.741620  -1.962409
        2000-01-07   1.235339  -0.091757 -1.543861  -1.084753
        ...               ...        ...       ...        ...
        2002-09-20 -10.628548  -9.153563 -7.883146  28.313940
        2002-09-21 -10.390377  -8.727491 -6.399645  30.914107
        2002-09-22  -8.985362  -8.485624 -4.669462  31.367740
        2002-09-23  -9.558560  -8.781216 -4.499815  30.518439
        2002-09-24  -9.902058  -9.340490 -4.386639  30.105593
        2002-09-25 -10.216020  -9.480682 -3.933802  29.758560
        2002-09-26 -11.856774 -10.671012 -3.216025  29.369368

        [1000 rows x 4 columns]
```
\- Excel [MSExcel](http://pandas.pydata.org/pandas-docs/stable/io.html#io-excel)

1.å†™å…¥ excel æ–‡ä»¶:
```python
    >>> df.to_excel('foo.xlsx', sheet_name='Sheet1')
```
2.ä»`excel`æ–‡ä»¶è¯»å–:
```python
    >>> pd.read_excel('foo.xlsx', 'Sheet1', index_col=None, na_values=['NA'])
                            A          B         C          D
        2000-01-01   0.266457  -0.399641 -0.219582   1.186860
        2000-01-02  -1.170732  -0.345873  1.653061  -0.282953
        2000-01-03  -1.734933   0.530468  2.060811  -0.515536
        2000-01-04  -1.555121   1.452620  0.239859  -1.156896
        2000-01-05   0.578117   0.511371  0.103552  -2.428202
        2000-01-06   0.478344   0.449933 -0.741620  -1.962409
        2000-01-07   1.235339  -0.091757 -1.543861  -1.084753
        ...               ...        ...       ...        ...
        2002-09-20 -10.628548  -9.153563 -7.883146  28.313940
        2002-09-21 -10.390377  -8.727491 -6.399645  30.914107
        2002-09-22  -8.985362  -8.485624 -4.669462  31.367740
        2002-09-23  -9.558560  -8.781216 -4.499815  30.518439
        2002-09-24  -9.902058  -9.340490 -4.386639  30.105593
        2002-09-25 -10.216020  -9.480682 -3.933802  29.758560
        2002-09-26 -11.856774 -10.671012 -3.216025  29.369368

        [1000 rows x 4 columns]
```
å°é™·é˜±
------

å¦‚æœä½ æ“ä½œæ—¶é‡åˆ°äº†å¦‚ä¸‹å¼‚å¸¸:
```python
    >>> if pd.Series([False, True, False]):
        ...     print("I was true")
        ...
        Traceback (most recent call last):
        File "<stdin>", line 1, in <module>
          File "/usr/lib64/python2.7/site-packages/pandas/core/generic.py", line 730, in __nonzero__
            .format(self.__class__.__name__))
        ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
```
è¯·æŸ¥çœ‹[Comparisons](http://pandas.pydata.org/pandas-docs/stable/basics.html#basics-compare)æ¥å¤„ç†å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹[Gotchas](http://pandas.pydata.org/pandas-docs/stable/gotchas.html#gotchas)

pandas å®æˆ˜
----------



## cheetsheet

![å¹»ç¯ç‰‡1](https://i.loli.net/2021/01/15/a8FCJYM2Xrz5cEH.png)

![å¹»ç¯ç‰‡2](https://i.loli.net/2021/01/15/2fTeGH1EgZKroQy.png)

è§£é‡Šè§[å¤©ç§€ï¼ä¸€å¼ å›¾å°±èƒ½å½»åº•æå®š Pandasï¼](https://mp.weixin.qq.com/s/a5a4Wo4atKaSS8C2eCtrxA)

## pandas æ•™ç¨‹

[pandas æ•™ç¨‹ - ç›–è‹¥](https://www.gairuo.com/p/pandas-tutorial)

### è¡Œåˆ—è½¬æ¢

[pandas è¡Œè½¬åˆ—ã€åˆ—è½¬è¡Œã€ä»¥åŠä¸€è¡Œç”Ÿæˆå¤šè¡Œ - å¤æ˜åœ°ç›† - åšå®¢å›­](https://www.cnblogs.com/traditional/p/11967360.html)

---
title:  2021 é¢è¯•è®°å½•
date: 2021-03-25 13:56:51
permalink: /interview-2021/
categories:
- ğŸPython
- é¢è¯•
tags:
  - é¢è¯•
---

## æ™ºæº

### æŒ‰ç…§ç­çº§æŸ¥è¯¢æ¯ä¸ªç­æˆç»©æœ€é«˜çš„å­¦ç”Ÿçš„æˆç»©

```sql
CREATE TABLE tableName
(
    id      varchar(300),
    name    varchar(300),
    classid varchar(300),
    score   int(10)
);

INSERT INTO tableName (id, name, classid, score)
VALUES
    ('1', 'a', '1', 99),
       ('2', 'b', '1', 88),
       ('3', 'c', '1', 60),
       ('4', 'd', '2', 80),
       ('5', '5', '2', 90);


mysql> select * from tableName;
+------+------+---------+-------+
| id   | name | classid | score |
+------+------+---------+-------+
| 1    | a    | 1       |    99 |
| 2    | b    | 1       |    88 |
| 3    | c    | 1       |    60 |
| 4    | d    | 2       |    80 |
| 5    | e    | 2       |    90 |
+------+------+---------+-------+
5 rows in set (0.00 sec)
-- åªæŸ¥è¯¢ç­çº§å’Œåˆ†æ•°
mysql> select classid,max(score) from tableName group by classid;
+---------+------------+
| classid | max(score) |
+---------+------------+
| 1       |         99 |
| 2       |         90 |
+---------+------------+
2 rows in set (0.00 sec)

-- æŸ¥è¯¢åˆ†æ•°ã€ç­çº§ã€åç§°ã€ä¸ªäººid
mysql> select id,name,classid,max(score) from tableName as t WHERE NOT EXISTS (SELECT 1 FROM tableName WHERE classid = t.classid AND score > t.score) group by classid;
+------+------+---------+------------+
| id   | name | classid | max(score) |
+------+------+---------+------------+
| 1    | a    | 1       |         99 |
| 5    | e    | 2       |         90 |
+------+------+---------+------------+
2 rows in set (0.00 sec)

```

[æ±‚ sql æ¯ä¸ªç­ä¸­æˆç»©æœ€å¥½çš„_ç™¾åº¦çŸ¥é“](https://zhidao.baidu.com/question/235666508.html)

- ç‰¹æ®Šç”¨æ³•`select 1`

æ¯”å¦‚è¯´ï¼Œä½¿ç”¨`select 1 from table`çš„ç»“æœæ˜¯ä¸´æ—¶å¾—åˆ° 1 åˆ—ï¼ˆåˆ—çš„å€¼ä¸º 1ï¼‰ï¼Œå…¶è¡Œæ•°ä¸ºè¡¨çš„è®°å½•æ•°ï¼ˆè¡Œæ•°ï¼‰ï¼Œå¦‚æœé…åˆ exists è¯­å¥åˆ™å¯ä»¥å¿«é€ŸæŸ¥è¯¢ç»“æœæ˜¯å¦å­˜åœ¨ï¼Œè€Œç»“æœçš„å…·ä½“æ•°æ®ä¸æ¶‰åŠåˆ°ã€‚

å°±åƒæˆ‘ä¸Šè¿°æä¾›çš„ä¾‹å­ï¼Œå®ƒåªæŸ¥è¯¢éªŒè¯ dept è¡¨çš„å­—æ®µ deptno å’Œ emp çš„å­—æ®µ deptno æ˜¯å¦æœ‰ç›¸ç­‰çš„æƒ…å†µï¼Œå¹¶ä¸” loc=â€˜NEW YORKâ€™ï¼Œè€Œä¸éœ€è¦çŸ¥é“ dept è¡¨å’Œ emp è¡¨å“ªäº›è®°å½•å­˜åœ¨é‚£æ ·çš„æƒ…å†µï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“ç›¸ç­‰æƒ…å†µä¸‹å…¶ä»–å­—æ®µçš„å€¼ã€‚~~åœ¨åº”ç”¨ä¸­ï¼Œæ•ˆç‡æ¯”`select *` å¿«ã€‚~~
æ‰©å±•ï¼š `select 1 from table;`ä¸`select anycol(ç›®çš„è¡¨é›†åˆä¸­çš„ä»»æ„ä¸€è¡Œï¼‰ from table;`ä¸`select * from table`ä»ä½œç”¨ä¸Šæ¥è¯´æ˜¯æ²¡æœ‰å·®åˆ«çš„ï¼Œéƒ½æ˜¯æŸ¥çœ‹æ˜¯å¦æœ‰è®°å½•ï¼Œä¸€èˆ¬æ˜¯ä½œæ¡ä»¶æŸ¥è¯¢ç”¨çš„ã€‚`select 1 from` ä¸­çš„ 1 æ˜¯ä¸€å¸¸é‡ï¼ˆå¯ä»¥ä¸ºä»»æ„æ•°å€¼ï¼‰ï¼ŒæŸ¥åˆ°çš„æ‰€æœ‰è¡Œçš„å€¼éƒ½æ˜¯å®ƒï¼Œä½†ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œ`1>anycol>*`ï¼Œå› ä¸ºä¸ç”¨æŸ¥å­—å…¸è¡¨ã€‚

[select 1 from ... sql è¯­å¥ä¸­çš„ 1 ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ_lili å°è™«å­çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/bibibrave/article/details/82961201)

::: error
å…³äºä¸Šè¿°è¯´æ³•åªåœ¨ä½ç‰ˆæœ¬ä¸­å­˜åœ¨ï¼Œåœ¨é«˜ç‰ˆæœ¬ä¸­å¹¶ä¸å­˜åœ¨æ•ˆç‡æ›´é«˜çš„é—®é¢˜ã€‚
:::

### æŒ‡ä»¤

è¿ç»­åˆ›å»ºç›®å½•

```shell
mkdir -p aa/bb/cc
```

æŸ¥è¯¢æ—¥å¿—ç‰¹å®šæ—¶é—´å†…æ¡æ•°

```shell
# æŸ¥è¯¢æ—¥å¿—

[root@slave ~]# grep '2021-03-24 14:30:[00-59]' /var/log/ODSP.log
2021-03-24 14:30:00 threadclass-HAFailcountClearThread-hastatus [line:1896]: True
2021-03-24 14:30:05 threadclass [line:183]: net-get 0
2021-03-24 14:30:09 threadclass-nodeip [line:1337]: rsyncstatus=True;managestatus=True
2021-03-24 14:30:15 threadclass [line:183]: net-get 0
2021-03-24 14:30:19 threadclass-nodeip [line:1337]: rsyncstatus=True;managestatus=True
2021-03-24 14:30:24 threadclass-ntp-master-local [line:1268]: slave slave
2021-03-24 14:30:26 threadclass [line:183]: net-get 0
2021-03-24 14:30:30 threadclass-nodeip [line:1337]: rsyncstatus=True;managestatus=True
2021-03-24 14:30:32 threadclass-HAFailcountClearThread-hastatus [line:1896]: True
2021-03-24 14:30:36 threadclass [line:183]: net-get 0
2021-03-24 14:30:41 threadclass-nodeip [line:1337]: rsyncstatus=True;managestatus=True
2021-03-24 14:30:47 threadclass [line:183]: net-get 0
2021-03-24 14:30:51 threadclass-nodeip [line:1337]: rsyncstatus=True;managestatus=True
2021-03-24 14:30:58 threadclass [line:183]: net-get 0
# è®°å½•æ¡æ•°ç»Ÿè®¡
[root@slave ~]# grep '2021-03-24 14:30:[00-59]' /var/log/ODSP.log |wc -l
14
```

`-o`æ¨¡ç³ŠåŒ¹é…ï¼Œ`-wo`ç²¾å‡†åŒ¹é…

### nginx å’Œ wsgi åŒºåˆ«

nginx: åå‘ä»£ç†ã€è´Ÿè´£å‡è¡¡
uwsgi: å®ç° Python ç¨‹åºçš„ WSGI åè®®ï¼Œæ¥å—å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè½¬å‘å“åº”çš„ç¨‹åºã€‚

### web åº”ç”¨å¦‚ä½•åˆ©ç”¨å¤šæ ¸æœåŠ¡å™¨æé«˜ cpu ä½¿ç”¨ç‡

uwsgi/gunicorn çº¿ç¨‹æ± ã€è¿›ç¨‹æ± 

[è°ˆè°ˆå¦‚ä½•æé«˜ web æœåŠ¡å™¨å¹¶å‘æ€§èƒ½ | EZLippi-æµ®ç”Ÿå¿—](https://ezlippi.com/blog/2014/12/improve-webServer-performance.html)

### for å¾ªç¯å®ç°å¹‚è¿ç®—

```python
# å¹‚è¿ç®—
def cal_mi(x, y):
    if y == 0:
        return 1
    for _ in range(y - 1):
        x += x
    return x


print(cal_mi(2, 5))  # 32


def ano_cal_mi(x, y):
    if y == 0:
        return 1
    n = 1
    for _ in range(y):
        n *= x
    return n


print(ano_cal_mi(2, 10))  # 1024
```

```python
# ç´¯åŠ 
def cal_multi_add(x, y):
    n = 0
    for i in range(y):
        n += x
    return n


print(cal_multi_add(2, 2))  # 4
```

## å¡å®ç½‘å®‰

### Flask å·¥ä½œåŸç†

[Python é¢è¯• | åˆ«é™¢ç‰§å¿—çŸ¥è¯†åº“](/python/interview/#%E7%AE%80%E8%BF%B0flask%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%87%E7%A8%8B)

### redis ä½¿ç”¨

### celery å·¥ä½œåŸç†

[celery å·¥ä½œåŸç†](/celery/)

### flask-sqlachemy ä¸­çš„å¤–é”®å¦‚ä½•è®¾ç½®

```python
foreigin_key, relationship + backref
```

### TCP ç²˜åŒ…é—®é¢˜

time.sleep()/ æ¶ˆæ¯å¤´æ·»åŠ æ ‡å¿—å­—æ®µ

### æ•°æ®åº“æ›¿æ¢

```sql
-- æ›´æ–°æ•°æ®åº“å­—æ®µ: '2021-6-21å‘¨' -> '20210621' 
update product_strategy_level_score
set weeks=date_format(replace(weeks, 'å‘¨', ''), '%Y%m%d') 

```
å…¶ä¸­`date_format(replace (xxx,'å‘¨',''),'%Y%m%d')` é¦–å…ˆæŠŠ"å‘¨"æ›¿æ¢ï¼Œç„¶åä½¿ç”¨`date_format`å‡½æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ç±»å‹çš„æ•°æ®ã€‚
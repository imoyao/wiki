---
title: SCSI、FC、iSCSI 三大协议详解及比较

tags: 
  - 存储
  - 协议
  - Linux
  - SCST
  - iSCST
  - FC
categories: 
  - 💻工作
  - 存储
date: 2018-09-07 12:27:56
permalink: /pages/af2450/
---
## SCSI

SCSI 是小型计算机系统接口（Small Computer System Interface）的简称，于 1979 首次提出，是为小型机研制的一种接口技术，现在已完全普及到了小型机，高低端服务器以及普通 PC 上。  

SCSI 可以划分为 SCSI-1、SCSI-2、SCSI-3，最新的为 SCSI-3，也是目前应用最广泛的 SCSI 版本。 

1、SCSI-1：1979 年提出，支持同步和异步 SCSI 外围设备；支持 7 台 8 位的外围设备，最大数据传输速度为 5MB/s。   
2、SCSI-2：1992 年提出，也称为 Fast SCSI，数据传输率提高到 20MB/s。   
3、SCSI-3：1995 年提出，Ultra SCSI（Fast-20）。Ultra 2 SCSI（Fast-40）出现于 1997 年，最高传输速率可达 80MB/s。1998 年 9 月，Ultra 3 SCSI（Utra 160 SCSI）正式发布，最高数据传输率为 160MB/s。Ultra 320 SCSI 的最高数据传输率已经达到了 320MB/s。

## FC（光纤通道）  

用于计算机设备之间数据传输，传输率达到 2G（将来会达到 4G）。光纤通道用于服务器共享存储设备的连接，存储控制器和驱动器之间的内部连接。

### 协议基本架构 
FC-4 Upper Layer Protocol:SCSI,HIPPI,SBCCS,802.2,ATM,VI,IP   
FC-3 common service   
FC-2 Framing Protocol /Flow Control   
FC-1 Encode/Decode   
FC-0 Media:Optical or copper,100MB/sec to 1.062GB/sec

### 协议层说明 
FC-0：物理层，定制了不同介质，传输距离，信号机制标准，也定义了光纤和铜线接口以及电缆指标   
FC-1：定义编码和解码的标准   
FC-2：定义了帧、流控制、和服务质量等   
FC-3：定义了常用服务，如数据加密和压缩   
FC-4：协议映射层，定义了光纤通道和上层应用之间的接口，上层应用比如：串行 SCSI 协 议，HBA 的驱动提供了 FC-4 的接口函数，FC-4 支持多协议，如：FCP-SCSI,　FC-IP,FC-VI

## 协议简介   
FCP-SCSI：是将 SCSI 并行接口转化为串行接口方式的协议，应用于存储系统和服务器之间的数据传输。新的 ANSI T10 标准，支持 SAN 上存储系统之间通过数据迁移应用来直接移动数据。 FCP-SCSI 提供 200MB/s（全双工独占带宽）的传输速率，连接最远达 10 公里，最大 16000000 个节点。FCP-SCSI 使用帧传输取代块传输。帧传输以大数据流传输方式传输短的小的事务数据。

## iSCSI

iSCSI（互联网小型计算机系统接口）是一种在 TCP/IP 上进行数据块传输的标准。它是由 Cisco 和 IBM 两家发起的，并且得到了各大存储厂商的大力支持。iSCSI 可以实现在 IP 网络上运行 SCSI 协议，使其能够在诸如高速千兆以太网上进行快速的数据存取备份操作。

iSCSI 标准在 2003 年 2 月 11 日由 IETF（互联网工程任务组）认证通过。iSCSI 继承了两大最传统技术：SCSI 和 TCP/IP 协议。这为 iSCSI 的发展奠定了坚实的基础。基于 iSCSI 的存储系统只需要不多的投资便可实现 SAN 存储功能，甚至直接利用现有的 TCP/IP 网络。相对于以往的网络存储技术，它解决了开放性、容量、传输速度、兼容性、安全性等问题，其优越的性能使其备受始关注与青睐。

### 工作流程  
iSCSI 系统由 SCSI 适配器发送一个 SCSI 命令。   
命令封装到 TCP/IP 包中并送入到以太网络。   
接收方从 TCP/IP 包中抽取 SCSI 命令并执行相关操作。   
把返回的 SCSI 命令和数据封装到 TCP/IP 包中，将它们发回到发送方。   
系统提取出数据或命令，并把它们传回 SCSI 子系统。

### 安全性描述   
iSCSI 协议本身提供了 QoS 及安全特性。   
可以限制 initiator 仅向 target 列表中的目标发登录请求，再由 target 确认并返回响应，之后才允许通信。   
通过 IPSec 将数据包加密之后传输，包括数据完整性、确定性及机密性检测等。

### iSCSI 的优势   
1. 广泛分布的以太网为 iSCSI 的部署提供了基础。   
2. 千兆/万兆以太网的普及为 iSCSI 提供了更大的运行带宽。   
3. 以太网知识的普及为基于 iSCSI 技术的存储技术提供了大量的管理人才。   
4. 由于基于 TCP/IP 网络，完全解决数据远程复制（Data Replication）及灾难恢复（Disaster Recover）等传输距离上的难题。   
5. 得益于以太网设备的价格优势和 TCP/IP 网络的开放性和便利的管理性，设备扩充和应用调整的成本付出小。

## iSCSI 和 FC 的比较  

从传输层看，光纤通道的传输采用其 FC 协议，iSCSI 采用 TCP/IP 协议。

FC 协议与现有的以太网是完全异构的，两者不能相互接驳。因此光纤通道是具有封闭性的，而且不仅与现有的企业内部网络（以太网）接入，也与其他不同厂商的光纤通道网络接入（由于厂家对 FC 标准的理解的异样，FC 设备的兼容性是一个巨大的难题）。因此，对于以后存储网络的扩展由于兼容性的问题而成为了难题。而且，FC 协议由于其协议特性，网络建完后，加入新的存储子网时，必须要重新配置整个网络，这也是 FC 网络扩展的障碍。

iSCSI 基于的 TCP/IP 协议，它本身就运行于以太网之上，因此可以**和现有的企业内部以太网无缝结合**。TCP/IP 网络设备之间的兼容性已经无需讨论，迅猛发展的 internent 网上运行着全球无数家网络设备厂商提供的网络设备，这是一个最好的佐证。 

![](https://img-blog.csdn.net/2018052414444993)

从网络管理的角度看，运行 FC 协议的光网络，其技术难度相当之大。其管理采用了专有的软件，因此**需要专门的管理人员**，且其培训费用高昂。TCP/IP 网络的知识通过这些年的普及，已有大量的网络管理人才，并且，由于支持 TCP/IP 的设备对协议的支持一致性好，即使是不同厂家的设备，其网络管理方法也是基本一致的。

FC 运行于光网络之上，其**速度非常快**，现在已经达到了 2G 的带宽，这也是它的主要优势所在。下一代的 FC 标准正在制定当中，其速度可以达到 4G，今天的千兆以太网已经在普及当中，这也是基于 TCP/IP 的 iSCSI 协议进入实用的保证。

得益于优秀的设计，以太网从诞生到现在，遍及了所有有网络的地方，到现在依然表现出非凡的生命力，在全球无数网络厂商的共同努力下，以太网的速度稳步提升，千兆网络已经实际应用，万兆网络呼之欲出，以太网的主要部件交换机路由器均已有万兆级别的产品。随着产品的不断丰富，以及设备厂商间的剧烈竞争，其建设成本在不断下降，万兆网络的普及已日益临近。

当 iSCSI 以 10Gb 的高速传输数据时，基于 iSCSI 协议的存储技术将无可争议的成为网络存储的王者。

## 参考来源
[SCSI、FC、iSCSI 三大协议详解及比较_click_idc 的博客-CSDN 博客](https://blog.csdn.net/click_idc/article/details/80434261)
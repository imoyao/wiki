---
title: Ceph é”™è¯¯æ”¶é›†è®°å½•
tags: 
  - ceph
  - processing
categories: 
  - ğŸ’»å·¥ä½œ
  - å­˜å‚¨
  - CEPH
  - troubleshooting
subtitle: æƒ³æƒ³è¯´äººç”Ÿæ— æ‚”ï¼Œéƒ½æ˜¯èµŒæ°”çš„è¯ã€‚äººç”Ÿè‹¥æ— æ‚”ï¼Œé‚£è¯¥å¤šæ— è¶£å•Šã€‚<br>æ‰€ä»¥è¯´ç¨‹åºè¿è¡Œé‡åˆ°æŠ¥é”™æ˜¯å¾ˆæ­£å¸¸çš„ä¸€ä»¶äº‹ã€‚ğŸ˜œ
cover: /images/sarah-kilian-52jRtc2S_VE-unsplash.jpg
date: 2020-03-16 20:41:54
permalink: /pages/f6bed7/
---
## [errno 2] error connecting to the cluster
### è§£é‡Š
å®‰è£… ceph é›†ç¾¤ä¹‹åæ‰§è¡Œ`ceph -s`æŠ¥é”™å¦‚ä¸Šï¼Œè¿™ä¸ªæ˜¯å› ä¸ºè®¤è¯æ–‡ä»¶æ²¡æœ‰åˆ†å‘åˆ°ä¸ªèŠ‚ç‚¹å¯¼è‡´çš„æ— æ³•è®¤è¯ã€‚
### è§£å†³æ–¹æ¡ˆ
```plain
ceph-deploy admin admin-node node1 [noden] # åé¢è·Ÿä½ é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å
```
## daemons have recently crashed
### è§£é‡Š
ä¸€ä¸ªæˆ–å¤šä¸ª Ceph å®ˆæŠ¤è¿›ç¨‹æœ€è¿‘å´©æºƒäº†ï¼Œç®¡ç†å‘˜è¿˜æ²¡æœ‰å­˜æ¡£ï¼ˆç¡®è®¤ï¼‰è¿™ä¸ªå´©æºƒã€‚è¿™å¯èƒ½è¡¨ç¤ºè½¯ä»¶é”™è¯¯ã€ç¡¬ä»¶é—®é¢˜(ä¾‹å¦‚ï¼Œæ•…éšœç£ç›˜)æˆ–å…¶ä»–é—®é¢˜ã€‚
### è§£å†³æ–¹æ¡ˆ
1. æŸ¥çœ‹ crash ä¿¡æ¯
```plain
ceph crash ls-new
```
2. æŸ¥çœ‹å½’æ¡£ä¿¡æ¯
```plain
ceph crash info <crash-id>
```
3. å½’æ¡£ crash ä¿¡æ¯
```plain
ceph crash archive <crash-id>
```
ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`ceph crash archive-all`å‘½ä»¤å½’æ¡£ æ‰€æœ‰ä¿¡æ¯
æ›´å¤šå‚è€ƒï¼š
- [Crash Module â€” Ceph Documentation](https://docs.ceph.com/docs/master/mgr/crash/)
- [ceph æŠ¥ daemons have recently crashed_ç½‘ç»œ_lyf0327 çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/lyf0327/article/details/103315698/)
## xx is not defined in `mon initial members`
æ‰§è¡Œ`ceph-deploy mon add xx`æ·»åŠ  mon èŠ‚ç‚¹æ—¶æŠ¥é”™å¦‚ä¸‹ï¼š
```plain
[node3][WARNIN] node3 is not defined in `mon initial members`
[node3][WARNIN] monitor node3 does not exist in monmap
```
### è§£é‡Š
æ·»åŠ çš„ mon èŠ‚ç‚¹ä¸æ˜¯åˆå§‹åŒ–æˆå‘˜ï¼Œé›†ç¾¤æ— æ³•è¯†åˆ«
### è§£å†³æ–¹æ¡ˆ
ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ `public network = 172.18.1.0/24`ï¼ˆç½‘æ®µéœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼‰å¹¶å°†é…ç½®æ–‡ä»¶åŒæ­¥åˆ°æ–°åŠ èŠ‚ç‚¹
```plain
ceph-deploy --overwrite-conf config push xxx
```
### å‚è€ƒ
- [Ceph: mon is down and/or canâ€™t rejoin the quorum â€“ swami reddy](https://swamireddy.wordpress.com/2017/09/20/ceph-mon-is-down-andor-cant-rejoin-the-quorum/)
- [ceph åœ¨æ‰©å±• mon èŠ‚ç‚¹æ—¶ï¼Œè¦æ³¨æ„çš„é—®é¢˜ - aguncn - åšå®¢å›­](https://www.cnblogs.com/aguncn/p/7352393.html)
- [Ceph æ·»åŠ ç›‘è§†å™¨ Monitor å¤±è´¥_è¿ç»´_weixin_33924220 çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/weixin_33924220/article/details/92602783)
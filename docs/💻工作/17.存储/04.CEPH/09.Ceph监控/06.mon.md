---
title: mon ç›‘æ§åŸ‹ç‚¹æŒ‡æ ‡

categories: 
  - ğŸ’»å·¥ä½œ
  - å­˜å‚¨
  - CEPH
  - Ceph ç›‘æ§
date: 2020-05-23 11:02:28
tags: null
permalink: /pages/3f01ce/
---
# 1. perf dump
## 1.1 cluster
ç›‘æ§ç±»å‹ | ç›‘æ§é¡¹ |  è¯´æ˜ | çº§åˆ« |
---|---|---|---|
perf dump cluster | ceph.cluster.num_mon |mon æ•°é‡| |
*| ceph.cluster.num_mon_quorum  |æ³•å®š mon æ•°é‡| |
*| ceph.cluster.num_osd  |é›†ç¾¤ osd èŠ‚ç‚¹æ•°é‡| |
*| ceph.cluster.num_osd_up  |up çŠ¶æ€çš„ osd èŠ‚ç‚¹æ•°é‡| |
*| ceph.cluster.num_osd_in  |in çŠ¶æ€çš„ osd èŠ‚ç‚¹æ•°é‡| |
*| osd_epoch  |osd çš„ epoch å·| |
*| ceph.cluster_total_objects  |é›†ç¾¤ objects æ€»æ•°| |		 	 	 
*|ceph.cluster.num_pg	|é›†ç¾¤ pg æ€»æ•°	 | |	 	 
*|ceph.cluster.num_pg_peering |	é•¿æ—¶é—´å­˜åœ¨ peering çš„ pg	 | |	 	 
*|ceph.cluster.num_pool |	é›†ç¾¤ pool æ•°é‡	 ||	 	 
*|ceph.cluster_total_objects |	é›†ç¾¤ objects æ•°é‡	|| 	 	 
*|ceph.cluster.num_mon |	é›†ç¾¤ mon èŠ‚ç‚¹æ•°	 ||	 	 
*|ceph.cluster.num_mds_up |	up çŠ¶æ€ mds æ•°é‡	|| 	 	 
*|ceph.cluster.num_mds_in |	in çŠ¶æ€ mds æ•°é‡	 ||	 	 
*|ceph.cluster.num_mds_failed	| failed çŠ¶æ€ mds æ•°é‡	|| 	 	 
*| ceph.cluster.osd_bytes	| osd æ€»å…±å¤§å°	 	 ||	 
*|ceph.cluster.osd_bytes_used |	ç”¨æˆ·å ç”¨å¤§å°	 ||	 	 
*|ceph.cluster.osd_bytes_avail |	osd å¯ç”¨çš„å¤§å°	|| 	 	 


## 1.2 leveldb
ç›‘æ§ç±»å‹ | ç›‘æ§é¡¹ |  è¯´æ˜ | çº§åˆ« |
---|---|---|---|
perf dump leveldb | ceph.leveldb.leveldb_get |è·å–çš„æ•°é‡| |
*| ceph.leveldb.leveldb_transaction |	å¤„ç†çš„æ•°é‡	| | 	 	 
*| ceph.leveldb.leveldb_get_latency.avgcount |	è·å–å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„å¹³å‡æ•°é‡	| |	 	 
*| ceph.leveldb.leveldb_get_latency.sum |	è·å–å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„æ€»æ•°	 ||	 
*| ceph.leveldb.leveldb_submit_latency.avgcount |	æäº¤å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„å¹³å‡æ•°é‡	 ||	 	 
*| ceph.leveldb.leveldb_submit_latency.sum |	æäº¤å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„æ€»æ•°	 ||	 	 
*| ceph.leveldb.leveldb_submit_latency.avgcount | æäº¤å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„å¹³å‡æ•°é‡	 ||	 	 
*| ceph.leveldb.leveldb_submit_latency.sum |	æäº¤å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„æ€»æ•°	|| 	 	 
*| ceph.leveldb.leveldb_submit_sync_latency.avgcount	| æäº¤åŒæ­¥å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„å¹³å‡æ•°é‡ ||	 	 	 
*| ceph.leveldb.leveldb_submit_sync_latency.sum | æäº¤åŒæ­¥å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢çš„æ€»æ•° ||	 	 	 
*| ceph.leveldb.leveldb_compact |	å‹ç¼©	 ||	 	 
*| ceph.leveldb.leveldb_compact_range |	å‹ç¼©èŒƒå›´	|| 	 
*| ceph.leveldb.leveldb_compact_queue_merge |	å‹ç¼©åˆå¹¶é˜Ÿåˆ—	||	 	 
*| ceph.leveldb.leveldb_compact_queue_len | å‹ç¼©é˜Ÿåˆ—é•¿åº¦	 || 

## 1.3 mon
ç›‘æ§ç±»å‹ | ç›‘æ§é¡¹ |  è¯´æ˜ | çº§åˆ« |
---|---|---|---|
perf dump mon |ceph.mon.num_sessions|å½“å‰æ‰“å¼€çš„ç›‘è§†å™¨ä¼šè¯æ•°||	 	 	 
*|ceph.mon.sessions_add| åˆ›å»ºç›‘è§†å™¨ä¼šè¯æ•°||	 	 	 
*|ceph.mon.sessions_rm|ç›‘è§†å™¨ä¸­åˆ é™¤ä¼šè¯è°ƒç”¨çš„æ¬¡æ•°||	 	 	 
*|ceph.mon.sessions_trim|è°ƒæ•´ç›‘è§†å™¨ä¼šè¯æ•°	 ||	 	 
*|ceph.mon.num_elections|é€‰ä¸¾ç›‘å¯Ÿå‘˜æ•°é‡	 ||	 	 
*|ceph.mon.election_cal | ç”±ç›‘è§†å™¨å¯åŠ¨çš„é€‰ä¸¾æ•° ||	 	 	 
*|ceph.mon.election_win |é€‰ä¸¾èµ¢å¾—é€‰ä¸¾æ•°	 ||	 	 
*|ceph.mon.election_lose |é€‰ä¸¾æµå¤±çš„é€‰ä¸¾æ•° ||	 	 	 

## 1.4 paxos
ç›‘æ§ç±»å‹ | ç›‘æ§é¡¹ |  è¯´æ˜ | çº§åˆ« |
---|---|---|---|
perf dump paxos|ceph.paxos.start_leader|å¯åŠ¨ leader è§’è‰²|| 	 	 
*|ceph.paxos.start_peon|å¯åŠ¨ peon è§’è‰²	 ||	 	 
*|ceph.paxos.restart |é‡å¯æ•°||	 	 	 
*|ceph.paxos.refresh|	åˆ·æ–°	 ||	 	 
*|ceph.paxos.refresh|	åˆ·æ–°	|| 	 	 
*|ceph.paxos.refresh_latency.avgcount |å»¶è¿Ÿåˆ·æ–°å¹³å‡æ•°|| 	 	 
*|ceph.paxos.refresh_latency.sum | å»¶è¿Ÿåˆ·æ–°æ€»æ•° ||	 	 	 
*| ceph.paxos.begin | å¼€å§‹å¤„ç†	|| 	 	 
*| ceph.paxos.begin_keys.avgcount | å¼€å§‹å¤„ç† keys çš„å¹³å‡æ•°é‡ ||	 	 	 
*| ceph.paxos.begin_keys.sum | å¼€å§‹å¤„ç† keys çš„æ€»æ•° || 	 	 
*| ceph.paxos.begin_bytes.avgcount | å¼€å§‹å¤„ç† bytes çš„å¹³å‡æ•°é‡||	 	 
*|ceph.paxos.begin_bytes.sum | å¼€å§‹å¤„ç† bytes çš„æ€»æ•° ||	 	 	 
*|ceph.paxos.begin_latency.avgcount | å¼€å§‹å¤„ç†å»¶è¿Ÿçš„å¹³å‡æ•°é‡||	 	 	 
*|ceph.paxos.begin_latency.sum|å¼€å§‹å¤„ç†å»¶è¿Ÿçš„æ€»æ•°|| 	 	 
*|ceph.paxos.commit|æäº¤æ•°	 ||	 	 
*|ceph.paxos.commit_keys.avgcount|æäº¤ keys çš„å¹³å‡æ•°é‡ ||	 	 	 
*|ceph.paxos.commit_keys.sum|æäº¤ keys çš„æ€»æ•°	|| 	 	 
*|ceph.paxos.commit_latency.avgcount|æäº¤å»¶è¿Ÿçš„å¹³å‡æ•°é‡||	 	 	 
*|ceph.paxos.commit_latency.sum|æäº¤å»¶è¿Ÿçš„æ€»æ•°||	 	 	 
*|ceph.paxos.collect|æ”¶é›†|| 	 	 
*|ceph.paxos.collect_keys.avgcount|æ”¶é›†çš„ keys çš„å¹³å‡æ•°é‡	 ||	 	 
*|ceph.paxos.collect_keys.sum|æ”¶é›†çš„ keys çš„æ€»æ•°||	 	 	 
*|ceph.paxos.collect_bytes.avgcount|æ”¶é›†çš„ bytes æ•°çš„å¹³å‡æ•°é‡||	 	 	 
*|ceph.paxos.collect_bytes.sum|æ”¶é›†çš„ bytes æ•°çš„æ€»æ•°||	 	 	 
*|ceph.paxos.collect_latency.avgcount|æ”¶é›†å»¶è¿Ÿå¹³å‡æ•°é‡||	 	 	 
*|ceph.paxos.collect_latency.sum|æ”¶é›†å»¶è¿Ÿæ€»æ•°|| 	 	 
*|ceph.paxos.collect_uncommitted|||	 	 	 	 
*|ceph.paxos.collect_timeout|æ”¶é›†è¶…æ—¶æ—¶é—´||	 	 	 
*|ceph.paxos.accept_timeout|æ¥å—è¶…æ—¶æ—¶é—´	||	 	 
*|ceph.paxos.lease_ack_timeout|ç§Ÿçº¦ç¡®è®¤è¶…æ—¶æ—¶é—´||	 	 	 
*|ceph.paxos.lease_timeout|ç§Ÿçº¦è¶…æ—¶æ—¶é—´|| 	 	 
*|ceph.paxos.store_state|å­˜å‚¨çš„çŠ¶æ€||	 	 	 
*|ceph.paxos.store_state_keys.avgcount|å­˜å‚¨çŠ¶æ€ä¸­çš„äº‹åŠ¡å¯†é’¥å¹³å‡æ•°	 ||	 	 
*|ceph.paxos.store_state_keys.sum|å­˜å‚¨çŠ¶æ€ä¸­çš„äº‹åŠ¡å¯†é’¥æ€»æ•°	|| 	 	 
*|ceph.paxos.store_state_bytes.avgcount|å­˜å‚¨çŠ¶æ€ä¸­äº‹åŠ¡ä¸­çš„æ•°æ®çš„å¹³å‡æ•°	||	 	 
*|ceph.paxos.store_state_bytes.sum|å­˜å‚¨çŠ¶æ€ä¸­äº‹åŠ¡ä¸­çš„æ•°æ®çš„æ€»æ•°	 || 	 
*|ceph.paxos.store_state_latency.avgcount |å­˜å‚¨çŠ¶æ€å»¶è¿Ÿå¹³å‡æ•°||	 	 	 
*|ceph.paxos.store_state_latency.sum|å­˜å‚¨çŠ¶æ€å»¶è¿Ÿæ€»æ•°|| 	 	 
*|ceph.paxos.share_state|å…±äº«çŠ¶æ€||	 	 	 
*|ceph.paxos.share_state_keys.avgcount|å…±äº«çŠ¶æ€çš„ keys çš„å¹³å‡æ•°	||	 	 
*|ceph.paxos.share_state_keys.sum|å…±äº«çŠ¶æ€çš„ keys çš„æ€»æ•°	|| 	 	 
*|ceph.paxos.share_state_bytes.avgcount|å…±äº«çŠ¶æ€æ•°æ®å¹³å‡æ•°|| 	 	 
*|ceph.paxos.share_state_bytes.sum|å…±äº«çŠ¶æ€æ•°æ®æ€»æ•°||	 	 	 
*|ceph.paxos.new_pn|æ–°å»ºæè®®å·è¯¢é—®||	 	 	 
*|ceph.paxos.new_pn_latency.avgcount|æ–°å»ºæè®®å·è¯¢é—®ç­‰å¾…æ—¶é—´çš„å¹³å‡æ•°é‡||	 	 
*|ceph.paxos.new_pn_latency.sum	|æ–°å»ºæè®®å·è¯¢é—®ç­‰å¾…æ—¶é—´çš„æ€»æ•°|| 

## 1.5 throttle
ç›‘æ§ç±»å‹ | ç›‘æ§é¡¹ |  è¯´æ˜ | çº§åˆ« |
---|---|---|---|
perf dump throttle-*|val|å½“å‰å¯ç”¨çš„å€¼||	 	 	 
*|max|æœ€å¤§é™åˆ¶æ•°||	 	 	 
*|get|è·å–åˆ°çš„å€¼||	 	 	 
*|get_sum|è·å–åˆ°çš„æ€»æ•°	|| 	 	 
*|get_or_fail_fail|è·å–æˆ–è€…é”™è¯¯å€¼||	 	 	 
*|get_or_fail_success|è·å–æˆ–è€…é”™è¯¯æˆåŠŸå€¼||	 	 	 
*|take|æ¥å—å€¼||	 	 	 
*|take_sum|æ¥å—æ€»æ•°||	 	 	 
*|put	|æ¨é€å€¼||	 	 	 
*|put_sum|æ¨é€æ€»æ•°	 ||	 	 
*|wait.avgcount|ç­‰å¾…å¹³å‡æ•°é‡||	 	 	 
*|wait.sum|ç­‰å¾…æ€»æ•°||	 	 	 

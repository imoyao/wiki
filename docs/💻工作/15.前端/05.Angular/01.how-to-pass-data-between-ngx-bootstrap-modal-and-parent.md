---
title: Angular å¼¹æ¡†ä¸çˆ¶ç»„ä»¶ä¹‹é—´ä¼ å€¼çš„é—®é¢˜ï¼ˆæœ€é‡è¦çš„æ˜¯çˆ¶ç»„ä»¶æ¥æ”¶å­ç»„ä»¶çš„è¿”å›å€¼ï¼‰

tags: 
  - å‰ç«¯
categories: 
  - ğŸ’»å·¥ä½œ
  - å‰ç«¯
  - Angular
date: 2020-05-25 18:21:46
permalink: /pages/963e0a/
---
## å­ç»„ä»¶ï¼ˆå¼¹æ¡† modalï¼‰ä¸­

```typescript
@Output() action = new EventEmitter();

// now on click ok button emit the output from confirmPopupComponent
public clickOk() {
    this.loading = true;
    this.action.emit(true); // æäº¤ç»™çˆ¶ç»„ä»¶ï¼Œhere you can send object  instead of true
}
```
## çˆ¶ç»„ä»¶ä¸­ï¼Œè°ƒç”¨å‘èµ·æ–¹

```typescript
LocateDiskAction(lightState) {
    this.clickModal = true  // å¼¹æ¡†ç½®true
    let lightDisk = await this.getDisklight(lightState)
    let initialState = {
      lightDisk: lightDisk,
      action: lightState,
      hostName: this.hostName,
    };
    let bsModalRef = this.modalService.show(DiskLocateModalComponent, {
      initialState,
    });
    bsModalRef.content.action.take(1).subscribe((value) => {
        console.log(value) // here you will get the value
    });
    }
```
å¦‚æœä¸Šé¢çš„è°ƒç”¨å‡ºé”™ï¼Œå¯ä»¥è¯•è¯•ä¸‹é¢çš„æ–¹æ³•ï¼š
```typescript
openModalWithComponent() {
  const initialState = {
    list: [
      {"tag":'Count',"value":this.itemList.length}
    ]
  };
  this.bsModalRef = this.modalService.show(ItemAddComponent, {initialState});
  this.bsModalRef.content.closeBtnName = 'Close';

  this.bsModalRef.content.event.subscribe(res => {
    this.itemList.push(res.data);
  });
}
```

## åŒæ­¥è°ƒç”¨

```typescript
  async LocateDiskAction(lightState) {
    this.clickModal = true  // å¼¹æ¡†ç½®true
    let lightDisk = await this.getDisklight(lightState)
    let initialState = {
      lightDisk: lightDisk,
      action: lightState,
      hostName: this.hostName,
    };

    let bsModalRef = this.modalService.show(DiskLocateModalComponent, {
      initialState,
    });

    let newSubscriber = this.modalService.onHide.subscribe(r=>{
      newSubscriber.unsubscribe();
      this.clickModal = false
      console.log('DATA',bsModalRef.content);
    });
  }

  getDisklight(diskSignal) {
    return this.client.get(`api/disk/${this.hostName}?disk_status=${diskSignal}`).toPromise();
  }
```
## å‚è€ƒé“¾æ¥

1. [How to pass data to modal ngx-bootstrap and receive return data ? Â· Issue #2290 Â· valor-software/ngx-bootstrap](https://github.com/valor-software/ngx-bootstrap/issues/2290)
2. [How to pass data between NGX Bootstrap modal and parent](https://medium.com/@randulakoralage82/how-to-pass-data-between-ngx-bootstrap-modal-and-parent-e348cd596cf7)
---
title: RESTful API è®¾è®¡è§„èŒƒ
tags: 
- RESTful
categories: 
  - ğŸ’» å·¥ä½œ
  - è§„èŒƒ
date: 2019-05-26 12:27:56
permalink: /guide/restful/
author: godruoyi
link: https://github.com/godruoyi/restful-api-specification
---

è¯¥æ–‡æ¡£æ•´ç†äº†ç›®å‰æ¯”è¾ƒæµè¡Œçš„ `RESTful api` è®¾è®¡è§„èŒƒã€‚

## å…³äºã€Œèƒ½æ„¿åŠ¨è¯ã€çš„ä½¿ç”¨

ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæ–‡æ¡£å¤§é‡ä½¿ç”¨äº†ã€Œèƒ½æ„¿åŠ¨è¯ã€ï¼Œå¯¹åº”çš„è§£é‡Šå¦‚ä¸‹ï¼š

* `å¿…é¡» (MUST)`ï¼šç»å¯¹ï¼Œä¸¥æ ¼éµå¾ªï¼Œè¯·ç…§åšï¼Œæ— æ¡ä»¶éµå®ˆï¼›
* `ä¸€å®šä¸å¯ (MUST NOT)`ï¼šç¦ä»¤ï¼Œä¸¥ä»¤ç¦æ­¢ï¼›
* `åº”è¯¥ (SHOULD)` ï¼šå¼ºçƒˆå»ºè®®è¿™æ ·åšï¼Œä½†æ˜¯ä¸å¼ºæ±‚ï¼›
* `ä¸è¯¥ (SHOULD NOT)`ï¼šå¼ºçƒˆä¸å»ºè®®è¿™æ ·åšï¼Œä½†æ˜¯ä¸å¼ºæ±‚ï¼›
* `å¯ä»¥ (MAY)` å’Œ `å¯é€‰ (OPTIONAL)` ï¼šé€‰æ‹©æ€§é«˜ä¸€ç‚¹ï¼Œåœ¨è¿™ä¸ªæ–‡æ¡£å†…ï¼Œæ­¤è¯è¯­ä½¿ç”¨è¾ƒå°‘ï¼›

> å‚è§ï¼š[RFC 2119](http://www.ietf.org/rfc/rfc2119.txt)

## Protocol

å®¢æˆ·ç«¯åœ¨é€šè¿‡ `API` ä¸åç«¯æœåŠ¡é€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œ`åº”è¯¥` ä½¿ç”¨ `HTTPS` åè®®ã€‚

## API Root URL

`API` çš„æ ¹å…¥å£ç‚¹åº”å°½å¯èƒ½ä¿æŒè¶³å¤Ÿç®€å•ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªå¸¸è§çš„ `URL` æ ¹ä¾‹å­ï¼š

* api.example.com/*
* example.com/api/*

> å¦‚æœä½ çš„åº”ç”¨å¾ˆåºå¤§æˆ–è€…ä½ é¢„è®¡å®ƒå°†ä¼šå˜çš„å¾ˆåºå¤§ï¼Œé‚£ `åº”è¯¥` å°† `API` æ”¾åˆ°å­åŸŸä¸‹ï¼ˆ`api.example.com`ï¼‰ã€‚è¿™ç§åšæ³•å¯ä»¥ä¿æŒæŸäº›è§„æ¨¡åŒ–ä¸Šçš„çµæ´»æ€§ã€‚

## Versioning

æ‰€æœ‰çš„ `API` å¿…é¡»ä¿æŒå‘åå…¼å®¹ï¼Œä½  `å¿…é¡»` åœ¨å¼•å…¥æ–°ç‰ˆæœ¬ `API` çš„åŒæ—¶ç¡®ä¿æ—§ç‰ˆæœ¬ `API` ä»ç„¶å¯ç”¨ã€‚æ‰€ä»¥ `åº”è¯¥` ä¸ºå…¶æä¾›ç‰ˆæœ¬æ”¯æŒã€‚

ç›®å‰æ¯”è¾ƒå¸¸è§çš„ä¸¤ç§ç‰ˆæœ¬å·å½¢å¼ï¼š

### åœ¨ URL ä¸­åµŒå…¥ç‰ˆæœ¬ç¼–å·

```bash
api.example.com/v1/*
```

è¿™ç§åšæ³•æ˜¯ç‰ˆæœ¬å·ç›´è§‚ã€æ˜“äºè°ƒè¯•ï¼›å¦ä¸€ç§åšæ³•æ˜¯ï¼Œå°†ç‰ˆæœ¬å·æ”¾åœ¨ `HTTP Header` å¤´ä¸­ï¼š

### é€šè¿‡åª’ä½“ç±»å‹æ¥æŒ‡å®šç‰ˆæœ¬ä¿¡æ¯

```bash
Accept: application/vnd.example.com.v1+json
```

å…¶ä¸­ `vnd` è¡¨ç¤º `Standards Tree` æ ‡å‡†æ ‘ç±»å‹ï¼Œæœ‰ä¸‰ä¸ªä¸åŒçš„æ ‘: `x`ï¼Œ`prs` å’Œ `vnd`ã€‚ä½ ä½¿ç”¨çš„æ ‡å‡†æ ‘éœ€è¦å–å†³äºä½ å¼€å‘çš„é¡¹ç›®

* æœªæ³¨å†Œçš„æ ‘ï¼ˆ`x`ï¼‰ä¸»è¦è¡¨ç¤ºæœ¬åœ°å’Œç§æœ‰ç¯å¢ƒ
* ç§æœ‰æ ‘ï¼ˆ`prs`ï¼‰ä¸»è¦è¡¨ç¤ºæ²¡æœ‰å•†ä¸šå‘å¸ƒçš„é¡¹ç›®
* ä¾›åº”å•†æ ‘ï¼ˆ`vnd`ï¼‰ä¸»è¦è¡¨ç¤ºå…¬å¼€å‘å¸ƒçš„é¡¹ç›®

> åé¢å‡ ä¸ªå‚æ•°ä¾æ¬¡ä¸ºåº”ç”¨åç§°ï¼ˆä¸€èˆ¬ä¸ºåº”ç”¨åŸŸåï¼‰ã€ç‰ˆæœ¬å·ã€æœŸæœ›çš„è¿”å›æ ¼å¼ã€‚

è‡³äºå…·ä½“æŠŠç‰ˆæœ¬å·æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œè¿™ä¸ªé—®é¢˜ä¸€ç›´å­˜åœ¨å¾ˆå¤§çš„äº‰è®®ï¼Œä½†ç”±äºæˆ‘ä»¬å¤§å¤šæ•°æ—¶é—´éƒ½åœ¨ä½¿ç”¨ `Laravel` å¼€å‘ï¼Œ`åº”è¯¥` ä½¿ç”¨ [dingo/api](https://github.com/dingo/api) æ¥å¿«é€Ÿæ„å»ºåº”ç”¨ï¼Œå®ƒé‡‡ç”¨ç¬¬äºŒç§æ–¹å¼æ¥ç®¡ç† `API` ç‰ˆæœ¬ï¼Œå¹¶ä¸”å·²é›†æˆäº†æ ‡å‡†çš„ `HTTP Response`ã€‚

## Endpoints

ç«¯ç‚¹å°±æ˜¯æŒ‡å‘ç‰¹å®šèµ„æºæˆ–èµ„æºé›†åˆçš„ `URL`ã€‚åœ¨ç«¯ç‚¹çš„è®¾è®¡ä¸­ï¼Œä½  `å¿…é¡»` éµå®ˆä¸‹åˆ—çº¦å®šï¼š

* URL çš„å‘½å `å¿…é¡»` å…¨éƒ¨å°å†™
* URL ä¸­èµ„æºï¼ˆ`resource`ï¼‰çš„å‘½å `å¿…é¡»` æ˜¯åè¯ï¼Œå¹¶ä¸” `å¿…é¡»` æ˜¯å¤æ•°å½¢å¼
* `å¿…é¡»` ä¼˜å…ˆä½¿ç”¨ `RESTful` ç±»å‹çš„ URL
* URL `å¿…é¡»` æ˜¯æ˜“è¯»çš„
* URL `ä¸€å®šä¸å¯` æš´éœ²æœåŠ¡å™¨æ¶æ„

> è‡³äº URL æ˜¯å¦å¿…é¡»ä½¿ç”¨è¿å­—ç¬¦ï¼ˆ`-`ï¼‰ æˆ–ä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰ï¼Œä¸åšç¡¬æ€§è§„å®šï¼Œä½† `å¿…é¡»` æ ¹æ®å›¢é˜Ÿæƒ…å†µç»Ÿä¸€ä¸€ç§é£æ ¼ã€‚

æ¥çœ‹ä¸€ä¸ªåä¾‹

* https://api.example.com/getUserInfo?userid=1
* https://api.example.com/getusers
* https://api.example.com/sv/u
* https://api.example.com/cgi-bin/users/get_user.php?userid=1

å†æ¥çœ‹ä¸€ä¸ªæ­£åˆ—

* https://api.example.com/zoos
* https://api.example.com/animals
* https://api.example.com/zoos/{zoo}/animals
* https://api.example.com/animal_types
* https://api.example.com/employees

## HTTP åŠ¨è¯

å¯¹äºèµ„æºçš„å…·ä½“æ“ä½œç±»å‹ï¼Œç”± `HTTP` åŠ¨è¯è¡¨ç¤ºã€‚å¸¸ç”¨çš„ `HTTP` åŠ¨è¯æœ‰ä¸‹é¢äº”ä¸ªï¼ˆæ‹¬å·é‡Œæ˜¯å¯¹åº”çš„ `SQL` å‘½ä»¤ï¼‰ã€‚

* GETï¼ˆSELECTï¼‰ï¼šä»æœåŠ¡å™¨å–å‡ºèµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰ã€‚
* POSTï¼ˆCREATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æºã€‚
* PUTï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰ã€‚
* PATCHï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜çš„å±æ€§ï¼‰ã€‚
* DELETEï¼ˆDELETEï¼‰ï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æºã€‚

å…¶ä¸­

1 åˆ é™¤èµ„æº `å¿…é¡»` ç”¨ `DELETE` æ–¹æ³•
2 åˆ›å»ºæ–°çš„èµ„æº `å¿…é¡»` ä½¿ç”¨ `POST` æ–¹æ³•
3 æ›´æ–°èµ„æº `åº”è¯¥` ä½¿ç”¨ `PUT` æ–¹æ³•
4 è·å–èµ„æºä¿¡æ¯ `å¿…é¡»` ä½¿ç”¨ `GET` æ–¹æ³•

é’ˆå¯¹æ¯ä¸€ä¸ªç«¯ç‚¹æ¥è¯´ï¼Œä¸‹é¢åˆ—å‡ºæ‰€æœ‰å¯è¡Œçš„ `HTTP` åŠ¨è¯å’Œç«¯ç‚¹çš„ç»„åˆ

| è¯·æ±‚æ–¹æ³• | URL | æè¿° |
| ---------- | --- | --- |
| GET | /zoos                              | åˆ—å‡ºæ‰€æœ‰çš„åŠ¨ç‰©å›­(ID å’Œåç§°ï¼Œä¸è¦å¤ªè¯¦ç»†) |
| POST | /zoos                              | æ–°å¢ä¸€ä¸ªæ–°çš„åŠ¨ç‰©å›­ |
| GET | /zoos/{zoo}                        | è·å–æŒ‡å®šåŠ¨ç‰©å›­è¯¦æƒ… |
| PUT | /zoos/{zoo}                        | æ›´æ–°æŒ‡å®šåŠ¨ç‰©å›­(æ•´ä¸ªå¯¹è±¡) |
| PATCH | /zoos/{zoo}                        | æ›´æ–°åŠ¨ç‰©å›­(éƒ¨åˆ†å¯¹è±¡) |
| DELETE | /zoos/{zoo}                        | åˆ é™¤æŒ‡å®šåŠ¨ç‰©å›­ |
| GET | /zoos/{zoo}/animals                | æ£€ç´¢æŒ‡å®šåŠ¨ç‰©å›­ä¸‹çš„åŠ¨ç‰©åˆ—è¡¨(ID å’Œåç§°ï¼Œä¸è¦å¤ªè¯¦ç»†) |
| GET | /animals                           | åˆ—å‡ºæ‰€æœ‰åŠ¨ç‰©(ID å’Œåç§°)ã€‚ |
| POST | /animals                           | æ–°å¢æ–°çš„åŠ¨ç‰© |
| GET | /animals/{animal}                  | è·å–æŒ‡å®šçš„åŠ¨ç‰©è¯¦æƒ… |
| PUT | /animals/{animal}                  | æ›´æ–°æŒ‡å®šçš„åŠ¨ç‰©(æ•´ä¸ªå¯¹è±¡) |
| PATCH | /animals/{animal}                  | æ›´æ–°æŒ‡å®šçš„åŠ¨ç‰©(éƒ¨åˆ†å¯¹è±¡) |
| GET | /animal_types                      | è·å–æ‰€æœ‰åŠ¨ç‰©ç±»å‹(ID å’Œåç§°ï¼Œä¸è¦å¤ªè¯¦ç»†) |
| GET | /animal_types/{type}               | è·å–æŒ‡å®šçš„åŠ¨ç‰©ç±»å‹è¯¦æƒ… |
| GET | /employees                         | æ£€ç´¢æ•´ä¸ªé›‡å‘˜åˆ—è¡¨ |
| GET | /employees/{employee}              | æ£€ç´¢æŒ‡å®šç‰¹å®šçš„å‘˜å·¥ |
| GET | /zoos/{zoo}/employees              | æ£€ç´¢åœ¨è¿™ä¸ªåŠ¨ç‰©å›­å·¥ä½œçš„é›‡å‘˜çš„åå•(èº«ä»½è¯å’Œå§“å) |
| POST | /employees                         | æ–°å¢æŒ‡å®šæ–°å‘˜å·¥ |
| POST | /zoos/{zoo}/employees              | åœ¨ç‰¹å®šçš„åŠ¨ç‰©å›­é›‡ä½£ä¸€åå‘˜å·¥ |
| DELETE | /zoos/{zoo}/employees/{employee}   | ä»æŸä¸ªåŠ¨ç‰©å›­è§£é›‡ä¸€åå‘˜å·¥ |

> è¶…å‡º `RESTful` ç«¯ç‚¹çš„ï¼Œ`åº”è¯¥` æ¨¡ä»¿ä¸Šè¡¨çš„æ–¹å¼æ¥å®šä¹‰ç«¯ç‚¹ã€‚

## Filtering

> å¦‚æœè®°å½•æ•°é‡å¾ˆå¤šï¼ŒæœåŠ¡å™¨ä¸å¯èƒ½éƒ½å°†å®ƒä»¬è¿”å›ç»™ç”¨æˆ·ã€‚API `åº”è¯¥` æä¾›å‚æ•°ï¼Œè¿‡æ»¤è¿”å›ç»“æœã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„å‚æ•°ã€‚

* ?limit=10ï¼šæŒ‡å®šè¿”å›è®°å½•çš„æ•°é‡
* ?offset=10ï¼šæŒ‡å®šè¿”å›è®°å½•çš„å¼€å§‹ä½ç½®ã€‚
* ?page=2&per_page=100ï¼šæŒ‡å®šç¬¬å‡ é¡µï¼Œä»¥åŠæ¯é¡µçš„è®°å½•æ•°ã€‚
* ?sortby=name&order=ascï¼šæŒ‡å®šè¿”å›ç»“æœæŒ‰ç…§å“ªä¸ªå±æ€§æ’åºï¼Œä»¥åŠæ’åºé¡ºåºã€‚
* ?animal_type_id=1ï¼šæŒ‡å®šç­›é€‰æ¡ä»¶

æ‰€æœ‰ `URL` å‚æ•° `å¿…é¡»` æ˜¯å…¨å°å†™ï¼Œ`å¿…é¡»` ä½¿ç”¨ä¸‹åˆ’çº¿ç±»å‹çš„å‚æ•°å½¢å¼ã€‚
::: tip INFO
æ³¨æ„ï¼šæ—¥å¸¸ web å¼€å‘æ—¶ä¸ºäº† SEO å»ºè®®ä½¿ç”¨è¿å­—ç¬¦è€Œä¸æ˜¯ä¸‹åˆ’çº¿çš„ï¼ˆGoogle å»ºè®®çš„ï¼‰ï¼Œä¸‹åˆ’çº¿`_` æ›´ç¬¦åˆ api çš„éœ€æ±‚ï¼Œè¿è¯ç¬¦ `-` æ˜¯ä¸ºäº†è®© SEO æ›´å‹å¥½çš„åˆ†è¯æœç´¢ï¼Œè€Œ RESTful ä½œä¸ºèµ„æºè¡¨å¾çš„ï¼Œæ˜¯ä¸€ä¸ªèµ„æºæ•´ä½“ï¼Œä¸åº”è¯¥è¢«è¿è¯ç¬¦ä½œç”¨
:::

> åˆ†é¡µå‚æ•° `å¿…é¡»` å›ºå®šä¸º `page`ã€`per_page`

ç»å¸¸ä½¿ç”¨çš„ã€å¤æ‚çš„æŸ¥è¯¢ `åº”è¯¥` æ ‡ç­¾åŒ–ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚å¦‚

```bash
GET /trades?status=closed&sort=sortby=name&order=asc

# å¯ä¸ºå…¶å®šåˆ¶å¿«æ·æ–¹å¼
GET /trades/recently_closed
```

## Authentication

`åº”è¯¥` ä½¿ç”¨ `OAuth2.0` çš„æ–¹å¼ä¸º API è°ƒç”¨è€…æä¾›ç™»å½•è®¤è¯ã€‚`å¿…é¡»` å…ˆé€šè¿‡ç™»å½•æ¥å£è·å– `Access Token` åå†é€šè¿‡è¯¥ `token` è°ƒç”¨éœ€è¦èº«ä»½è®¤è¯çš„ `API`ã€‚

Oauth çš„ç«¯ç‚¹è®¾è®¡ç¤ºåˆ—

* RFC 6749   /token
* Twitter    /oauth2/token
* Fackbook   /oauth/access_token
* Google     /o/oauth2/token
* Github     /login/oauth/access_token
* Instagram  /oauth/authorize

å®¢æˆ·ç«¯åœ¨è·å¾— `access token` çš„åŒæ—¶ `å¿…é¡»` åœ¨å“åº”ä¸­åŒ…å«ä¸€ä¸ªåä¸º `expires_in` çš„æ•°æ®ï¼Œå®ƒè¡¨ç¤ºå½“å‰è·å¾—çš„ `token` ä¼šåœ¨å¤šå°‘ `ç§’` åå¤±æ•ˆã€‚

```json
{
    "access_token": "token....",
    "token_type": "Bearer",
    "expires_in": 3600
}
```

å®¢æˆ·ç«¯åœ¨è¯·æ±‚éœ€è¦è®¤è¯çš„ `API` æ—¶ï¼Œ`å¿…é¡»` åœ¨è¯·æ±‚å¤´ `Authorization` ä¸­å¸¦ä¸Š `access_token`ã€‚

```bash
Authorization: Bearer token...
```

å½“è¶…è¿‡æŒ‡å®šçš„ç§’æ•°åï¼Œ`access token` å°±ä¼šè¿‡æœŸï¼Œå†æ¬¡ç”¨è¿‡æœŸ/æˆ–æ— æ•ˆçš„ `token` è®¿é—®æ—¶ï¼ŒæœåŠ¡ç«¯ `åº”è¯¥` è¿”å› `invalid_token` çš„é”™è¯¯æˆ– `401` é”™è¯¯ç ã€‚

```http
HTTP/1.1 401 Unauthorized
Content-Type: application/json
Cache-Control: no-store
Pragma: no-cache

{
    "error": "invalid_token"
}
```

> Laravel å¼€å‘ä¸­ï¼Œ`åº”è¯¥` ä½¿ç”¨ [JWT](https://github.com/tymondesigns/jwt-auth) æ¥ä¸ºç®¡ç†ä½ çš„ Tokenï¼Œå¹¶ä¸” `ä¸€å®šä¸å¯` åœ¨ `api` ä¸­é—´ä»¶ä¸­å¼€å¯è¯·æ±‚ `session`ã€‚

## Response

æ‰€æœ‰çš„ `API` å“åº”ï¼Œ`å¿…é¡»` éµå®ˆ `HTTP` è®¾è®¡è§„èŒƒï¼Œ`å¿…é¡»` é€‰æ‹©åˆé€‚çš„ `HTTP` çŠ¶æ€ç ã€‚`ä¸€å®šä¸å¯` æ‰€æœ‰æ¥å£éƒ½è¿”å›çŠ¶æ€ç ä¸º `200` çš„ `HTTP` å“åº”ï¼Œå¦‚ï¼š

```http
HTTP/1.1 200 ok
Content-Type: application/json
Server: example.com

{
    "code": 0,
    "msg": "success",
    "data": {
        "username": "username"
    }
}
```

æˆ–

```http
HTTP/1.1 200 ok
Content-Type: application/json
Server: example.com

{
    "code": -1,
    "msg": "è¯¥æ´»åŠ¨ä¸å­˜åœ¨",
}
```

ä¸‹è¡¨åˆ—ä¸¾äº†å¸¸è§çš„ `HTTP` çŠ¶æ€ç 

| çŠ¶æ€ç  | æè¿° |
| ---------- | --- |
| 1xx | ä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç† |
| 2xx | è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å› |
| 3xx | é‡å®šå‘ |
| 4xx | å®¢æˆ·ç«¯åŸå› å¼•èµ·çš„é”™è¯¯ |
| 5xx | æœåŠ¡ç«¯åŸå› å¼•èµ·çš„é”™è¯¯ |

> åªæœ‰æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚è¢«æ­£ç¡®çš„å¤„ç†åæ‰èƒ½è¿”å› `2xx` çš„å“åº”ï¼Œæ‰€ä»¥å½“ API è¿”å› `2xx` ç±»å‹çš„çŠ¶æ€ç æ—¶ï¼Œå‰ç«¯ `å¿…é¡»` è®¤å®šè¯¥è¯·æ±‚å·²å¤„ç†æˆåŠŸã€‚

å¿…é¡»å¼ºè°ƒçš„æ˜¯ï¼Œæ‰€æœ‰ `API` `ä¸€å®šä¸å¯` è¿”å› `1xx` ç±»å‹çš„çŠ¶æ€ç ã€‚å½“ `API` å‘ç”Ÿé”™è¯¯æ—¶ï¼Œ`å¿…é¡»` è¿”å›å‡ºé”™æ—¶çš„è¯¦ç»†ä¿¡æ¯ã€‚ç›®å‰å¸¸è§è¿”å›é”™è¯¯ä¿¡æ¯çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š

1ã€å°†é”™è¯¯è¯¦ç»†æ”¾å…¥ `HTTP` å“åº”é¦–éƒ¨ï¼›

```http
X-MYNAME-ERROR-CODE: 4001
X-MYNAME-ERROR-MESSAGE: Bad authentication token
X-MYNAME-ERROR-INFO: http://docs.example.com/api/v1/authentication
```

2ã€ç›´æ¥æ”¾å…¥å“åº”å®ä½“ä¸­ï¼›

```http
HTTP/1.1 401 Unauthorized
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 10:02:59 GMT
Connection: keep-alive

{"error_code":40100,"message":"Unauthorized"}
```

è€ƒè™‘åˆ°æ˜“è¯»æ€§å’Œå®¢æˆ·ç«¯çš„æ˜“å¤„ç†æ€§ï¼Œæˆ‘ä»¬ `å¿…é¡»` æŠŠé”™è¯¯ä¿¡æ¯ç›´æ¥æ”¾åˆ°å“åº”å®ä½“ä¸­ï¼Œå¹¶ä¸”é”™è¯¯æ ¼å¼ `åº”è¯¥` æ»¡è¶³å¦‚ä¸‹æ ¼å¼ï¼š

```json
{
    "message": "æ‚¨æŸ¥æ‰¾çš„èµ„æºä¸å­˜åœ¨",
    "error_code": 404001
}
```

å…¶ä¸­é”™è¯¯ç ï¼ˆ`error_code`ï¼‰`å¿…é¡»` å’Œ `HTTP` çŠ¶æ€ç å¯¹åº”ï¼Œä¹Ÿæ–¹ä¾¿é”™è¯¯ç å½’ç±»ï¼Œå¦‚ï¼š

```http
HTTP/1.1 429 Too Many Requests
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 10:15:52 GMT
Connection: keep-alive

{"error_code":429001,"message":"ä½ æ“ä½œå¤ªé¢‘ç¹äº†"}
```

```http
HTTP/1.1 403 Forbidden
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 10:19:27 GMT
Connection: keep-alive

{"error_code":403002,"message":"ç”¨æˆ·å·²ç¦ç”¨"}
```

`åº”è¯¥` åœ¨è¿”å›çš„é”™è¯¯ä¿¡æ¯ä¸­ï¼ŒåŒæ—¶åŒ…å«é¢å‘å¼€å‘è€…å’Œé¢å‘ç”¨æˆ·çš„æç¤ºä¿¡æ¯ï¼Œå‰è€…å¯æ–¹ä¾¿å¼€å‘äººå‘˜è°ƒè¯•ï¼Œåè€…å¯ç›´æ¥å±•ç¤ºç»™ç»ˆç«¯ç”¨æˆ·æŸ¥çœ‹å¦‚ï¼š

```json
{
    "message": "ç›´æ¥å±•ç¤ºç»™ç»ˆç«¯ç”¨æˆ·çš„é”™è¯¯ä¿¡æ¯",
    "error_code": "ä¸šåŠ¡é”™è¯¯ç ",
    "error": "ä¾›å¼€å‘è€…æŸ¥çœ‹çš„é”™è¯¯ä¿¡æ¯",
    "debug": [
        "é”™è¯¯å †æ ˆï¼Œå¿…é¡»å¼€å¯ debug æ‰å­˜åœ¨"
    ]
}
```

ä¸‹é¢è¯¦ç»†åˆ—ä¸¾äº†å„ç§æƒ…å†µ API çš„è¿”å›è¯´æ˜ã€‚

### 200 ok

`200` çŠ¶æ€ç æ˜¯æœ€å¸¸è§çš„ `HTTP` çŠ¶æ€ç ï¼Œåœ¨æ‰€æœ‰ **æˆåŠŸ** çš„ `GET` è¯·æ±‚ä¸­ï¼Œ`å¿…é¡»` è¿”å›æ­¤çŠ¶æ€ç ã€‚`HTTP` å“åº”å®ä½“éƒ¨åˆ† `å¿…é¡»` ç›´æ¥å°±æ˜¯æ•°æ®ï¼Œä¸è¦åšå¤šä½™çš„åŒ…è£…ã€‚

é”™è¯¯ç¤ºä¾‹ï¼š

```http
HTTP/1.1 200 ok
Content-Type: application/json
Server: example.com

{
    "user": {
        "id":1,
        "nickname":"fwest",
        "username": "example"
    }
}
```

æ­£ç¡®ç¤ºä¾‹ï¼š

1ã€è·å–å•ä¸ªèµ„æºè¯¦æƒ…

```json
{
    "id": 1,
    "username": "godruoyi",
    "age": 88,
}
```

2ã€è·å–èµ„æºé›†åˆ

```json
[
    {
        "id": 1,
        "username": "godruoyi",
        "age": 88,
    },
    {
        "id": 2,
        "username": "foo",
        "age": 88,
    }
]
```

3ã€é¢å¤–çš„åª’ä½“ä¿¡æ¯

```json
{
    "data": [
        {
            "id": 1,
            "avatar": "https://lorempixel.com/640/480/?32556",
            "nickname": "fwest",
            "last_logined_time": "2018-05-29 04:56:43",
            "has_registed": true
        },
        {
            "id": 2,
            "avatar": "https://lorempixel.com/640/480/?86144",
            "nickname": "zschowalter",
            "last_logined_time": "2018-06-16 15:18:34",
            "has_registed": true
        }
    ],
    "meta": {
        "pagination": {
            "total": 101,
            "count": 2,
            "per_page": 2,
            "current_page": 1,
            "total_pages": 51,
            "links": {
                "next": "http://api.example.com?page=2"
            }
        }
    }
}
```

> å…¶ä¸­ï¼Œåˆ†é¡µå’Œå…¶ä»–é¢å¤–çš„åª’ä½“ä¿¡æ¯ï¼Œå¿…é¡»æ”¾åˆ° `meta` å­—æ®µä¸­ã€‚

### 201 Created

å½“æœåŠ¡å™¨åˆ›å»ºæ•°æ®æˆåŠŸæ—¶ï¼Œ`åº”è¯¥` è¿”å›æ­¤çŠ¶æ€ç ã€‚å¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯ä½¿ç”¨ `POST` æäº¤ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚ï¼š

* æ·»åŠ äº†æ–°ç”¨æˆ·
* ä¸Šä¼ äº†å›¾ç‰‡
* åˆ›å»ºäº†æ–°æ´»åŠ¨

ç­‰ï¼Œéƒ½å¯ä»¥è¿”å› `201` çŠ¶æ€ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å¯ä»¥é€‰æ‹©åœ¨ç”¨æˆ·åˆ›å»ºæˆåŠŸåè¿”å›æ–°ç”¨æˆ·çš„æ•°æ®

```http
HTTP/1.1 201 Created
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 24 Jun 2018 09:13:40 GMT
Connection: keep-alive

{
    "id": 1,
    "avatar": "https:\/\/lorempixel.com\/640\/480\/?32556",
    "nickname": "fwest",
    "last_logined_time": "2018-05-29 04:56:43",
    "created_at": "2018-06-16 17:55:55",
    "updated_at": "2018-06-16 17:55:55"
}
```

ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå“åº”å®ä½“ä¸ºç©ºçš„ `HTTP Response` å¦‚ï¼š

```http
HTTP/1.1 201 Created
Server: nginx/1.11.9
Content-Type: text/html; charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 24 Jun 2018 09:12:20 GMT
Connection: keep-alive
```

> è¿™é‡Œæˆ‘ä»¬ `åº”è¯¥` é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œå› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“è¯¥è¯·æ±‚æ“ä½œæˆåŠŸä¸å¦ï¼Œå¹¶ä¸éœ€è¦è¿”å›æ–°èµ„æºçš„ä¿¡æ¯ã€‚

### 202 Accepted

è¯¥çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ¥å—åˆ°äº†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä½†è¿˜æœªå¼€å§‹å¤„ç†ã€‚å¸¸ç”¨çŸ­ä¿¡å‘é€ã€é‚®ä»¶é€šçŸ¥ã€æ¨¡æ¿æ¶ˆæ¯æ¨é€ç­‰è¿™ç±»å¾ˆè€—æ—¶éœ€è¦é˜Ÿåˆ—æ”¯æŒçš„åœºæ™¯ä¸­ï¼›

> è¿”å›è¯¥çŠ¶æ€ç æ—¶ï¼Œå“åº”å®ä½“ `å¿…é¡»` ä¸ºç©ºã€‚

```html
HTTP/1.1 202 Accepted
Server: nginx/1.11.9
Content-Type: text/html; charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 24 Jun 2018 09:25:15 GMT
Connection: keep-alive
```

### 204 No Content

è¯¥çŠ¶æ€ç è¡¨ç¤ºå“åº”å®ä½“ä¸åŒ…å«ä»»ä½•æ•°æ®ï¼Œå…¶ä¸­ï¼š

* åœ¨ä½¿ç”¨ `DELETE` æ–¹æ³•åˆ é™¤èµ„æº **æˆåŠŸ** æ—¶ï¼Œ`å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç 
* ä½¿ç”¨ `PUT`ã€`PATCH` æ–¹æ³•æ›´æ–°æ•°æ® **æˆåŠŸ** æ—¶ï¼Œä¹Ÿ `åº”è¯¥` è¿”å›æ­¤çŠ¶æ€ç 

```http
HTTP/1.1 204 No Content
Server: nginx/1.11.9
Date: Sun, 24 Jun 2018 09:29:12 GMT
Connection: keep-alive
```

### 3xx é‡å®šå‘

æ‰€æœ‰ `API` `ä¸è¯¥` è¿”å› `3xx` ç±»å‹çš„çŠ¶æ€ç ã€‚å› ä¸º `3xx` ç±»å‹çš„å“åº”æ ¼å¼ä¸€èˆ¬ä¸ºä¸‹åˆ—æ ¼å¼ï¼š

```html
HTTP/1.1 302 Found
Server: nginx/1.11.9
Content-Type: text/html; charset=UTF-8
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 09:41:50 GMT
Location: https://example.com
Connection: keep-alive

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="refresh" content="0;url=https://example.com" />

        <title>Redirecting to https://example.com</title>
    </head>
    <body>
        Redirecting to <a href="https://example.com">https://example.com</a>.
    </body>
</html>
```

æ‰€æœ‰ `API` `ä¸€å®šä¸å¯` è¿”å›çº¯ `HTML` ç»“æ„çš„å“åº”ï¼›è‹¥ä¸€å®šè¦ä½¿ç”¨é‡å®šå‘åŠŸèƒ½ï¼Œ`å¯ä»¥` è¿”å›ä¸€ä¸ªå“åº”å®ä½“ä¸ºç©ºçš„ `3xx` å“åº”ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­åŠ ä¸Š `Location` å­—æ®µ:

```http
HTTP/1.1 302 Found
Server: nginx/1.11.9
Content-Type: text/html; charset=UTF-8
Transfer-Encoding: chunked
Date: Sun, 24 Jun 2018 09:52:50 GMT
Location: https://godruoyi.com
Connection: keep-alive
```

### 400 Bad Request

ç”±äºæ˜æ˜¾çš„å®¢æˆ·ç«¯é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œè¯·æ±‚è¯­æ³•æ ¼å¼é”™è¯¯ã€æ— æ•ˆçš„è¯·æ±‚ã€æ— æ•ˆçš„ç­¾åç­‰ï¼‰ï¼ŒæœåŠ¡å™¨ `åº”è¯¥` æ”¾å¼ƒè¯¥è¯·æ±‚ã€‚

> å½“æœåŠ¡å™¨æ— æ³•ä»å…¶ä»– 4xx ç±»å‹çš„çŠ¶æ€ç ä¸­æ‰¾å‡ºåˆé€‚çš„æ¥è¡¨ç¤ºé”™è¯¯ç±»å‹æ—¶ï¼Œéƒ½ `å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç ã€‚

```http
HTTP/1.1 400 Bad Request
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 13:22:36 GMT
Connection: keep-alive

{"error_code":40000,"message":"æ— æ•ˆçš„ç­¾å"}
```

### 401 Unauthorized

è¯¥çŠ¶æ€ç è¡¨ç¤ºå½“å‰è¯·æ±‚éœ€è¦èº«ä»½è®¤è¯ï¼Œä»¥ä¸‹æƒ…å†µéƒ½ `å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç ã€‚

* æœªè®¤è¯ç”¨æˆ·è®¿é—®éœ€è¦è®¤è¯çš„ API
* access_token æ— æ•ˆ/è¿‡æœŸ

> å®¢æˆ·ç«¯åœ¨æ”¶åˆ° `401` å“åº”åï¼Œéƒ½ `åº”è¯¥` æç¤ºç”¨æˆ·è¿›è¡Œä¸‹ä¸€æ­¥çš„ç™»å½•æ“ä½œã€‚

```http
HTTP/1.1 401 Unauthorized
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
WWW-Authenticate: JWTAuth
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 13:17:02 GMT
Connection: keep-alive

{"message":"Token Signature could not be verified.","error_code": "40100"}
```

### 403 Forbidden

è¯¥çŠ¶æ€ç å¯ä»¥ç®€å•çš„ç†è§£ä¸ºæ²¡æœ‰æƒé™è®¿é—®è¯¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä½†æ‹’ç»æä¾›æœåŠ¡ã€‚

å¦‚å½“æ™®é€šç”¨æˆ·è¯·æ±‚æ“ä½œç®¡ç†å‘˜ç”¨æˆ·æ—¶ï¼Œ`å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç ã€‚

```http
HTTP/1.1 403 Forbidden
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 13:05:34 GMT
Connection: keep-alive

{"error_code":40301,"message":"æƒé™ä¸è¶³"}
```

### 404 Not Found

è¯¥çŠ¶æ€ç è¡¨ç¤ºç”¨æˆ·è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œå¦‚

* è·å–ä¸å­˜åœ¨çš„ç”¨æˆ·ä¿¡æ¯ ï¼ˆget /users/9999999ï¼‰
* è®¿é—®ä¸å­˜åœ¨çš„ç«¯ç‚¹

éƒ½ `å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç ï¼Œè‹¥è¯¥èµ„æºå·²æ°¸ä¹…ä¸å­˜åœ¨ï¼Œåˆ™ `åº”è¯¥` è¿”å› `410` å“åº”ã€‚

### 405 Method Not Allowed

å½“å®¢æˆ·ç«¯ä½¿ç”¨çš„ `HTTP` è¯·æ±‚æ–¹æ³•ä¸è¢«æœåŠ¡å™¨å…è®¸æ—¶ï¼Œ`å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç ã€‚

> å¦‚å®¢æˆ·ç«¯è°ƒç”¨äº† `POST` æ–¹æ³•æ¥è®¿é—®åªæ”¯æŒ GET æ–¹æ³•çš„ API

è¯¥å“åº” `å¿…é¡»` è¿”å›ä¸€ä¸ª `Allow` å¤´ä¿¡æ¯ç”¨ä»¥è¡¨ç¤ºå‡ºå½“å‰èµ„æºèƒ½å¤Ÿæ¥å—çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ã€‚

```http
HTTP/1.1 405 Method Not Allowed
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Allow: GET, HEAD
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 12:30:57 GMT
Connection: keep-alive

{"message":"405 Method Not Allowed","error_code": 40500}
```

### 406 Not Acceptable

`API` åœ¨ä¸æ”¯æŒå®¢æˆ·ç«¯æŒ‡å®šçš„æ•°æ®æ ¼å¼æ—¶ï¼Œåº”è¯¥è¿”å›æ­¤çŠ¶æ€ç ã€‚å¦‚æ”¯æŒ `JSON` å’Œ `XML` è¾“å‡ºçš„ `API` è¢«æŒ‡å®šè¿”å› `YAML` æ ¼å¼çš„æ•°æ®æ—¶ã€‚

> Http åè®®ä¸€èˆ¬é€šè¿‡è¯·æ±‚é¦–éƒ¨çš„ Accept æ¥æŒ‡å®šæ•°æ®æ ¼å¼

### 408 Request Timeout

å®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶æ—¶ `å¿…é¡»` è¿”å›è¯¥çŠ¶æ€ç ï¼Œéœ€è¦æ³¨æ„çš„æ—¶ï¼Œè¯¥çŠ¶æ€ç è¡¨ç¤º **å®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶**ï¼Œåœ¨æ¶‰åŠç¬¬ä¸‰æ–¹ `API` è°ƒç”¨è¶…æ—¶æ—¶ï¼Œ`ä¸€å®šä¸å¯` è¿”å›è¯¥çŠ¶æ€ç ã€‚

### 409 Confilct

è¯¥çŠ¶æ€ç è¡¨ç¤ºå› ä¸ºè¯·æ±‚å­˜åœ¨å†²çªæ— æ³•å¤„ç†ã€‚å¦‚é€šè¿‡æ‰‹æœºå·ç æä¾›æ³¨å†ŒåŠŸèƒ½çš„ `API`ï¼Œå½“ç”¨æˆ·æäº¤çš„æ‰‹æœºå·å·²å­˜åœ¨æ—¶ï¼Œ`å¿…é¡»` è¿”å›æ­¤çŠ¶æ€ç ã€‚

```http
HTTP/1.1 409 Conflict
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 12:19:04 GMT
Connection: keep-alive

{"error_code":40900,"message":"æ‰‹æœºå·å·²å­˜åœ¨"}
```

### 410 Gone

å’Œ `404` ç±»ä¼¼ï¼Œè¯¥çŠ¶æ€ç ä¹Ÿè¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œåªæ˜¯ `410` çŠ¶æ€ç è¿›ä¸€æ­¥è¡¨ç¤ºæ‰€è¯·æ±‚çš„èµ„æºå·²ä¸å­˜åœ¨ï¼Œå¹¶ä¸”æœªæ¥ä¹Ÿä¸ä¼šå­˜åœ¨ã€‚åœ¨æ”¶åˆ° `410` çŠ¶æ€ç åï¼Œå®¢æˆ·ç«¯ `åº”è¯¥` åœæ­¢å†æ¬¡è¯·æ±‚è¯¥èµ„æºã€‚

### 413 Request Entity Too Large

è¯¥çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚

> æ­¤ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥å…³é—­è¿æ¥ä»¥å…å®¢æˆ·ç«¯ç»§ç»­å‘é€æ­¤è¯·æ±‚ã€‚

å¦‚æœè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼ŒæœåŠ¡å™¨ `åº”è¯¥` è¿”å›ä¸€ä¸ª `Retry-After` çš„å“åº”å¤´ï¼Œä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥åœ¨å¤šå°‘æ—¶é—´ä»¥åé‡æ–°å°è¯•ã€‚

### 414 Request-URI Too Long

è¯¥çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚çš„ `URI` é•¿åº¦è¶…è¿‡äº†æœåŠ¡å™¨èƒ½å¤Ÿè§£é‡Šçš„é•¿åº¦ï¼Œå› æ­¤æœåŠ¡å™¨æ‹’ç»å¯¹è¯¥è¯·æ±‚æä¾›æœåŠ¡ã€‚

### 415 Unsupported Media Type

é€šå¸¸è¡¨ç¤ºæœåŠ¡å™¨ä¸æ”¯æŒå®¢æˆ·ç«¯è¯·æ±‚é¦–éƒ¨ `Content-Type` æŒ‡å®šçš„æ•°æ®æ ¼å¼ã€‚å¦‚åœ¨åªæ¥å— `JSON` æ ¼å¼çš„ `API` ä¸­æ”¾å…¥ `XML` ç±»å‹çš„æ•°æ®å¹¶å‘æœåŠ¡å™¨å‘é€ï¼Œéƒ½ `åº”è¯¥` è¿”å›è¯¥çŠ¶æ€ç ã€‚

è¯¥çŠ¶æ€ç ä¹Ÿå¯ç”¨äºå¦‚ï¼šåªå…è®¸ä¸Šä¼ å›¾ç‰‡æ ¼å¼çš„æ–‡ä»¶ï¼Œä½†æ˜¯å®¢æˆ·ç«¯æäº¤åª’ä½“æ–‡ä»¶éæ³•æˆ–ä¸æ˜¯å›¾ç‰‡ç±»å‹ï¼Œè¿™æ—¶ `åº”è¯¥` è¿”å›è¯¥çŠ¶æ€ç ï¼š

```http
HTTP/1.1 415 Unsupported Media Type
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 12:09:40 GMT
Connection: keep-alive

{"error_code":41500,"message":"ä¸å…è®¸ä¸Šä¼ çš„å›¾ç‰‡æ ¼å¼"}
```

### 429 Too Many Requests

è¯¥çŠ¶æ€ç è¡¨ç¤ºç”¨æˆ·è¯·æ±‚æ¬¡æ•°è¶…è¿‡å…è®¸èŒƒå›´ã€‚å¦‚ `API` è®¾å®šä¸º `60æ¬¡/åˆ†é’Ÿ`ï¼Œå½“ç”¨æˆ·åœ¨ä¸€åˆ†é’Ÿå†…è¯·æ±‚æ¬¡æ•°è¶…è¿‡ 60 æ¬¡åï¼Œéƒ½ `åº”è¯¥` è¿”å›è¯¥çŠ¶æ€ç ã€‚å¹¶ä¸”ä¹Ÿ `åº”è¯¥` åœ¨å“åº”é¦–éƒ¨ä¸­åŠ ä¸Šä¸‹åˆ—å¤´éƒ¨ï¼š

```bash
X-RateLimit-Limit: 10 è¯·æ±‚é€Ÿç‡ï¼ˆç”±åº”ç”¨è®¾å®šï¼Œå…¶å•ä½ä¸€èˆ¬ä¸ºå°æ—¶/åˆ†é’Ÿç­‰ï¼Œè¿™é‡Œæ˜¯ 10æ¬¡/5åˆ†é’Ÿï¼‰
X-RateLimit-Remaining: 0 å½“å‰å‰©ä½™çš„è¯·æ±‚æ•°é‡
X-RateLimit-Reset: 1529839462 é‡ç½®æ—¶é—´
Retry-After: 120 ä¸‹ä¸€æ¬¡è®¿é—®åº”è¯¥ç­‰å¾…çš„æ—¶é—´ï¼ˆç§’ï¼‰
```

åˆ—å­

```http
HTTP/1.1 429 Too Many Requests
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
X-RateLimit-Limit: 10
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1529839462
Retry-After: 290
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 11:19:32 GMT
Connection: keep-alive

{"message":"You have exceeded your rate limit.","error_code":42900}
```

`å¿…é¡»` ä¸ºæ‰€æœ‰çš„ API è®¾ç½® Rate Limit æ”¯æŒã€‚

### 500 Internal Server Error

è¯¥çŠ¶æ€ç  `å¿…é¡»` åœ¨æœåŠ¡å™¨å‡ºé”™æ—¶æŠ›å‡ºï¼Œå¯¹äºæ‰€æœ‰çš„ `500` é”™è¯¯ï¼Œéƒ½ `åº”è¯¥` æä¾›å®Œæ•´çš„é”™è¯¯ä¿¡æ¯æ”¯æŒï¼Œä¹Ÿæ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•ã€‚

### 503 Service Unavailable

è¯¥çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨æš‚æ—¶å¤„ç†ä¸å¯ç”¨çŠ¶æ€ï¼Œå½“æœåŠ¡å™¨éœ€è¦ç»´æŠ¤æˆ–ç¬¬ä¸‰æ–¹ `API` è¯·æ±‚è¶…æ—¶/ä¸å¯è¾¾æ—¶ï¼Œéƒ½ `åº”è¯¥` è¿”å›è¯¥çŠ¶æ€ç ï¼Œå…¶ä¸­è‹¥æ˜¯ä¸»åŠ¨å…³é—­ API æœåŠ¡ï¼Œ`åº”è¯¥`åœ¨è¿”å›çš„å“åº”é¦–éƒ¨åŠ ä¸Š `Retry-After` å¤´éƒ¨ï¼Œè¡¨ç¤ºå¤šå°‘ç§’åå¯ä»¥å†æ¬¡è®¿é—®ã€‚

```http
HTTP/1.1 503 Service Unavailable
Server: nginx/1.11.9
Content-Type: application/json
Transfer-Encoding: chunked
Cache-Control: no-cache, private
Date: Sun, 24 Jun 2018 10:56:20 GMT
Retry-After: 60
Connection: keep-alive

{"error_code":50300,"message":"æœåŠ¡ç»´æŠ¤ä¸­"}
```

å…¶ä»– `HTTP` çŠ¶æ€ç è¯·å‚è€ƒ [HTTP çŠ¶æ€ç - ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/zh-hans/HTTP%E7%8A%B6%E6%80%81%E7%A0%81)ã€‚

## ç‰ˆæƒå£°æ˜

> ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ[åˆ›æ„å…±äº« 3.0 è®¸å¯è¯](https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh)ï¼‰

## å‚è€ƒé“¾æ¥

- [RESTful-api-design-references](https://github.com/aisuhua/restful-api-design-references)
- [Principles of good RESTful API Designï¼ˆè¯‘ï¼‰](http://www.cnblogs.com/moonz-wu/p/4211626.html)
- [ç†è§£ RESTful æ¶æ„](http://www.ruanyifeng.com/blog/2011/09/restful.html)
- [RESTful API è®¾è®¡æŒ‡å—](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)
- [HTTP çŠ¶æ€ç - ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/zh-hans/HTTP%E7%8A%B6%E6%80%81%E7%A0%81)
- [ç†è§£ RESTful æ¶æ„](http://www.ruanyifeng.com/blog/2011/09/restful.html)
- [RESTful API æœ€ä½³å®è·µ](http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html)
- [RESTful API è®¾è®¡æŒ‡å—](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)
- [RESETful API è®¾è®¡è§„èŒƒ](https://godruoyi.com/posts/the-resetful-api-design-specification)
- [RESETful API è®¾è®¡è§„èŒƒ | Laravel China ç¤¾åŒº](https://learnku.com/laravel/t/13740/resetful-api-design-specification)
- [RESTful æœåŠ¡æœ€ä½³å®è·µ - Jaxu - åšå®¢å›­](https://www.cnblogs.com/jaxu/p/7908111.html)

## LICENSE

MIT License

Copyright (c) 2018 godruoyi

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
## æ¨èé˜…è¯»

[General AIPs](https://google.aip.dev/general)
[ã€ŠGoogle API Design Guide (è°·æ­ŒAPIè®¾è®¡æŒ‡å—)ä¸­æ–‡ç‰ˆã€‹ - ä¹¦æ ˆç½‘ Â· BookStack](https://www.bookstack.cn/read/API-design-guide/API-design-guide-README.md)
---
title: CentOS7 éƒ¨ç½² nautilus ç‰ˆ CEPHï¼ˆä½¿ç”¨ ceph-deployï¼‰
tags: 
  - CEPH
  - ç¯å¢ƒæ­å»º
  - CentOS7
cover: https://i1.wp.com/ceph.io/wp-content/uploads/2019/03/nautilus.svg_.png
subtitle: äººç”Ÿè‹¦çŸ­ï¼Œä¸è¦æŠŠæ—¶é—´æµªè´¹åœ¨é‡å¤æ€§å·¥ä½œä¸Šã€‚æœ¬æ–‡ä¸»è¦ä»¥ ceph-deploy ä¸ºä¾‹å®è·µäº† ceph é›†ç¾¤çš„éƒ¨ç½²æµç¨‹ã€‚
categories: 
  - ğŸ’» å·¥ä½œ
  - å­˜å‚¨
  - CEPH
  - éƒ¨ç½²
date: 2020-03-15 12:37:35
permalink: /pages/d5732f/
---
## å¼•è¨€
é¡¹ç›®å¼€å‘ä¸­å‡†å¤‡åŸºäº ceph-mgr ä¸­çš„ dashboard åšäºŒæ¬¡å¼€å‘ï¼Œæœ¬æ–‡ä¸»è¦è®°å½•æ­å»º ceph ç¯å¢ƒçš„è¿‡ç¨‹ã€‚
### ç¯å¢ƒè¯´æ˜
èŠ‚ç‚¹é…ç½®ä¸­å‚è€ƒå®˜ç½‘æ­å»ºç¤ºä¾‹ï¼ŒåŸºäºå®ä½“æœºå†…å­˜çŠ¶å†µé™åˆ¶ï¼Œä½¿ç”¨ä¸‰èŠ‚ç‚¹æœ€å°èŠ‚ç‚¹é…ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
![ceph èŠ‚ç‚¹ç»„æˆè¯´æ˜](/images/ceph-1.png)
## å‰æœŸå‡†å¤‡
1. é…ç½®ç½‘ç»œä¸ºé™æ€ ip
ç®€ç•¥
2. æ·»åŠ  CEPH çš„ yum æº
```plain
vim /etc/yum.repos.d/ceph.repo
```
```plain
[Ceph]
name=Ceph packages for $basearch
baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/$basearch
enabled=1
gpgcheck=0
type=rpm-md

[Ceph-noarch]
name=Ceph noarch packages
baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/noarch
enabled=1
gpgcheck=0
type=rpm-md

[ceph-source]
name=Ceph source packages
baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/SRPMS
enabled=1
gpgcheck=0
type=rpm-md
```
3. æ›´æ–° epel.repo
å›½å†…ä½¿ç”¨é˜¿é‡ŒæºåŠ å¿«ä¸‹è½½
 ```plain
wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
# æˆ–è€…ç›´æ¥å†™å…¥
[epel]
name=Extra Packages for Enterprise Linux 7 - $basearch
baseurl=http://mirrors.aliyun.com/epel/7/$basearch
failovermethod=priority
enabled=1
gpgcheck=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7

[epel-debuginfo]
name=Extra Packages for Enterprise Linux 7 - $basearch - Debug
baseurl=http://mirrors.aliyun.com/epel/7/$basearch/debug
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=0

[epel-source]
name=Extra Packages for Enterprise Linux 7 - $basearch - Source
baseurl=http://mirrors.aliyun.com/epel/7/SRPMS
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=0
```plain
4. æ›´æ–°æºå¹¶å®‰è£… ceph-deploy
```plain
sudo yum update
sudo yum install ceph-deploy
```
5. å®‰è£… NTP
```plain
sudo yum install ntp ntpdate ntp-doc
```
6. å®‰è£… SSH æœåŠ¡
```plain
sudo yum install openssh-server
```
7. ä¿®æ”¹ host
```shell
vi /etc/hosts
```
```plain
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
172.18.1.101 admin-node
172.18.1.102 node1
172.18.1.103 node2
```

### åˆ›å»º CEPH DEPLOY ç”¨æˆ·ï¼ˆä»¥ cephadm ä¸ºä¾‹ï¼‰
1. åˆ›å»ºç”¨æˆ·
```plain
# æœ¬ä¾‹ä¸­ä½¿ç”¨ cephadm
sudo useradd -d /home/cephadm -m cephadm
sudo passwd cephadm
```
2. sudo èµ‹æƒ
```plain
echo "cephadm ALL = (root) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/cephadm
sudo chmod 0440 /etc/sudoers.d/cephadm
```
3. tty
ä½¿ç”¨ sudo visudo å®šä½`Defaults requiretty`é…ç½®ä¿®æ”¹ä¸º`Defaults:ceph !requiretty`æˆ–è€…ç›´æ¥æ³¨é‡Šæ‰ï¼›
---
